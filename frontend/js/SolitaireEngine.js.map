{"version":3,"sources":["webpack:///SolitaireEngine.js","webpack:///webpack/bootstrap 51999719aa84bc34759c","webpack:///./sources/index.js","webpack:///./sources/common/share.js","webpack:///./sources/common/event.js","webpack:///./sources/common/defaults.js","webpack:///./sources/dom/inputs.js","webpack:///./sources/common/common.js","webpack:///./sources/tips/tips.js","webpack:///./sources/tips/tipsRules.js","webpack:///./sources/tips/bestTip.js","webpack:///./sources/field.js","webpack:///./sources/group/addGroup.js","webpack:///./sources/deck/addDeck.js","webpack:///./sources/deck/flipTypes.js","webpack:///./sources/deck/readyPutRules.js","webpack:///./sources/deck/readyTakeRules.js","webpack:///./sources/deck/fillRules.js","webpack:///./sources/deck/paddingTypes.js","webpack:///./sources/deck/deckActions.js","webpack:///./sources/deck/actions/twindeckAction.js","webpack:///./sources/deck/actions/dealerdeckAction.js","webpack:///./sources/history/forceMove.js","webpack:///./sources/dom/render/elRender.js","webpack:///./sources/dom/render/elClass.js","webpack:///./sources/dom/render/allElClass.js","webpack:///./sources/history/history.js","webpack:///./sources/deck/actions/kickAction.js","webpack:///./sources/deck/deckTake.js","webpack:///./sources/deck/deckPut.js","webpack:///./sources/deck/genCardByName.js","webpack:///./sources/deck/getDecks.js","webpack:///./sources/deck/getDeckById.js","webpack:///./sources/deck/deckCardNames.js","webpack:///./sources/deck/getDeck.js","webpack:///./sources/group/groupFill.js","webpack:///./sources/group/groupRedraw.js","webpack:///./sources/group/groupGenerator.js","webpack:///./sources/group/generators/mapGenerator.js","webpack:///./sources/group/generators/fanGenerator.js","webpack:///./sources/preferences/drawPreferences.js","webpack:///./sources/preferences/preferncesTemplate.html","webpack:///./sources/preferences/preferencesEvents.js","webpack:///./sources/common/storage.js","webpack:///./sources/preferences/defaultPreferences.js","webpack:///./sources/move.js","webpack:///./sources/winCheck.js","webpack:///./sources/winCheckMethods.js","webpack:///./sources/dom/domManager.js","webpack:///./sources/dom/initField.js","webpack:///./sources/dom/drawDeck.js","webpack:///./sources/dom/drawCard.js","webpack:///./sources/dom/drawTip.js","webpack:///./sources/dom/moveDragDeck.js","webpack:///./sources/dom/moveCardToHome.js","webpack:///./sources/dom/fieldThemesSet.js","webpack:///./sources/debug.js","webpack:///./sources/deck/deckGenerator.js","webpack:///./sources/tests/renderTest.js"],"names":["SolitaireEngine","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_share","_event","_event2","_defaults","_defaults2","_inputs","_move","_domManager","_field2","_field3","_common","_common2","_winCheck","_winCheck2","_debug","_debug2","event","options","winCheck","hwinCheck","firstInit","init","gameConfig","tests","onInit","_field","afterInit","Redraw","data","debug","Object","defineProperty","value","this","get","name","set","_data","_name","console","warn","getAll","events","listen","callback","push","dispatch","i","card","width","height","suits","colors","red","black","ranks","values","ranks36","zoom","can_move_flip","showSlot","autohide","paddingType","flip_type","takeRules","putName","tipRule","padding_y","padding_x","flip_padding_y","flip_padding_x","move_distance","Tips","moveDistance","showTips","showTipsDestination","showTipPriority","debugLabels","debugLog","themes","face","back","empty","animation","animationTime","startZIndex","topZIndex","canMoveFlip","afterStep","tipsParams","hideOnEmpty","excludeHomeGroups","inputParams","doubleClick","pref","_share2","_addDeck","_addDeck2","_tips","_tips2","_inputUndoRedo","_dragDeck","parent","_deck","getDeckById","curUnLock","cdown","target","x","y","isCurLock","className","split","indexOf","_id","getElementById","_card","_parent","Take","tipsDestination","currentCard","cmove","_startCursor","_distance","Math","sqrt","sqr","_position","padding","length","index","cursorMove","distance","direction","right","left","down","up","lastPosition","deckPosition","tipsMove","moveDeck","cend","dbclick","_dop","document","elementFromPoint","log","to","onmousedown","e","button","clientX","clientY","onmousemove","onmouseup","ondblclick","addEventListener","touches","startCursor","preventDefault","changedTouches","_drawPreferences","_drawPreferences2","_preferencesEvents","_preferencesEvents2","_defaultPreferences","_defaultPreferences2","_lock","isLock","lock","unlock","curLock","getElements","a","_elements","getElementsByName","type","response","validateCardName","nolog","suit","slice","rank","color","colorName","genId","animationOn","animationDefault","animationOff","checkTips","_tipsRules","_tipsRules2","_bestTip","_bestTip2","_showTips","tipTypes","getTips","_decks","getDecks","visible","_autoTipsName","_autoTips","decks","autoTips","concat","rules","_homeGroups","homeGroups","count","from","deck","el","hideTips","types","Tip","allToAll","_moves","put","deckIndex_2","deckIndex","cardIndex","_cards","_cards_to","cards","_card_to","lastCard","decksToPut","_take","_put","Put","cardsInTakeDeck","_tips3","_min_distance","_tip_index","_in_direction_count","t","center_from","_destination_deck_last_card_position","center_to","inDirection","_addGroup","_addGroup2","Field","clear","JSON","parse","stringify","winCheckCallback","saveStep","saveStepCallback","tipParamName","inputParamName","_can_move_flip","Draw","groups","groupName","addGroup","addDeck","fill","_fill","deckId","shift","Fill","prototype","_groupName","_group","Group","Deck","_fieldExport","_groupFill","_groupFill2","_groupRedraw","_groupRedraw2","_groupGenerator","_groupGenerator2","groupConstructor","getId","position","placement","parameters","flip","putRules","fillRule","autoHide","paddingX","paddingY","flipPaddingX","flipPaddingY","actions","parentPosition","_index","groupIndex","_el","cardNames","getDecksByName","d","_a","_el_group","generator","decksRelations","_checkFillDeck","_flipTypes","_flipTypes2","_readyPutRules","_readyPutRules2","_readyTakeRules","_fillRules","_fillRules2","_paddingTypes","_paddingTypes2","_deckActions","_deckActions2","_deckTake","_deckTake2","_deckPut","_deckPut2","_genCardByName","_genCardByName2","_history","_history2","_getDecks","_getDecks2","_getDeckById","_getDeckById2","_deckCardNames","_deckCardNames2","_getDeck","_getDeck2","deckConstructor","getTopCard","locked","_parent_el","_parent_name","_new_id","params","rotate","flipType","checkFlip","flipCheck","constructor","Array","_padding","addActions","relations","destination","add","bind","genCardByName","Push","Pop","clearParent","_pop","pop","reverse","hide","cardId","putDeck","hideDeck","show","showDeck","getCardsByName","cardName","Card","hideCards","showCards","getCardsNames","_cardsNames","_el_deck","deckCardNames","none","all","notlast","first_1","first_2","first_3","rpr","_downupcards","_downupranknum","du","_isFirst","_validate","striped","color_A","color_B","firstAce","firstKing","notForEmpty","oneRank","oneSuit","any","not","ascendDeck","ruleCorrect","descendDeck","oneRankDeck","ascend","da","descent","descentOne","ascendOne","ascdescOne","abs","summ14","notFirst","onlytop","deckLength","ask","desc","last_three_min","twindeck_typeA","twindeck_max_cards","twindeck_deck_length","_depth","_plus","radial","_radius","_angle","_deg","PI","sin","_b","cos","special","_y","_x","vertical","_return","horizontal","_event3","_twindeckAction","_twindeckAction2","_dealerdeckAction","_dealerdeckAction2","_kickAction","_kickAction2","_actions","twindeck","dealerdeck","kick","avalanche","_decksActions","_events","addActionEvent","_actionName","action","_canRun","actionData","eventData","eventName","actionName","autoRunActions","autorun","toGroup","elIndex","_makeStep","onlyEmpty","_canStep","_cardName","_forceMove2","move","_forceMove","_animation","_from","_to","_check","_from_deck","__pop","departure","_elRender","_elClass","_elClass2","_allElClass","_allElClass2","_allEl","Error","elements","_element","Infinity","getElementsByClassName","_temp","createElement","innerHTML","children","stopAnimations","css","transition","removeClass","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","elClass","attributes","attrName","_classes","hasClass","addClass","join","_clone","style","display","appendChild","_this","arguments","undefined","setTimeout","counter","remove","parentNode","html","insertBefore","nextElementSibling","allElClass","attr","toggleClass","animate","_oneStepWay","_undoMethods","_redoMethods","_undo","_i","_redo","reset","step","_req","addUndoMethods","addRedoMethods","rulesCorrect","cardSuit","cardRank","takeDeck","_attrs","ruleIndex","ruleName","_readyTakeRules2","_deckId","_deck_departure","rulesArgs","_gecks","_decksLength","_decksWithBigIndex","_checkDeck","_mapGenerator","_mapGenerator2","_fanGenerator","_fanGenerator2","_count","_deckName","map","fan","_default_placement","_placement","_mapSize","forEach","max","aroundRealtions","_relations","inMap","mapSize","_step","radius","_center","center","_html","$","before","_storage","_storage2","onShowParameters","prop","selected","applyParameters","val","saveParameters","click","change","storage","localStorage","hasOwnProperty","_ls","Move","_deck_destination","_success","unflip","domElement","_winCheckMethods","_winCheckMethods2","_hasMetods","noCallback","wcm","group","filter","filterArgs","_asc_desk","asc_desk","_correct","_cardsRankS","newerWin","allEmpty","allInOne","_emptyDecksCount","_fillIndex","allAscend","allDescent","lego","next","_decksClone","filters","toString","filterName","_elRender2","_initField","_drawDeck","_drawCard","_drawTip","_moveDragDeck","_moveCardToHome","_fieldThemesSet","_typeof","Symbol","iterator","field","getElementsByTagName","_params","top","_zoom","transform","themeName","theme","applyChangedParameters","append","label","_labelElement","title","z-index","_card_position","_zIndex","-ms-transform","-webkit-transform","-moz-transform","toFixed","typeName","angleValidate","departureAngle","destinationAngle","fieldDomElement","_themeName","_themeName2","faceClassName","backClassName","emptyClassName","_deckGenerator","_deckGenerator2","_renderTest","_renderTest2","debugHistoryMgr","record","undo","redo","_debugHistory","debugHistory","drawButtons","body","text","deckGenerator","elRender","default_type","default_shuffle","max_iterations","_deckCount","deckCount","_iterations","iterations","_shuffle","shuffle","genType","_cardsColors","_cardsRanks","r","_ranks","genTypes","_cardsSuits","black_and_red","random","h_only","d_only","c_only","s_only","one_rank_only","solors","hearts","diamonds","clubs","spades","j","floor"],"mappings":"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","file":"SolitaireEngine.js","sourcesContent":["var SolitaireEngine =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/*\r\n\t * Solitaire game engine\r\n\t * by Roman Bauer - kotapesic@gmail.com\r\n\t * Oct. 2015\r\n\t * Webpack version Feb. 24 2016\r\n\t */\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _inputs = __webpack_require__(4);\n\t\n\tvar _inputs2 = _interopRequireDefault(_inputs);\n\t\n\tvar _move = __webpack_require__(43);\n\t\n\tvar _move2 = _interopRequireDefault(_move);\n\t\n\tvar _domManager = __webpack_require__(46);\n\t\n\tvar _domManager2 = _interopRequireDefault(_domManager);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _winCheck = __webpack_require__(44);\n\t\n\tvar _winCheck2 = _interopRequireDefault(_winCheck);\n\t\n\tvar _debug = __webpack_require__(54);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\t__webpack_require__(57);\n\t\n\t__webpack_require__(58);\n\t\n\t__webpack_require__(59);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.event = _event2.default;\n\t\n\t// var _themes = ['default', 'alternative'];\n\t\n\texports.options = _defaults2.default;\n\texports.winCheck = _winCheck2.default.hwinCheck;\n\t\n\tvar firstInit = true;\n\t\n\texports.init = function (gameConfig) {\n\t\n\t\tif (firstInit) {\n\t\t\t_debug2.default.tests();\n\t\t\t_common2.default.onInit();\n\t\t\tfirstInit = false;\n\t\t};\n\t\n\t\tvar _field = (0, _field3.default)(gameConfig);\n\t\n\t\t_common2.default.afterInit();\n\t\n\t\texports.Redraw = function (data) {\n\t\t\t_field.Redraw(data);\n\t\t};\n\t};\n\t\n\tif (_debug2.default) {\n\t\n\t\texports.debug = _debug2.default;\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tvar data = {};\n\t\n\texports.default = new function () {\n\t\n\t\tthis.get = function (name) {\n\t\t\tif (typeof data[name] != \"undefined\") {\n\t\t\t\t// TODO решить наконец проблему,\n\t\t\t\t// почему Object.assign не работает после babel-я\n\t\n\t\t\t\t// try {\n\t\n\t\t\t\t// if( (data[data]).toString() == \"[object Object]\" ) {\n\t\t\t\t// \treturn Object['assign'] ? Object['assign']({}, data[name]) : data[name]\n\t\t\t\t// } else {\n\t\n\t\t\t\t// event.dispatch('shareGet', {name : name, data : data[name]});\n\t\t\t\treturn data[name];\n\t\n\t\t\t\t// }\n\t\n\t\t\t\t// } catch(e) {\n\t\t\t\t// \tconsole.log( (data[name]).toString() );\n\t\t\t\t// \tconsole.log('CATCH:', name, data[name]);\n\t\t\t\t// }\n\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t};\n\t\n\t\tthis.set = function (name, _data) {\n\t\n\t\t\tif (typeof name == \"string\") {\n\t\n\t\t\t\tdata[name] = _data;\n\t\t\t\t// event.dispatch('shareSet', {name : _data});\n\t\t\t} else if (name instanceof Object && typeof _data == \"undefined\") {\n\t\n\t\t\t\t\tfor (var _name in name) {\n\t\t\t\t\t\tdata[_name] = name[_name];\n\t\t\t\t\t}\n\t\t\t\t\t// event.dispatch('shareSet', name);\n\t\t\t\t} else {\n\t\n\t\t\t\t\t\tconsole.warn('Error share.set:', name, _data);\n\t\t\t\t\t}\n\t\t\t// }\n\t\t};\n\t\n\t\tthis.getAll = function () {\n\t\t\treturn data;\n\t\t};\n\t}();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\tvar events = {};\n\t\n\texports.default = new function () {\n\t\n\t\t// this.on =\n\t\tthis.listen = function (name, callback) {\n\t\t\tif (typeof name != 'string' || typeof callback != 'function') return;\n\t\t\tif (events[name]) {\n\t\t\t\tevents[name].push(callback);\n\t\t\t} else {\n\t\t\t\tevents[name] = [callback];\n\t\t\t}\n\t\t};\n\t\n\t\t// this.do =\n\t\tthis.dispatch = function (name, data) {\n\t\n\t\t\t// console.log('dispatch', name, data);\n\t\n\t\t\tif (events[name]) {\n\t\t\t\tfor (var i in events[name]) {\n\t\t\t\t\tevents[name][i](data);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\t// this.one function(name, data) {};\n\t}();\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = {\n\t\n\t\tcard: {\n\t\t\twidth: 71,\n\t\t\theight: 96,\n\t\n\t\t\tsuits: ['h', 'd', 'c', 's'],\n\t\t\t// suitindexes : [ 1,   2,   3,   4 ],\n\t\t\tcolors: {\n\t\t\t\tred: ['h', 'd'],\n\t\t\t\tblack: ['c', 's']\n\t\t\t},\n\t\n\t\t\tranks: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'j', 'q', 'k'],\n\t\t\tvalues: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\n\t\t\tranks36: ['1', '6', '7', '8', '9', '10', 'j', 'q', 'k']\n\t\t},\n\t\n\t\tzoom: 1.0,\n\t\n\t\tcan_move_flip: false,\n\t\tshowSlot: true,\n\t\tautohide: false,\n\t\n\t\tpaddingType: 'none',\n\t\tflip_type: 'none',\n\t\ttakeRules: ['onlytop'],\n\t\tputName: 'any',\n\t\n\t\ttipRule: 'allToAll',\n\t\n\t\tpadding_y: 0,\n\t\tpadding_x: 0,\n\t\tflip_padding_y: 0, //5,\n\t\tflip_padding_x: 0, //20,\n\t\tmove_distance: 10,\n\t\n\t\tTips: null,\n\t\tmoveDistance: 0,\n\t\tshowTips: true,\n\t\tshowTipsDestination: false,\n\t\tshowTipPriority: false,\n\t\n\t\tdebugLabels: false,\n\t\tdebugLog: false,\n\t\n\t\t// theme               : {\n\t\t// \tname          : 'alternative_theme',\n\t\t// \tspriteTexture : true,\n\t\t//     textureSuits  : ['d', 'c', 'h', 's']\n\t\t// },\n\t\n\t\tthemes: {\n\t\t\tface: [\"default_face\", \"alternative_face\"],\n\t\t\tback: [\"default_back\", \"alternative_back\", \"red_back\", \"blue_back\"],\n\t\t\tempty: [\"default_empty\", \"alternative_empty\"]\n\t\t},\n\t\t// theme               : 'default_theme',\n\t\n\t\tanimation: true,\n\t\tanimationTime: 300, // ms.\n\t\n\t\t// actions : {\n\t\t// \ttwindeck : {\n\t\t// \t\tcardCount : 3\n\t\t// \t}\n\t\t// },\n\t\n\t\t// start_z_index       : 1,\n\t\tstartZIndex: 100,\n\t\ttopZIndex: 900,\n\t\n\t\tcanMoveFlip: false,\n\t\n\t\tafterStep: false,\n\t\n\t\ttipsParams: {\n\t\t\thideOnEmpty: false,\n\t\t\texcludeHomeGroups: true\n\t\t},\n\t\n\t\tinputParams: {\n\t\t\tdoubleClick: false\n\t\t},\n\t\n\t\tpref: {\n\t\t\tface: 0,\n\t\t\tback: 0,\n\t\t\tempty: 1\n\t\t}\n\t\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _tips = __webpack_require__(6);\n\t\n\tvar _tips2 = _interopRequireDefault(_tips);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// var drag_el = null;\n\t_share2.default.set('dragDeck', null);\n\t_share2.default.set('startCursor', null);\n\t\n\tvar _inputUndoRedo = function _inputUndoRedo() {\n\t\n\t    var _dragDeck = _share2.default.get('dragDeck');\n\t    if (_dragDeck && _dragDeck[0] && _dragDeck[0].card && _dragDeck[0].card.parent) {\n\t        var _deck = _addDeck2.default.getDeckById(_dragDeck[0].card.parent);\n\t        if (_deck) {\n\t            _deck.Redraw();\n\t        }\n\t    }\n\t\n\t    _share2.default.set('dragDeck', null);\n\t    _share2.default.set('startCursor', null);\n\t\n\t    _common2.default.curUnLock();\n\t};\n\t\n\t_event2.default.listen('undo', function () {\n\t    _inputUndoRedo();\n\t});\n\t\n\t_event2.default.listen('redo', function () {\n\t    _inputUndoRedo();\n\t});\n\t\n\t// -------------------------------------------------------------------------------------------------------------\n\t\n\tvar cdown = function cdown(target, x, y) {\n\t\n\t    _share2.default.set('dragDeck', null);\n\t    _share2.default.set('startCursor', null);\n\t\n\t    // var _startCursor = share.get('startCursor'),\n\t    // _dragDeck    = share.get('dragDeck');\n\t    // if(_dragDeck || _startCursor) return;\n\t\n\t    if (_common2.default.isCurLock()) {\n\t        return;\n\t    };\n\t\n\t    // if (target.className.split(' ').indexOf('animated') >= 0) {\n\t    //     return;\n\t    // }\n\t\n\t    if (target.className.split(' ').indexOf('slot') >= 0) {\n\t\n\t        var _id = target.id,\n\t            _deck = _common2.default.getElementById(_id);\n\t        if (_deck) {\n\t            _event2.default.dispatch('click', _deck);\n\t        }\n\t        // _deck.runActions();\n\t    }\n\t\n\t    if (target.className.split(' ').indexOf('draggable') >= 0) {\n\t\n\t        var _id = target.id,\n\t            _card = _id ? _common2.default.getElementById(_id) : null,\n\t            _parent = _card && _card.parent ? _card.parent : null,\n\t            _deck = _parent ? _addDeck2.default.getDeckById(_parent) : null;\n\t\n\t        if (_deck) {\n\t            _event2.default.dispatch('click', _deck);\n\t        }\n\t        // _deck.runActions();\n\t\n\t        // TODO\n\t        // в данной ситуации обрабатывается только клик по карте, пустые колоды никак не обрабатываются\n\t\n\t        var _dragDeck = _deck ? _deck.Take(_id) : null;\n\t\n\t        _share2.default.set('dragDeck', _dragDeck);\n\t\n\t        if (_share2.default.get('dragDeck')) {\n\t\n\t            _share2.default.set('startCursor', {\n\t                x: x,\n\t                y: y\n\t            });\n\t\n\t            // ???\n\t            _tips2.default.tipsDestination({ currentCard: _card });\n\t        }\n\t    }\n\t};\n\t\n\t// -------------------------------------------------------------------------------------------------------------\n\t\n\tvar cmove = function cmove(x, y) {\n\t\n\t    var _startCursor = _share2.default.get('startCursor'),\n\t        _dragDeck = _share2.default.get('dragDeck');\n\t\n\t    if (!_dragDeck || !_startCursor) return;\n\t\n\t    var _distance = _startCursor ? Math.sqrt(_common2.default.sqr(x - _startCursor.x) + _common2.default.sqr(y - _startCursor.y)) : 0;\n\t\n\t    var _deck = _common2.default.getElementById(_dragDeck[0].card.parent);\n\t\n\t    var _position = _deck.padding(_dragDeck[_dragDeck.length - 1].index);\n\t\n\t    _event2.default.dispatch('dragDeck', {\n\t        x: x, y: y,\n\t        _dragDeck: _dragDeck,\n\t        _startCursor: _startCursor,\n\t        _deck: _deck\n\t    });\n\t\n\t    var cursorMove = {\n\t        distance: _distance,\n\t        direction: {\n\t            x: x - _startCursor.x, // (+) rigth / (-) left\n\t            y: y - _startCursor.y, // (+) down  / (-) up\n\t            right: x > _startCursor.x,\n\t            left: x < _startCursor.x,\n\t            down: y > _startCursor.y,\n\t            up: y < _startCursor.y\n\t        },\n\t        lastPosition: {\n\t            x: x,\n\t            y: y\n\t        },\n\t        deckPosition: {\n\t            x: _position.x + (x - _startCursor.x),\n\t            y: _position.y + (y - _startCursor.y)\n\t        }\n\t    };\n\t\n\t    _tips2.default.tipsMove({\n\t        moveDeck: _dragDeck,\n\t        cursorMove: cursorMove\n\t    });\n\t};\n\t\n\t// -------------------------------------------------------------------------------------------------------------\n\t\n\tvar cend = function cend(target, x, y, dbclick) {\n\t\n\t    var _startCursor = _share2.default.get('startCursor'),\n\t        _dragDeck = _share2.default.get('dragDeck');\n\t\n\t    if (!_dragDeck || !_startCursor) return;\n\t\n\t    var _deck = _common2.default.getElementById(_dragDeck[0].card.parent);\n\t    var _position = _deck.padding(_dragDeck[0].index);\n\t    var cursorMove = {\n\t        distance: Math.sqrt(_common2.default.sqr(x - _startCursor.x) + _common2.default.sqr(y - _startCursor.y)),\n\t        dbclick: !!dbclick,\n\t        direction: {\n\t            x: x - _startCursor.x, // (+) rigth / (-) left\n\t            y: y - _startCursor.y, // (+) down  / (-) up\n\t            right: x > _startCursor.x,\n\t            left: x < _startCursor.x,\n\t            down: y > _startCursor.y,\n\t            up: y < _startCursor.y\n\t        },\n\t        lastPosition: {\n\t            x: x,\n\t            y: y\n\t        },\n\t        deckPosition: {\n\t            x: _position.x + (x - _startCursor.x),\n\t            y: _position.y + (y - _startCursor.y)\n\t        }\n\t    };\n\t\n\t    _event2.default.dispatch('hideCard', target);\n\t    var _dop = document.elementFromPoint(x, y);\n\t    _event2.default.dispatch('showCard', target);\n\t    // if(_dop) {\n\t\n\t    // Move(_dragDeck, _dop, cursorMove);\n\t    console.log('>>>>', dbclick);\n\t    _event2.default.dispatch('Move', {\n\t        moveDeck: _dragDeck,\n\t        to: _dop,\n\t        cursorMove: cursorMove\n\t    });\n\t    // }\n\t\n\t    // event.dispatch('redrawDeckIndexes', _deck);\n\t\n\t    _share2.default.set('dragDeck', null);\n\t    _share2.default.set('startCursor', null);\n\t};\n\t\n\t// -------------------------------------------------------------------------------------------------------------\n\t\n\tdocument.onmousedown = function (e) {\n\t    if (e.button != 0) return;\n\t    cdown(e.target, e.clientX, e.clientY);\n\t};\n\t\n\tdocument.onmousemove = function (e) {\n\t    cmove(e.clientX, e.clientY);\n\t};\n\t\n\tdocument.onmouseup = function (e) {\n\t    cend(e.target, e.clientX, e.clientY);\n\t};\n\t\n\tdocument.ondblclick = function (e) {\n\t    cdown(e.target, e.clientX, e.clientY);\n\t    cend(e.target, e.clientX, e.clientY, true);\n\t    _common2.default.curUnLock();\n\t};\n\t\n\tdocument.addEventListener('touchstart', function (e) {\n\t    // e.preventDefault()\n\t    cdown(e.target, e.touches[0].clientX, e.touches[0].clientY);\n\t}, false);\n\t\n\tdocument.addEventListener('touchmove', function (e) {\n\t    if (_share2.default.startCursor) e.preventDefault();\n\t    cmove(e.touches[0].clientX, e.touches[0].clientY);\n\t}, false);\n\t\n\tdocument.addEventListener('touchend', function (e) {\n\t    // e.preventDefault()\n\t    cend(e.changedTouches[0].target, e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n\t}, false);\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _tips = __webpack_require__(6);\n\t\n\tvar _tips2 = _interopRequireDefault(_tips);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tvar _drawPreferences = __webpack_require__(38);\n\t\n\tvar _drawPreferences2 = _interopRequireDefault(_drawPreferences);\n\t\n\tvar _preferencesEvents = __webpack_require__(40);\n\t\n\tvar _preferencesEvents2 = _interopRequireDefault(_preferencesEvents);\n\t\n\tvar _defaultPreferences = __webpack_require__(42);\n\t\n\tvar _defaultPreferences2 = _interopRequireDefault(_defaultPreferences);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar onInit = function onInit() {\n\t\t(0, _drawPreferences2.default)();\n\t\t(0, _preferencesEvents2.default)();\n\t};\n\t\n\tvar afterInit = function afterInit() {\n\t\t(0, _defaultPreferences2.default)();\n\t};\n\t\n\t// drawPreferences();\n\t\n\t// event.listen('makeStep', function(e) {\n\t// \t// ???\n\t// \tshare.saveStepCallback(e);\n\t\n\t// \tshare.set('oneStepWay', {});\n\t// });\n\t\n\t// event.listen('win', function(e) {\n\t// \tif(e && e.show) {\n\t// \t\t//  ????\n\t// \t\tshare.winCheckCallback(e);\n\t// \t}\n\t// });\n\t// event.listen('newGame', function(e) {\n\t// \tTips.checkTips();\n\t// });\n\t\n\t// Lock/Unlock\n\t\n\tvar sqr = function sqr(i) {\n\t\treturn i * i;\n\t};\n\t\n\tvar _lock = false;\n\t\n\tvar isLock = function isLock() {\n\t\treturn _lock;\n\t};\n\tvar lock = function lock() {\n\t\t_lock = true;\n\t};\n\t_event2.default.listen('lock', lock);\n\t\n\tvar unlock = function unlock() {\n\t\tlock = false;\n\t};\n\t_event2.default.listen('unlock', unlock);\n\t\n\tvar isCurLock = function isCurLock() {\n\t\treturn _share2.default.get('curLockState');\n\t};\n\t\n\tvar curLock = function curLock() {\n\t\t// console.log('curLock');\n\t\t_share2.default.set('curLockState', true);\n\t};\n\tvar curUnLock = function curUnLock() {\n\t\t// console.log('curUnLock');\n\t\t_share2.default.set('curLockState', false);\n\t};\n\t\n\t// getters\n\t\n\tvar getElements = function getElements() {\n\t\treturn _share2.default.get('elements');\n\t};\n\t\n\tvar getElementById = function getElementById(a) {\n\t\tvar _elements = _share2.default.get('elements');\n\t\treturn _elements[a];\n\t};\n\t\n\tvar getElementsByName = function getElementsByName(name, type) {\n\t\tvar response = [];\n\t\tvar _elements = _share2.default.get('elements');\n\t\tfor (var i in _elements) {\n\t\t\tif (_elements[i].name && typeof _elements[i].name == 'string' && _elements[i].name == name) {\n\t\t\t\tif (type && typeof _elements[i].type == 'string') {\n\t\t\t\t\tif (type && _elements[i].type == type) {\n\t\t\t\t\t\tresponse.push(_elements[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresponse.push(_elements[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresponse.push(_elements[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn response;\n\t};\n\t\n\t// validator\n\t\n\tvar validateCardName = function validateCardName(name, nolog) {\n\t\n\t\tif (typeof name != 'string') {\n\t\t\tconsole.warn('Warning: validate name must have string type', name);\n\t\t\t// throw new Error('z');\n\t\t\treturn false;\n\t\t}\n\t\n\t\tvar suit = name.slice(0, 1),\n\t\t    rank = name.slice(1, 3),\n\t\t    color = null,\n\t\t    value = _defaults2.default.card.values[_defaults2.default.card.ranks.indexOf(rank)];\n\t\tfor (var colorName in _defaults2.default.card.colors) {\n\t\t\tif (_defaults2.default.card.colors[colorName].indexOf(suit) >= 0) {\n\t\t\t\tcolor = colorName;\n\t\t\t}\n\t\t}\n\t\n\t\tif (_defaults2.default.card.suits.indexOf(suit) >= 0 && _defaults2.default.card.ranks.indexOf(rank) >= 0) {\n\t\t\treturn {\n\t\t\t\tsuit: suit,\n\t\t\t\trank: rank,\n\t\t\t\tcolor: color,\n\t\t\t\tvalue: value\n\t\t\t};\n\t\t} else {\n\t\t\tconsole.warn('Warning: validate name:', name, '- incorrect');\n\t\t\t// throw new Error();\n\t\t\treturn false;\n\t\t}\n\t};\n\t\n\t// ID generator\n\t\n\tvar _id = 0,\n\t    genId = function genId() {\n\t\treturn _id++;\n\t};\n\t\n\t_share2.default.set('animation', _defaults2.default.animation);\n\t\n\tvar animationOn = function animationOn() {\n\t\t_share2.default.set('animation', true);\n\t};\n\t\n\tvar animationDefault = function animationDefault() {\n\t\t_share2.default.set('animation', _defaults2.default.animation);\n\t};\n\t\n\tvar animationOff = function animationOff() {\n\t\t_share2.default.set('animation', false);\n\t};\n\t\n\t_event2.default.listen('newGame', function (e) {\n\t\t// TODO\n\t\t// из-за отключения анимации\n\t\t// на время восстановления ходов из истории приходится костылять\n\t\t// и везде где нужна анимация ставить common.animationDefault();\n\t\t// надо исправить когда из истории можно будет получить\n\t\t// не только историю ходов\n\t\tanimationOff();\n\t});\n\t\n\t_event2.default.listen('historyReapeater', function (e) {\n\t\tif (e) {\n\t\t\t_share2.default.set('noRedraw', true);\n\t\t\t_share2.default.set('noTips', true);\n\t\t} else {\n\t\t\t_share2.default.set('noRedraw', false);\n\t\t\tvar _field = (0, _field3.default)();\n\t\t\t_field.Redraw();\n\t\t\t_share2.default.set('noTips', false);\n\t\t\t_tips2.default.checkTips();\n\t\t}\n\t});\n\t\n\t// event.listen('makeStep', function(e) {\n\t// share.set('animation', defaults.animation);\n\t// });\n\t\n\texports.default = {\n\t\tisLock: isLock,\n\t\tlock: lock,\n\t\tunlock: unlock,\n\t\tisCurLock: isCurLock,\n\t\tcurLock: curLock,\n\t\tcurUnLock: curUnLock,\n\t\tgetElements: getElements,\n\t\tgetElementById: getElementById,\n\t\tgetElementsByName: getElementsByName,\n\t\tvalidateCardName: validateCardName,\n\t\tgenId: genId,\n\t\tanimationOn: animationOn,\n\t\tanimationOff: animationOff,\n\t\tanimationDefault: animationDefault,\n\t\tonInit: onInit,\n\t\tafterInit: afterInit,\n\t\tsqr: sqr\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _tipsRules = __webpack_require__(7);\n\t\n\tvar _tipsRules2 = _interopRequireDefault(_tipsRules);\n\t\n\tvar _bestTip = __webpack_require__(8);\n\t\n\tvar _bestTip2 = _interopRequireDefault(_bestTip);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _showTips = _defaults2.default.showTips;\n\t\n\tvar tipTypes = ['tip', 'tipTo', 'tipPriority', 'tipToHome'];\n\t\n\tvar _tips = [];\n\t\n\tvar getTips = function getTips() {\n\t\treturn _tips;\n\t};\n\t\n\tvar checkTips = function checkTips() {\n\t\n\t\tif (_share2.default.get('noTips')) {\n\t\t\treturn false;\n\t\t};\n\t\n\t\t// console.log('%cCHECK TIPS', 'background : green');\n\t\n\t\t_event2.default.dispatch('hideTips');\n\t\n\t\tvar _decks = _addDeck2.default.getDecks({ visible: true });\n\t\n\t\tvar _autoTipsName = _share2.default.get('autoTips');\n\t\tvar _autoTips = _tipsRules2.default[_autoTipsName];\n\t\n\t\tif (typeof _autoTips == 'function') {\n\t\t\t_tips = _autoTips({\n\t\t\t\tdecks: _decks\n\t\t\t});\n\t\t} else {\n\t\t\tfor (i in _share2.default.autoTips) {\n\t\t\t\tif (typeof _share2.default.autoTips[i] == 'function') {\n\t\t\t\t\t_tips = _tips.concat(autoTips[i]({\n\t\t\t\t\t\tdecks: _decks\n\t\t\t\t\t}));\n\t\t\t\t} else {\n\t\t\t\t\tif (_tipsRules2.default[i]) {\n\t\t\t\t\t\t_tips = _tips.concat(_tipsRules2.default[i]({\n\t\t\t\t\t\t\tdecks: _decks,\n\t\t\t\t\t\t\trules: _share2.default.autoTips[i]\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// var _showTips = share.get('showTips')\n\t\tif (_showTips) {\n\t\n\t\t\tvar _field = (0, _field3.default)();\n\t\t\tvar _homeGroups = _field.homeGroups;\n\t\n\t\t\t// console.log(_tips, _field);\n\t\n\t\t\tfor (var i in _tips) {\n\t\n\t\t\t\t// TODO инициализировать \"hideTipsInDom\" в Field.js\n\t\t\t\tif (_tips[i].to.count == 0 && _field.tipsParams.hideOnEmpty || _field.tipsParams.excludeHomeGroups && _homeGroups && _homeGroups.length && _homeGroups.indexOf(_tips[i].from.deck.parent) >= 0) {\n\t\t\t\t\t// ?#$%&!\n\t\t\t\t} else {\n\t\n\t\t\t\t\t\t_event2.default.dispatch('showTip', {\n\t\t\t\t\t\t\tel: _tips[i].from.card,\n\t\t\t\t\t\t\ttype: 'tip'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\n\t\t\t\tif (_homeGroups.indexOf(_tips[i].to.deck.parent) >= 0) {\n\t\t\t\t\t_event2.default.dispatch('showTip', {\n\t\t\t\t\t\tel: _tips[i].from.card,\n\t\t\t\t\t\ttype: 'tipToHome'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// console.log('Tips:', _tips);\n\t};\n\t_event2.default.listen('makeStep', checkTips);\n\t\n\t// --------------------------------------------------------\n\t\n\tvar showTips = function showTips(a) {\n\t\t_showTips = true;\n\t\tif (a && a.init) return;\n\t\tcheckTips();\n\t};\n\t_event2.default.listen('tipsON', showTips);\n\t\n\tvar hideTips = function hideTips(a) {\n\t\t_showTips = false;\n\t\tif (a && a.init) return;\n\t\tcheckTips();\n\t};\n\t_event2.default.listen('tipsOFF', hideTips);\n\t\n\t// --------------------------------------------------------\n\t\n\tvar tipsMove = function tipsMove(a) {\n\t\n\t\tif (!_share2.default.showTipPriority) return;\n\t\n\t\t_event2.default.dispatch('hideTips', { types: ['tipPriority'] });\n\t\n\t\tif (_share2.default.showTipPriority && a && a.moveDeck && a.cursorMove && a.cursorMove.distance && a.cursorMove.distance >= _share2.default.moveDistance) {\n\t\n\t\t\tvar Tip = (0, _bestTip2.default)(a.moveDeck, a.cursorMove);\n\t\n\t\t\tif (Tip) {\n\t\n\t\t\t\t_event2.default.dispatch('showTip', { el: Tip.to.deck, type: 'tipPriority' });\n\t\t\t}\n\t\t}\n\t};\n\t\n\t// --------------------------------------------------------\n\t\n\tvar tipsDestination = function tipsDestination(a) {\n\t\n\t\tif (_share2.default.get('showTipsDestination')) {\n\t\n\t\t\t_event2.default.dispatch('hideTips');\n\t\n\t\t\tif (a && a.currentCard && a.currentCard.id) {\n\t\t\t\tfor (var i in _tips) {\n\t\t\t\t\tif (_tips[i].from.card.id == a.currentCard.id) {\n\t\n\t\t\t\t\t\t_event2.default.dispatch('showTip', {\n\t\t\t\t\t\t\t'el': _tips[i].to.deck,\n\t\t\t\t\t\t\t'type': 'tipTo'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\texports.default = {\n\t\ttipTypes: tipTypes,\n\t\tgetTips: getTips,\n\t\tcheckTips: checkTips,\n\t\tshowTips: showTips,\n\t\thideTips: hideTips,\n\t\ttipsMove: tipsMove,\n\t\ttipsDestination: tipsDestination\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = {\n\t\n\t\tallToAll: function allToAll(a) {\n\t\n\t\t\tvar _moves = [];\n\t\n\t\t\tvar put = function put(deckIndex_2, deckIndex, cardIndex, _cards) {\n\t\n\t\t\t\tvar _cards_to = a.decks[deckIndex_2].cards,\n\t\t\t\t    _card_to = _cards_to.length ? _cards_to[_cards_to.length - 1] : null;\n\t\t\t\t_moves.push({\n\t\t\t\t\tfrom: {\n\t\t\t\t\t\tdeck: a.decks[deckIndex],\n\t\t\t\t\t\tcard: _cards[cardIndex], //firstCard of moved deck\n\t\t\t\t\t\tcount: _cards.length\n\t\t\t\t\t\t// deckName : a.decks[deckIndex].name\n\t\t\t\t\t},\n\t\t\t\t\tto: {\n\t\t\t\t\t\tdeck: a.decks[deckIndex_2],\n\t\t\t\t\t\tlastCard: _card_to,\n\t\t\t\t\t\tcount: _cards_to.length\n\t\t\t\t\t\t// deckName : a.decks[deckIndex_2].name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\n\t\t\tvar decksToPut = function decksToPut(_cards, _take, deckIndex, cardIndex) {\n\t\n\t\t\t\tfor (var deckIndex_2 in a.decks) {\n\t\t\t\t\t// ...all without current\n\t\t\t\t\tif (deckIndex != deckIndex_2) {\n\t\n\t\t\t\t\t\tvar _put = a.decks[deckIndex_2].Put(_take);\n\t\t\t\t\t\tif (_put) {\n\t\t\t\t\t\t\tput(deckIndex_2, deckIndex, cardIndex, _cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tvar cardsInTakeDeck = function cardsInTakeDeck(_cards) {\n\t\n\t\t\t\tfor (var cardIndex in _cards) {\n\t\t\t\t\tvar _id = _cards[cardIndex].id;\n\t\t\t\t\t// check can take this card/deck\n\t\t\t\t\tvar _take = a.decks[deckIndex].Take(_id);\n\t\t\t\t\tif (_take) {\n\t\t\t\t\t\t// check put taked card/deck iinto another decks\n\t\t\t\t\t\tdecksToPut(_cards, _take, deckIndex, cardIndex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\t// console.log('%cTIPS', 'color : red; font-size : 30pt; font-weigth : bold;', 'allToAll', a);\n\t\n\t\t\t// each decks\n\t\t\tfor (var deckIndex in a.decks) {\n\t\t\t\tvar _cards = a.decks[deckIndex].cards;\n\t\t\t\t// each cards in  current deck\n\t\t\t\tcardsInTakeDeck(_cards);\n\t\t\t}\n\t\t\treturn _moves;\n\t\t}\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (moveDeck, cursorMove) {\n\t\n\t\tvar _autoTips = [];\n\t\tvar _tips = _tips3.default.getTips();\n\t\tfor (i in _tips) {\n\t\t\tif (_tips[i].from.card.id == moveDeck[0].card.id) {\n\t\t\t\t_autoTips.push(_tips[i]);\n\t\t\t}\n\t\t}\n\t\n\t\tif (_autoTips.length == 0) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// move card to closest deck of a possible move\n\t\tvar _min_distance = -1,\n\t\t    _tip_index = 0,\n\t\t    _in_direction_count = 0;\n\t\n\t\tvar _field = (0, _field3.default)();\n\t\tvar _homeGroups = _field.homeGroups;\n\t\n\t\tif (_homeGroups) {\n\t\t\tvar _tips = [];\n\t\t\tfor (var i in _homeGroups) {\n\t\t\t\tfor (var t in _autoTips) {\n\t\t\t\t\tif (_autoTips[t].to.deck.parent == _homeGroups[i]) {\n\t\t\t\t\t\t_tips.push(_autoTips[t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (_tips.length) _autoTips = _tips;\n\t\t}\n\t\n\t\tif (_autoTips.length >= 2) {\n\t\n\t\t\tfor (var i in _autoTips) {\n\t\n\t\t\t\tvar center_from = {\n\t\t\t\t\tx: cursorMove.deckPosition.x + _defaults2.default.card.width,\n\t\t\t\t\ty: cursorMove.deckPosition.y + _defaults2.default.card.height\n\t\t\t\t};\n\t\n\t\t\t\tvar _destination_deck_last_card_position = _autoTips[i].to.deck.padding(_autoTips[i].to.deck.cards.length);\n\t\t\t\tvar center_to = {\n\t\t\t\t\tx: _destination_deck_last_card_position.x + _defaults2.default.card.width,\n\t\t\t\t\ty: _destination_deck_last_card_position.y + _defaults2.default.card.height\n\t\t\t\t};\n\t\n\t\t\t\t_autoTips[i].distance = Math.sqrt(_common2.default.sqr(center_from.x - center_to.x) + _common2.default.sqr(center_from.y - center_to.y));\n\t\t\t\t_autoTips[i].inDirection = false;\n\t\t\t\tif (cursorMove.direction.x > 0 && center_to.x > center_from.x || cursorMove.direction.x < 0 && center_to.x < center_from.x) {\n\t\t\t\t\t_autoTips[i].inDirection = true;\n\t\t\t\t\t_in_direction_count += 1;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (var i in _autoTips) {\n\t\n\t\t\t\tif (_min_distance == '-1') {\n\t\t\t\t\tif (_in_direction_count == 0) {\n\t\t\t\t\t\t_min_distance = _autoTips[i].distance;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (_autoTips[i].inDirection) {\n\t\t\t\t\t\t\t_min_distance = _autoTips[i].distance;\n\t\t\t\t\t\t\t_tip_index = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (_autoTips[i].distance < _min_distance) {\n\t\t\t\t\tif (_in_direction_count == 0) {\n\t\t\t\t\t\t_min_distance = _autoTips[i].distance;\n\t\t\t\t\t\t_tip_index = i;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (_autoTips[i].inDirection) {\n\t\t\t\t\t\t\t_min_distance = _autoTips[i].distance;\n\t\t\t\t\t\t\t_tip_index = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn _autoTips[_tip_index];\n\t};\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _tips2 = __webpack_require__(6);\n\t\n\tvar _tips3 = _interopRequireDefault(_tips2);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// module.exports = function(main, share) {\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _addGroup = __webpack_require__(10);\n\t\n\tvar _addGroup2 = _interopRequireDefault(_addGroup);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _tips = __webpack_require__(6);\n\t\n\tvar _tips2 = _interopRequireDefault(_tips);\n\t\n\tvar _tipsRules = __webpack_require__(7);\n\t\n\tvar _tipsRules2 = _interopRequireDefault(_tipsRules);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _field = null;\n\t// _params = {},\n\t// _elements = {};\n\t\n\tvar Field = function Field(data) {\n\t\n\t\t// window.currentVersion = '0.11';\n\t\n\t\t// TODO избавиться от share.field и вообще от share ?\n\t\t// console.log('FIELD', data, _field);\t\n\t\n\t\t// if(!data && share.field) {\n\t\t// \treturn share.field;\n\t\t// }\n\t\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\t_common2.default.unlock();\n\t\n\t\tif (data && _field) {\n\t\n\t\t\t// console.log('CLEAR');\n\t\n\t\t\t_field.clear();\n\t\t} else {\n\t\t\t_share2.default.set('elements', {});\n\t\t}\n\t\n\t\tvar a = null;\n\t\ttry {\n\t\t\t// BABEL BUG\n\t\t\t// a = JSON.parse(JSON.stringify(data));\n\t\t\ta = Object['assign'] ? Object['assign']({}, data) : JSON.parse(JSON.stringify(data));\n\t\t\t// a = _.clone(data);\n\t\t} catch (e) {\n\t\t\ta = data;\n\t\t\tconsole.warn('Field input params is not JSON, maybe the rules are wrong.');\n\t\t\t// 'zxczxc';\n\t\t\t// console.log(JSON.parse(JSON.stringify(data)));\n\t\t\t// console.log(data);\n\t\t}\n\t\n\t\t// share.set(\n\t\t// \t'spriteTexture',\n\t\t// \ttypeof a.theme == 'object'\n\t\t// \t\t? a       .theme.spriteTexture\n\t\t// \t\t: defaults.theme.spriteTexture\n\t\t// );\n\t\n\t\t// share.set(\n\t\t// \t'textureSuits',\n\t\t// \ttypeof a.theme == 'object'\n\t\t// \t\t? a       .theme.textureSuits\n\t\t// \t\t: defaults.theme.textureSuits\n\t\t// );\n\t\n\t\tthis.homeGroups = a.homeGroups ? a.homeGroups : [];\n\t\n\t\t_share2.default.set('debugLog', a.debugLog && typeof a.debugLog == 'boolean' ? a.debugLog : _defaults2.default.debugLog);\n\t\n\t\t// Tips\n\t\n\t\tif (typeof a.showTips == 'boolean' && a.showTips) {\n\t\t\t_tips2.default.showTips({ init: true });\n\t\t} else {\n\t\t\t_tips2.default.hideTips({ init: true });\n\t\t}\n\t\n\t\t// console.log('SHOW TIPS:', share.get('showTips'));\n\t\n\t\t_share2.default.set('showTipsDestination', typeof a.showTipsDestination == 'boolean' ? a.showTipsDestination : _defaults2.default.showTipsDestination);\n\t\t_share2.default.set('showTipPriority', typeof a.showTipPriority == 'boolean' ? a.showTipPriority : _defaults2.default.showTipPriority);\n\t\n\t\tvar _autoTips = a.autoTips ? typeof a.autoTips == 'string' ? _tipsRules2.default[a.autoTips] ? a.autoTips // tipsRules[a.autoTips]\n\t\t: _defaults2.default.tipRule // tipsRules[defaults.tipRule]\n\t\t: _defaults2.default.tipRule // a.autoTips //function OR object\n\t\t: _defaults2.default.tipRule; //tipsRules[defaults.tipRule]\n\t\n\t\t_share2.default.set('autoTips', _autoTips);\n\t\n\t\t// console.log('set autoTips', _autoTips)\n\t\n\t\t_share2.default.set('moveDistance', a.moveDistance && typeof a.moveDistance == 'number' ? a.moveDistance : _defaults2.default.moveDistance);\n\t\n\t\t// check Win\n\t\n\t\t_share2.default.set('winCheck', a.winCheck);\n\t\n\t\tif (a.winCheck && a.winCheck.callback && typeof a.winCheck.callback == 'function') {\n\t\t\twinCheckCallback = a.winCheck.callback;\n\t\t}\n\t\n\t\t// extension: winCheckMethods\n\t\n\t\tif (a.saveStep && typeof a.saveStep == 'function') {\n\t\t\t// console.log('a.saveStep', a.saveStep);\n\t\t\tsaveStepCallback = a.saveStep;\n\t\t}\n\t\n\t\t// parameters and values\n\t\n\t\t_share2.default.set('zoom', a.zoom && typeof a.zoom == 'number' ? a.zoom : _defaults2.default.zoom);\n\t\n\t\tthis.tipsParams = {};\n\t\n\t\tfor (var tipParamName in _defaults2.default.tipsParams) {\n\t\t\tthis.tipsParams[tipParamName] = a.tipsParams && typeof a.tipsParams[tipParamName] != \"undefined\" ? a.tipsParams[tipParamName] : _defaults2.default.tipsParams[tipParamName];\n\t\t}\n\t\n\t\tthis.inputParams = {};\n\t\tfor (var inputParamName in _defaults2.default.inputParams) {\n\t\t\tthis.inputParams[inputParamName] = a.inputParams && typeof a.inputParams[inputParamName] != \"undefined\" ? a.inputParams[inputParamName] : _defaults2.default.inputParams[inputParamName];\n\t\t}\n\t\n\t\t// var _animation = typeof a.animation == 'boolean'\n\t\t// \t? a.animation\n\t\t// \t: defaults.animation;\n\t\t// this.animation = _animation;\n\t\t// share.set('animation', _animation);\n\t\n\t\tvar _can_move_flip = a.can_move_flip && typeof a.can_move_flip == 'boolean' ? a.can_move_flip : _defaults2.default.canMoveFlip;\n\t\t_share2.default.set('can_move_flip', _can_move_flip);\n\t\n\t\t_share2.default.set('debugLabels', a.debugLabels && typeof a.debugLabels == 'boolean' ? a.debugLabels : _defaults2.default.debugLabels);\n\t\n\t\tthis.Draw = function (data) {\n\t\n\t\t\t_share2.default.set('noRedraw', true);\n\t\n\t\t\tif (data) {\n\t\t\t\ta = Object['assign'] ? Object['assign']({}, data) : JSON.parse(JSON.stringify(data));\n\t\t\t}\n\t\n\t\t\tif (!a) return;\n\t\n\t\t\t// console.log('draw all');\t\t\n\t\n\t\t\tif (a.groups) {\n\t\t\t\tfor (var groupName in a.groups) {\n\t\t\t\t\ta.groups[groupName].name = groupName;\n\t\t\t\t\t_addGroup2.default.addGroup(a.groups[groupName]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (a.decks) {\n\t\t\t\tfor (var e in a.decks) {\n\t\t\t\t\t_addDeck2.default.addDeck(a.decks[e]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// fill elements in field\n\t\t\tif (a.fill) {\n\t\n\t\t\t\tvar _decks = _addDeck2.default.getDecks(),\n\t\t\t\t    _fill = Object['assign'] ? Object['assign']([], a.fill) : JSON.parse(JSON.stringify(a.fill));\n\t\n\t\t\t\tfor (; _fill.length;) {\n\t\t\t\t\tfor (var deckId in _decks) {\n\t\t\t\t\t\tif (_fill.length) {\n\t\t\t\t\t\t\tvar _card = _fill.shift();\n\t\t\t\t\t\t\t_decks[deckId].Fill([_card]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t_share2.default.set('noRedraw', false);\n\t\t\tthis.Redraw();\n\t\n\t\t\t_tips2.default.checkTips();\n\t\n\t\t\t_event2.default.dispatch('newGame');\n\t\t\t_common2.default.unlock();\n\t\t};\n\t\n\t\t// checkTips()\n\t\n\t\tif (a.startZIndex && typeof a.startZIndex == 'number') {\n\t\t\t_share2.default.set('start_z_index', a.startZIndex);\n\t\t}\n\t};\n\t\n\tField.prototype.clear = function () {\n\t\n\t\t// console.log('clear field', share);\n\t\n\t\tvar _elements = _share2.default.get('elements');\n\t\tfor (var i in _elements) {\n\t\t\t// console.log(elements[i]);\n\t\t\tif (_elements[i].type == 'deck') {\n\t\t\t\t_elements[i].clear();\n\t\t\t\t_elements[i] = null;\n\t\t\t} else if (_elements[i].type == 'group') {\n\t\t\t\t_elements[i] = null;\n\t\t\t}\n\t\t}\n\t\t_share2.default.set('elements', {});\n\t};\n\t\n\tField.prototype.Redraw = function (data) {\n\t\n\t\t// console.log('redraw field', data);\n\t\n\t\tvar a = null;\n\t\n\t\tif (data) {\n\t\n\t\t\ttry {\n\t\t\t\t// BABEL BUG\n\t\t\t\t// a = JSON.parse(JSON.stringify(data));\n\t\t\t\ta = Object['assign'] ? Object['assign']({}, data) : JSON.parse(JSON.stringify(data));\n\t\t\t\t// a = _.clone(data);\n\t\t\t\t// var g =  Object.assign({}, {});\n\t\t\t} catch (e) {\n\t\t\t\ta = data;\n\t\t\t\tconsole.warn('Field.Redraw input params is not JSON, can\\'t clone');\n\t\t\t}\n\t\n\t\t\tfor (var _groupName in a.groups) {\n\t\n\t\t\t\t// console.log('redraw group:', _groupName);\n\t\n\t\t\t\tvar _group = _addGroup2.default.Group(_groupName);\n\t\t\t\tif (_group) {\n\t\t\t\t\t_group.Redraw(a.groups[_groupName]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (var i in a.decks) {\n\t\n\t\t\t\t// console.log('redraw deck:', a.decks[i].name);\n\t\n\t\t\t\tvar _deck = _addDeck2.default.Deck(a.decks[i].name);\n\t\t\t\tif (_deck) {\n\t\t\t\t\t_deck.Redraw(a.decks[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar _decks = _addDeck2.default.getDecks();\n\t\t\tfor (var i in _decks) {\n\t\t\t\t_decks[i].Redraw();\n\t\t\t}\n\t\t}\n\t};\n\t\n\tvar _fieldExport = function _fieldExport(data) {\n\t\n\t\tif (data && _field) {\n\t\t\t// TODO THIS\n\t\n\t\t\t_field.clear();\n\t\t\t_field.Draw(data);\n\t\t}\n\t\n\t\tif (data && !_field) {\n\t\n\t\t\t_field = new Field(data);\n\t\t\t_event2.default.dispatch('initField', { a: data });\n\t\t\t_field.Draw();\n\t\t};\n\t\n\t\t// this = _field\n\t\treturn _field;\n\t};\n\t\n\t// _fieldExport.prototype.Redraw = function() {\n\t// \t_field.Redraw();\n\t// };\n\t\n\texports.default = _fieldExport;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _groupFill = __webpack_require__(33);\n\t\n\tvar _groupFill2 = _interopRequireDefault(_groupFill);\n\t\n\tvar _groupRedraw = __webpack_require__(34);\n\t\n\tvar _groupRedraw2 = _interopRequireDefault(_groupRedraw);\n\t\n\tvar _groupGenerator = __webpack_require__(35);\n\t\n\tvar _groupGenerator2 = _interopRequireDefault(_groupGenerator);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar groupConstructor = function groupConstructor(a, _id) {\n\t\n\t\tthis.type = 'group';\n\t\n\t\tvar id = _id;\n\t\n\t\tthis.getId = function () {\n\t\t\treturn id;\n\t\t};\n\t\n\t\tthis.name = a.name && typeof a.name == 'string' ? a.name : 'name_' + id;\n\t\n\t\tthis.position = {\n\t\t\tx: a.position && a.position.x && typeof a.position.x == 'number' ? a.position.x : 0,\n\t\t\ty: a.position && a.position.y && typeof a.position.y == 'number' ? a.position.y : 0\n\t\t};\n\t\n\t\tthis.placement = a.placement ? {\n\t\t\tx: a.placement.x ? a.placement.x : 0,\n\t\t\ty: a.placement.y ? a.placement.y : 0\n\t\t} : null;\n\t\n\t\tthis.decks = {};\n\t\n\t\t// сохраняем атрибуты чтобы прокинуть их колодам\n\t\tthis.parameters = {\n\t\t\tpaddingType: a.paddingType ? a.paddingType : _defaults2.default.paddingType,\n\t\t\tflip: a.flip ? a.flip : null,\n\t\t\t// take         : a.take         ? a.take         : null               ,// ???\n\t\t\tshowSlot: a.showSlot ? a.showSlot : _defaults2.default.showSlot,\n\t\t\ttakeRules: a.takeRules ? a.takeRules : _defaults2.default.takeRules,\n\t\t\tputRules: a.putRules ? a.putRules : _defaults2.default.putRules,\n\t\t\tfillRule: a.fillRule ? a.fillRule : _defaults2.default.fillRule,\n\t\t\tautoHide: a.autoHide ? a.autoHide : _defaults2.default.autoHide,\n\t\n\t\t\tpaddingX: a.paddingX ? a.paddingX : _defaults2.default.paddingX,\n\t\t\tpaddingY: a.paddingY ? a.paddingY : _defaults2.default.paddingY,\n\t\t\tflipPaddingX: a.flipPaddingX ? a.flipPaddingX : _defaults2.default.flipPaddingX,\n\t\t\tflipPaddingY: a.flipPaddingY ? a.flipPaddingY : _defaults2.default.flipPaddingY,\n\t\n\t\t\tactions: a.actions ? a.actions : null,\n\t\n\t\t\tafterStep: typeof a.afterStep == \"boolean\" ? a.afterStep : _defaults2.default.afterStep\n\t\t};\n\t\n\t\t// console.log('AFTERSTEP#1', this.name, typeof a.afterStep, a.afterStep, defaults.afterStep, this.parameters.afterStep)\n\t\n\t\tthis.deckIndex = [];\n\t};\n\t\n\t// --------------------------------------------------------------------\n\t\n\t// Add deck to group\n\tgroupConstructor.prototype.addDeck = function (a) {\n\t\n\t\tif (!a) return;\n\t\tif (!a.position) {\n\t\t\ta.position = {\n\t\t\t\t'x': 0,\n\t\t\t\t'y': 0\n\t\t\t};\n\t\t}\n\t\n\t\t// сортировка элементов в группе по заданному индексу и порядку добавления\n\t\n\t\t// if(!a.position.x) { a.position.x = 0; }\n\t\t// if(!a.position.y) { a.position.y = 0; }\n\t\n\t\tif (!a.parent) a.parent = this.name;\n\t\n\t\ta.parentPosition = {\n\t\t\tx: this.position.x,\n\t\t\ty: this.position.y\n\t\t};\n\t\n\t\t// расставляем колоды в группе\n\t\t// 1 приоретет отдаётся параметру groupIndex\n\t\t// остальные вставляются в промежутки или добавляются в конец\n\t\tvar _index = 0;\n\t\n\t\tif (a.groupIndex && typeof a.groupIndex == 'number' && this.deckIndex[a.groupIndex - 1] && decks[this.deckIndex[a.groupIndex - 1]].this.deckIndex == a.this.deckIndex) {\n\t\t\tconsole.warn('Warning: duplicate groupIndex', a.groupIndex, 'changed to null');\n\t\t\ta.groupIndex = null;\n\t\t}\n\t\n\t\tif (a.groupIndex && typeof a.groupIndex == 'number') {\n\t\n\t\t\tif (this.deckIndex[a.groupIndex - 1]) {\n\t\n\t\t\t\tfor (; typeof this.deckIndex[_index] != 'undefined'; _index += 1) {}\n\t\n\t\t\t\tif (placement) {\n\t\t\t\t\tvar _index = this.deckIndex[a.groupIndex - 1];\n\t\t\t\t\tvar _elements = _share2.default.get('elements');\n\t\t\t\t\tif (placement.x) {\n\t\t\t\t\t\t_elements[_index].x(this.position.x + (placement.x + _defaults2.default.card.width) * _index);\n\t\t\t\t\t}\n\t\t\t\t\tif (placement.y) {\n\t\t\t\t\t\t_elements[_index].y(this.position.y + (placement.y + _defaults2.default.card.width) * _index);\n\t\t\t\t\t}\n\t\t\t\t\t_share2.default.set('elements', _elements);\n\t\t\t\t}\n\t\n\t\t\t\tthis.deckIndex[_index] = this.deckIndex[a.groupIndex - 1];\n\t\t\t\tthis.deckIndex[a.groupIndex - 1] = true;\n\t\t\t\t_index = a.groupIndex - 1;\n\t\t\t} else {\n\t\n\t\t\t\tthis.deckIndex[a.groupIndex - 1] = true;\n\t\t\t\t_index = a.groupIndex - 1;\n\t\t\t}\n\t\t} else {\n\t\t\t// console.log('РАССТАВКА КОЛОД', this.deckIndex);\n\t\t\tfor (; typeof this.deckIndex[_index] != 'undefined'; _index += 1) {};\n\t\t\tthis.deckIndex[_index] = true;\n\t\t}\n\t\n\t\t// смещаем координаты колод относиткльно координад группы\n\t\tif (this.placement) {\n\t\n\t\t\tif (this.placement.x) {\n\t\t\t\ta.position.x = (this.placement.x + _defaults2.default.card.width) * _index;\n\t\t\t}\n\t\t\tif (this.placement.y) {\n\t\t\t\ta.position.y = (this.placement.y + _defaults2.default.card.height) * _index;\n\t\t\t}\n\t\t}\n\t\n\t\t// прокидываем некоторые атрибуты всем колодам группы (у атрибутов заданных колоде приоритет выше)\n\t\tif (this.parameters.paddingType && typeof a.paddingType == \"undefined\") {\n\t\t\ta.paddingType = this.parameters.paddingType;\n\t\t};\n\t\tif (this.parameters.flip && typeof a.flip == \"undefined\") {\n\t\t\ta.flip = this.parameters.flip;\n\t\t};\n\t\t// if( this.parameters.take      && typeof a.take         == \"undefined\" ) { a.take         = this.parameters.take;         };\n\t\tif (this.parameters.showSlot && typeof a.showSlot == \"undefined\") {\n\t\t\ta.showSlot = this.parameters.showSlot;\n\t\t};\n\t\tif (this.parameters.takeRules && typeof a.takeRules == \"undefined\") {\n\t\t\ta.takeRules = this.parameters.takeRules;\n\t\t};\n\t\tif (this.parameters.putRules && typeof a.putRules == \"undefined\") {\n\t\t\ta.putRules = this.parameters.putRules;\n\t\t};\n\t\tif (this.parameters.fillRule && typeof a.fillRule == \"undefined\") {\n\t\t\ta.fillRule = this.parameters.fillRule;\n\t\t};\n\t\tif (this.parameters.autoHide && typeof a.autoHide == \"undefined\") {\n\t\t\ta.autoHide = this.parameters.autoHide;\n\t\t};\n\t\t// changed\n\t\tif (this.parameters.paddingX && typeof a.paddingX == \"undefined\") {\n\t\t\ta.paddingX = this.parameters.paddingX;\n\t\t};\n\t\tif (this.parameters.paddingY && typeof a.paddingY == \"undefined\") {\n\t\t\ta.paddingY = this.parameters.paddingY;\n\t\t};\n\t\tif (this.parameters.flipPaddingX && typeof a.flipPaddingX == \"undefined\") {\n\t\t\ta.flipPaddingX = this.parameters.flipPaddingX;\n\t\t};\n\t\tif (this.parameters.flipPaddingY && typeof a.flipPaddingY == \"undefined\") {\n\t\t\ta.flipPaddingY = this.parameters.flipPaddingY;\n\t\t};\n\t\n\t\tif (this.parameters.actions && typeof a.actions == \"undefined\") {\n\t\t\ta.actions = this.parameters.actions;\n\t\t};\n\t\n\t\tif (typeof a.afterStep == \"undefined\") {\n\t\t\ta.afterStep = this.parameters.afterStep;\n\t\t};\n\t\n\t\t// console.log('AFTERSTEP#2', this.name, a.afterStep, this.parameters.afterStep)\n\t\n\t\t// console.log('%cGroup:addDeck->', 'background : red', this.name, a);\n\t\n\t\tvar _el = _addDeck2.default.addDeck(a);\n\t\n\t\tthis.deckIndex[_index] = _el.getId();\n\t\tthis.decks[_el.getId()] = _el;\n\t};\n\t\n\t// Fill group\n\tgroupConstructor.prototype.Fill = function (cardNames) {\n\t\t_groupFill2.default.call(this, cardNames);\n\t};\n\t\n\tgroupConstructor.prototype.getDeckById = function (id) {\n\t\treturn this.decks[id];\n\t};\n\t\n\tgroupConstructor.prototype.getDecksByName = function (name) {\n\t\tvar _decks = {};\n\t\tfor (var d in this.decks) {\n\t\t\tif (this.decks[d].name == name) {\n\t\t\t\t_decks[d] = decks[d];\n\t\t\t}\n\t\t}\n\t\treturn _decks;\n\t};\n\t\n\t// Get decks from group\n\tgroupConstructor.prototype.getDecks = function (a) {\n\t\tvar _decks = [];\n\t\tfor (var i in this.decks) {\n\t\t\tif (a && a.visible) {\n\t\t\t\tif (this.decks[i].visible) {\n\t\t\t\t\t_decks.push(this.decks[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_decks.push(this.decks[i]);\n\t\t\t}\n\t\t}\n\t\treturn _decks;\n\t};\n\t\n\t// Redraw group\n\tgroupConstructor.prototype.Redraw = function (_a) {\n\t\t_groupRedraw2.default.call(this, _a);\n\t};\n\t\n\t// -----------------------------------------------------------------------------------------------------------------------\n\t\n\tvar addGroup = function addGroup(a) {\n\t\n\t\tif (!a) return false;\n\t\tvar _id = 'group_' + _common2.default.genId();\n\t\n\t\tvar _el_group = new groupConstructor(a, _id);\n\t\n\t\tif (a.decks) {\n\t\n\t\t\tif (typeof a.decks == 'number') {\n\t\t\t\ta.decks = {\n\t\t\t\t\t\"generator\": {\n\t\t\t\t\t\t\"type\": \"count\",\n\t\t\t\t\t\t\"count\": a.decks\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tif (a.decks.generator) {\n\t\n\t\t\t\tif (a.decks.generator.type) {\n\t\t\t\t\tif (_groupGenerator2.default[a.decks.generator.type]) {\n\t\t\t\t\t\ta.decks = _groupGenerator2.default[a.decks.generator.type].call(_el_group, a.decks.generator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('Deck generator type \"' + a.decks.generator.type + '\" not found.');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('Deck generator type is null.');\n\t\t\t\t\treturn;\n\t\t\t\t};\n\t\n\t\t\t\ta.placement = null;\n\t\t\t};\n\t\n\t\t\t// TODO ADD RELATIONS\n\t\t\tconsole.log('BEFORE ADD RELATIONS', a.decks, a.decks.length);\n\t\n\t\t\tfor (var d in a.decks) {\n\t\t\t\t_el_group.addDeck(a.decks[d]);\n\t\t\t};\n\t\t};\n\t\n\t\tif (a.decksRelations) {\n\t\n\t\t\tfor (var i in a.decksRelations) {\n\t\t\t\t// TODO\n\t\t\t\tconsole.log('Relation', a.decksRelations[i]);\n\t\t\t}\n\t\t};\n\t\n\t\tvar _elements = _share2.default.get('elements');\n\t\t_elements[_id] = _el_group;\n\t\t_share2.default.set('elements', _elements);\n\t\n\t\t// fill group\n\t\tif (a && a.fill) {\n\t\t\tvar _checkFillDeck = a.fill.length;\n\t\t\tif (_checkFillDeck) {\n\t\t\t\t_el_group.Fill(a.fill);\n\t\t\t}\n\t\t}\n\t\n\t\treturn _el_group;\n\t};\n\t\n\tvar Group = function Group(name) {\n\t\treturn _common2.default.getElementsByName(name, 'group')[0];\n\t};\n\t\n\texports.default = {\n\t\taddGroup: addGroup,\n\t\tGroup: Group\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _flipTypes = __webpack_require__(12);\n\t\n\tvar _flipTypes2 = _interopRequireDefault(_flipTypes);\n\t\n\tvar _readyPutRules = __webpack_require__(13);\n\t\n\tvar _readyPutRules2 = _interopRequireDefault(_readyPutRules);\n\t\n\tvar _readyTakeRules = __webpack_require__(14);\n\t\n\tvar _readyTakeRules2 = _interopRequireDefault(_readyTakeRules);\n\t\n\tvar _fillRules = __webpack_require__(15);\n\t\n\tvar _fillRules2 = _interopRequireDefault(_fillRules);\n\t\n\tvar _paddingTypes = __webpack_require__(16);\n\t\n\tvar _paddingTypes2 = _interopRequireDefault(_paddingTypes);\n\t\n\tvar _deckActions = __webpack_require__(17);\n\t\n\tvar _deckActions2 = _interopRequireDefault(_deckActions);\n\t\n\tvar _deckTake = __webpack_require__(26);\n\t\n\tvar _deckTake2 = _interopRequireDefault(_deckTake);\n\t\n\tvar _deckPut = __webpack_require__(27);\n\t\n\tvar _deckPut2 = _interopRequireDefault(_deckPut);\n\t\n\tvar _genCardByName = __webpack_require__(28);\n\t\n\tvar _genCardByName2 = _interopRequireDefault(_genCardByName);\n\t\n\tvar _addGroup = __webpack_require__(10);\n\t\n\tvar _addGroup2 = _interopRequireDefault(_addGroup);\n\t\n\tvar _history = __webpack_require__(24);\n\t\n\tvar _history2 = _interopRequireDefault(_history);\n\t\n\tvar _getDecks = __webpack_require__(29);\n\t\n\tvar _getDecks2 = _interopRequireDefault(_getDecks);\n\t\n\tvar _getDeckById = __webpack_require__(30);\n\t\n\tvar _getDeckById2 = _interopRequireDefault(_getDeckById);\n\t\n\tvar _deckCardNames = __webpack_require__(31);\n\t\n\tvar _deckCardNames2 = _interopRequireDefault(_deckCardNames);\n\t\n\tvar _getDeck = __webpack_require__(32);\n\t\n\tvar _getDeck2 = _interopRequireDefault(_getDeck);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar deckConstructor = function deckConstructor(a, _id) {\n\t\n\t\t// console.log(\"Deck:addDeck\", a);\n\t\n\t\tif (!a) return false;\n\t\n\t\tthis.cards = [];\n\t\n\t\tthis.getTopCard = function () {\n\t\n\t\t\tif (this.cards.length == 0) {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\treturn this.cards[this.cards.length - 1];\n\t\t};\n\t\n\t\t// parameters\n\t\tthis.type = 'deck';\n\t\tthis.fill = false;\n\t\tvar id = _id;\n\t\n\t\tthis.getId = function () {\n\t\t\treturn id;\n\t\t};\n\t\n\t\tthis.locked = a.locked ? true : false;\n\t\n\t\tvar _parent_el = _addGroup2.default.Group(a.parent),\n\t\t    _parent_name = _parent_el ? _parent_el.name : 'xname',\n\t\t    // ???\n\t\t_new_id = _parent_el ? _parent_el.getDecks().length : id;\n\t\n\t\tthis.name = a.name && typeof a.name == 'string' ? a.name : _parent_name + '_' + _new_id;\n\t\n\t\tthis.visible = a.visible && typeof a.visible == 'boolean' ? a.visible : true; // default true\n\t\n\t\tthis.groupIndex = a.groupIndex && typeof a.groupIndex == 'number' ? a.groupIndex : null;\n\t\n\t\tthis.parent = a.parent && typeof a.parent == 'string' ? a.parent : 'field';\n\t\n\t\tthis.autoHide = a.autoHide && typeof a.autoHide == 'boolean' ? a.autoHide : _defaults2.default.autohide;\n\t\n\t\t// changed parameters\n\t\tif (typeof a.showSlot == \"undefined\") {\n\t\t\ta.showSlot = _defaults2.default.showSlot;\n\t\t}\n\t\n\t\t// DOM\n\t\tvar params = {};\n\t\tparams.x = 0;\n\t\tparams.y = 0;\n\t\tparams.rotate = this.rotate = 0;\n\t\tparams.padding_y = a.paddingY && typeof a.paddingY == 'number' ? a.paddingY : _defaults2.default.padding_y;\n\t\tparams.flip_padding_y = a.flipPaddingY && typeof a.flipPaddingY == 'number' ? a.flipPaddingY : _defaults2.default.flip_padding_y;\n\t\tparams.padding_x = a.paddingX && typeof a.paddingX == 'number' ? a.paddingX : _defaults2.default.padding_x;\n\t\tparams.flip_padding_x = a.flipPaddingX && typeof a.flipPaddingX == 'number' ? a.flipPaddingX : _defaults2.default.flip_padding_x;\n\t\tparams.startZIndex = a.startZIndex && typeof a.startZIndex == 'number' ? a.startZIndex : _defaults2.default.startZIndex;\n\t\n\t\t// ------------- FLIP -------------\n\t\n\t\tvar flipType = a.flip && typeof a.flip == 'string' ? a.flip : _defaults2.default.flip_type,\n\t\t    checkFlip = _flipTypes2.default[flipType];\n\t\n\t\tthis.flipCheck = function () {\n\t\t\t// console.log('flipCheck', flipType, this.name);\n\t\t\tfor (var i in this.cards) {\n\t\t\t\tcheckFlip(this.cards[i], i | 0, this.cards.length);\n\t\t\t}\n\t\t\t_event2.default.dispatch('redrawDeckFlip', this);\n\t\t};\n\t\n\t\t// ------------- PUT -------------\n\t\n\t\tthis.putRules = a.putRules ? typeof a.putRules == 'function' ? a.putRules : typeof a.putRules == 'string' ? _readyPutRules2.default[a.putRules] ? _readyPutRules2.default[a.putRules] : _readyPutRules2.default[_defaults2.default.putName]\n\t\t// : typeof a.putRules === 'object'\n\t\t: a.putRules.constructor == Array ? a.putRules : _readyPutRules2.default[_defaults2.default.putName] : _readyPutRules2.default[_defaults2.default.putName];\n\t\n\t\t// ------------- TAKE -------------\n\t\n\t\t// можно ли взять карту/стопку\n\t\tthis.takeRules = a.takeRules;\n\t\n\t\t// ------------- FILL -------------\n\t\n\t\tvar fillRule = a.fillRule && typeof a.fillRule == \"string\" && typeof _fillRules2.default[a.fillRule] == \"function\" ? _fillRules2.default[a.fillRule] : _fillRules2.default['not'];\n\t\n\t\t// ------------- PADDING -------------\n\t\n\t\t// порядок карт в колоде\n\t\tvar padding = a.paddingX || a.paddingY ? _paddingTypes2.default['special'] : a.paddingType ? typeof a.paddingType == 'string' && _paddingTypes2.default[a.paddingType] ? _paddingTypes2.default[a.paddingType] : _paddingTypes2.default['none'] : _paddingTypes2.default[_defaults2.default.paddingType];\n\t\n\t\tthis.padding = function (index) {\n\t\t\tvar _padding = padding(params, this.cards[index], index, this.cards.length, this.cards);\n\t\t\treturn _padding;\n\t\t};\n\t\n\t\tthis.actions = [];\n\t\n\t\tif (a.actions) {\n\t\t\tthis.actions = a.actions;\n\t\t\t_deckActions2.default.addActions.call(this);\n\t\t};\n\t\n\t\tthis.afterStep = a.afterStep;\n\t\n\t\t// TODO\n\t\tthis.relations = [];\n\t\n\t\t_event2.default.dispatch('addDeckEl', {\n\t\t\ta: a,\n\t\t\tdeck: this,\n\t\t\tparams: params\n\t\t});\n\t\n\t\t_event2.default.listen('moveDragDeck', function (data) {\n\t\n\t\t\tif (data.destination.name != this.deck.name) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar _deck = data.destination;\n\t\n\t\t\tif (_deck && !this.fill && this.callback({ deck: _deck })) {\n\t\t\t\tthis.deck.fill = true;\n\t\t\t\t_history2.default.add({ fill: {\n\t\t\t\t\t\tdeck: this.deck.name\n\t\t\t\t\t} });\n\t\t\t\t// event.dispatch('fillDeck', {deck : this.deck});\n\t\t\t}\n\t\t}.bind({\n\t\t\tdeck: this,\n\t\t\tcallback: fillRule\n\t\t}));\n\t\n\t\tthis.Redraw = function (data) {\n\t\n\t\t\t_event2.default.dispatch('redrawDeck', {\n\t\t\t\tdeck: this,\n\t\t\t\tdata: data,\n\t\t\t\tparams: params,\n\t\t\t\tcards: this.cards\n\t\t\t});\n\t\t};\n\t};\n\t\n\t// -------------------------------------------------------------------------------------------------\n\t\n\tdeckConstructor.prototype.Fill = function (cardNames) {\n\t\n\t\tfor (var i in cardNames) {\n\t\t\tthis.genCardByName(cardNames[i]);\n\t\t}\n\t};\n\t\n\tdeckConstructor.prototype.clear = function () {\n\t\tfor (var i in this.cards) {\n\t\t\t_event2.default.dispatch('removeEl', this.cards[i]);\n\t\t\tthis.cards[i] = null;\n\t\t}\n\t\tthis.cards = [];\n\t\t_event2.default.dispatch('removeEl', this);\n\t};\n\t\n\tdeckConstructor.prototype.Push = function (deck) {\n\t\t// , parentName) {\n\t\tfor (var i in deck) {\n\t\t\tdeck[i].parent = this.getId();\n\t\t\tthis.cards.push(deck[i]);\n\t\t}\n\t};\n\t\n\tdeckConstructor.prototype.Pop = function (count, clearParent) {\n\t\n\t\tif (this.cards.length < count) return false;\n\t\n\t\tvar _deck = [];\n\t\tfor (; count; count -= 1) {\n\t\t\tvar _pop = this.cards.pop();\n\t\t\tif (clearParent) _pop.parent = null;\n\t\t\t// console.log('POP:', _pop)\n\t\t\t_deck.push(_pop);\n\t\t\t_deck[_deck.length - 1].parent = null;\n\t\t}\n\t\t_deck.reverse();\n\t\n\t\t// что делать если вынули все карты\n\t\tif (this.autoHide && this.cards.length == 0) {\n\t\t\tthis.hide();\n\t\t}\n\t\n\t\tthis.Redraw();\n\t\n\t\treturn _deck;\n\t};\n\t\n\tdeckConstructor.prototype.Take = function (cardId) {\n\t\treturn _deckTake2.default.call(this, cardId); // ??? .call(this, attributes);\n\t};\n\t\n\t// проверяем, можем ли положить стопку/карту\n\t// возвращает true, если согласно правилам сюда можно положить карту\n\tdeckConstructor.prototype.Put = function (putDeck) {\n\t\treturn _deckPut2.default.call(this, putDeck); //(deckConstructor);\n\t};\n\t\n\t// создать карту\n\tdeckConstructor.prototype.genCardByName = function (name) {\n\t\treturn _genCardByName2.default.call(this, name);\n\t};\n\t\n\tdeckConstructor.prototype.hide = function () {\n\t\tthis.visible = false;\n\t\t_history2.default.add({ hideDeck: this.name });\n\t\tthis.Redraw();\n\t};\n\t\n\tdeckConstructor.prototype.show = function () {\n\t\tthis.visible = false;\n\t\t_history2.default.add({ showDeck: this.name });\n\t\tthis.Redraw();\n\t};\n\t\n\t// deckConstructor.prototype.getCards = function() {\n\t// \treturn this.cards;\n\t// }\n\t\n\tdeckConstructor.prototype.getCardsByName = function (cardName) {\n\t\tvar _cards = [];\n\t\tfor (var i in this.cards) {\n\t\t\tif (this.cards[i].name == cardName) {\n\t\t\t\t_cards.push(this.cards[i]);\n\t\t\t}\n\t\t}\n\t\treturn _cards;\n\t};\n\t\n\tdeckConstructor.prototype.Card = function (cardName) {\n\t\treturn this.getCardsByName(cardName)[0];\n\t};\n\t\n\tdeckConstructor.prototype.hideCards = function () {\n\t\tfor (var i in this.cards) {\n\t\t\tthis.cards[i].visible = false;\n\t\t\t_event2.default.dispatch('hideCard', this.cards[i]);\n\t\t}\n\t};\n\t\n\tdeckConstructor.prototype.showCards = function () {\n\t\tfor (var i in this.cards) {\n\t\t\tthis.cards[i].visible = true;\n\t\t\t_event2.default.dispatch('showCard', this.cards[i]);\n\t\t}\n\t};\n\t\n\tdeckConstructor.prototype.getCardsNames = function () {\n\t\tvar _cardsNames = [];\n\t\tfor (var i in this.cards) {\n\t\t\t_cardsNames.push(this.cards[i].name);\n\t\t};\n\t\treturn _cardsNames;\n\t};\n\t\n\t// deckConstructor.prototype.parent = function(a) {\n\t// \tif(typeof a == 'string') parent = a;\n\t// \treturn parent;\n\t// }\n\t\n\t// ------------------------------------------------------------------------------------------------------------------------------------------\n\t\n\tvar addDeck = function addDeck(a) {\n\t\n\t\t// console.log('addDeck', a);\n\t\n\t\tif (!a) return false;\n\t\n\t\tvar _id = 'deck_' + _common2.default.genId();\n\t\n\t\tvar _a = Object['assign'] ? Object['assign']({}, a) : JSON.parse(JSON.stringify(a));\n\t\n\t\tvar _el_deck = new deckConstructor(_a, _id);\n\t\n\t\t// fill deck\n\t\tif (a.fill) {\n\t\t\tfor (var i in a.fill) {\n\t\t\t\tif (typeof a.fill[i] == 'string') {\n\t\t\t\t\t_el_deck.genCardByName(a.fill[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tvar _elements = _share2.default.get('elements');\n\t\n\t\t_elements[_id] = _el_deck;\n\t\n\t\t_share2.default.set('elements', _elements);\n\t\n\t\treturn _el_deck;\n\t};\n\t\n\texports.default = {\n\t\taddDeck: addDeck,\n\t\tDeck: _getDeck2.default,\n\t\tgetDecks: _getDecks2.default,\n\t\tgetDeckById: _getDeckById2.default,\n\t\tdeckCardNames: _deckCardNames2.default\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = {\n\t\tnone: function none(card, i, length) {\n\t\t\tcard.flip = false;\n\t\t},\n\t\tall: function all(card, i, length) {\n\t\t\tcard.flip = true;\n\t\t},\n\t\tnotlast: function notlast(card, i, length) {\n\t\t\tcard.flip = i < length - 1 ? true : false;\n\t\t},\n\t\tfirst_1: function first_1(card, i, length) {\n\t\t\tcard.flip = i < 1 ? true : false;\n\t\t},\n\t\tfirst_2: function first_2(card, i, length) {\n\t\t\tcard.flip = i < 2 ? true : false;\n\t\t},\n\t\tfirst_3: function first_3(card, i, length) {\n\t\t\tcard.flip = i < 3 ? true : false;\n\t\t}\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar rpr = {\n\t\n\t\t// Internal use\n\t\t_downupcards: function _downupcards(a) {\n\t\n\t\t\tif (a.cards.length == 0) return false;\n\t\n\t\t\tvar down = _common2.default.validateCardName(a.cards[a.cards.length - 1].name);\n\t\t\tvar up = _common2.default.validateCardName(a.putDeck[0].card.name);\n\t\t\tif (!down || !up) return false;\n\t\t\treturn {\n\t\t\t\tup: up,\n\t\t\t\tdown: down\n\t\t\t};\n\t\t},\n\t\n\t\t_downupranknum: function _downupranknum(a) {\n\t\n\t\t\tvar du = rpr._downupcards(a);\n\t\t\treturn du ? {\n\t\t\t\tdown: _defaults2.default.card.ranks.indexOf(du.down.rank),\n\t\t\t\tup: _defaults2.default.card.ranks.indexOf(du.up.rank)\n\t\t\t} : false;\n\t\t},\n\t\n\t\t_isFirst: function _isFirst(a, _name) {\n\t\t\tif (a.cards.length == 0) {\n\t\t\t\tvar _validate = null;\n\t\t\t\treturn (_validate = _common2.default.validateCardName(a.putDeck[0].card.name)) && _validate.rank == _name;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\n\t\t// Rules\n\t\n\t\tstriped: function striped(a) {\n\t\t\tif (a.cards.length == 0) return true;\n\t\n\t\t\tvar color_A = _common2.default.validateCardName(a.cards[a.cards.length - 1].name).color,\n\t\t\t    color_B = null;\n\t\n\t\t\tvar _validate = null;\n\t\t\tif (_validate = _common2.default.validateCardName(a.putDeck[0].card.name)) {\n\t\t\t\tcolor_B = _validate.color;\n\t\t\t}\n\t\n\t\t\treturn color_A != color_B;\n\t\t},\n\t\n\t\tfirstAce: function firstAce(a) {\n\t\t\treturn rpr._isFirst(a, \"1\");\n\t\t},\n\t\n\t\tfirstKing: function firstKing(a) {\n\t\t\treturn rpr._isFirst(a, \"k\");\n\t\t},\n\t\n\t\tnotForEmpty: function notForEmpty(a) {\n\t\t\treturn a.cards.length;\n\t\t},\n\t\n\t\toneRank: function oneRank(a) {\n\t\n\t\t\tif (a.cards.length == 0) return true;\n\t\t\tvar du = rpr._downupcards(a);\n\t\t\treturn du && du.up.rank == du.down.rank;\n\t\t},\n\t\n\t\toneSuit: function oneSuit(a) {\n\t\t\tif (a.cards.length == 0) return true;\n\t\t\tvar du = rpr._downupcards(a);\n\t\t\treturn du && du.up.suit == du.down.suit;\n\t\t},\n\t\n\t\tany: function any(a) {\n\t\t\treturn true;\n\t\t},\n\t\n\t\tnot: function not(a) {\n\t\t\treturn false;\n\t\t},\n\t\n\t\tascendDeck: function ascendDeck(a) {\n\t\t\t//ascend deck by step\n\t\n\t\t\tif (a.putDeck.length == 1) return true;\n\t\n\t\t\tvar ruleCorrect = true;\n\t\t\tfor (var i in a.putDeck) {\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tvar down = _defaults2.default.card.ranks.indexOf(_common2.default.validateCardName(a.putDeck[i - 1].card.name).rank),\n\t\t\t\t\t    up = _defaults2.default.card.ranks.indexOf(_common2.default.validateCardName(a.putDeck[i].card.name).rank);\n\t\n\t\t\t\t\truleCorrect = ruleCorrect && 1 + down == up;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ruleCorrect;\n\t\t},\n\t\n\t\tdescendDeck: function descendDeck(a) {\n\t\t\t//ascend deck by step\n\t\n\t\t\tif (a.putDeck.length == 1) return true;\n\t\n\t\t\tvar ruleCorrect = true;\n\t\t\tfor (var i in a.putDeck) {\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tvar down = _defaults2.default.card.ranks.indexOf(_common2.default.validateCardName(a.putDeck[i - 1].card.name).rank),\n\t\t\t\t\t    up = _defaults2.default.card.ranks.indexOf(_common2.default.validateCardName(a.putDeck[i].card.name).rank);\n\t\n\t\t\t\t\truleCorrect = ruleCorrect && down == 1 + up;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ruleCorrect;\n\t\t},\n\t\n\t\toneRankDeck: function oneRankDeck(a) {\n\t\n\t\t\tif (a.putDeck.length == 1) return true;\n\t\n\t\t\tvar ruleCorrect = true;\n\t\t\tfor (var i in a.putDeck) {\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tvar down = _common2.default.validateCardName(a.putDeck[i - 1].card.name).suit,\n\t\t\t\t\t    up = _common2.default.validateCardName(a.putDeck[i].card.name).suit;\n\t\n\t\t\t\t\truleCorrect = ruleCorrect && down == up;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ruleCorrect;\n\t\t},\n\t\n\t\tascend: function ascend(a) {\n\t\n\t\t\tif (a.cards.length == 0) return true;\n\t\n\t\t\tvar da = rpr._downupranknum(a);\n\t\t\treturn da && da.down < da.up;\n\t\t},\n\t\n\t\tdescent: function descent(a) {\n\t\n\t\t\tif (a.cards.length == 0) return true;\n\t\n\t\t\tvar da = rpr._downupranknum(a);\n\t\t\treturn da && da.down > da.up;\n\t\t},\n\t\n\t\tdescentOne: function descentOne(a) {\n\t\t\t// one step\n\t\n\t\t\tif (a.cards.length == 0) return true;\n\t\n\t\t\tvar da = rpr._downupranknum(a);\n\t\t\treturn da && da.down == 1 + da.up;\n\t\t},\n\t\n\t\tascendOne: function ascendOne(a) {\n\t\t\t// one step\n\t\n\t\t\tif (a.cards.length == 0) return true;\n\t\n\t\t\tvar da = rpr._downupranknum(a);\n\t\t\treturn da && 1 + da.down == da.up;\n\t\t},\n\t\n\t\tascdescOne: function ascdescOne(a) {\n\t\n\t\t\tif (a.cards.length == 0) return true;\n\t\n\t\t\tvar da = rpr._downupranknum(a);\n\t\t\treturn da && Math.abs(da.down - da.up) == 1;\n\t\t},\n\t\n\t\tsumm14: function summ14(a) {\n\t\n\t\t\tif (a.cards.length == 0) return true;\n\t\n\t\t\tvar du = rpr._downupcards(a);\n\t\t\treturn du.down.value + du.up.value == 14;\n\t\t}\n\t\n\t};\n\t\n\texports.default = rpr;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = {\n\t\n\t\t// SimpleRules\n\t\tnot: function not(a) {\n\t\t\treturn false;\n\t\t},\n\t\n\t\tnotFirst: function notFirst(a) {\n\t\t\treturn a.cardIndex > 0;\n\t\t},\n\t\n\t\tany: function any(a) {\n\t\t\treturn true;\n\t\t},\n\t\n\t\tonlytop: function onlytop(a) {\n\t\n\t\t\treturn a.cardIndex == a.deckLength - 1;\n\t\t},\n\t\n\t\t// TODO rules\n\t\n\t\task: function ask(a) {\n\t\t\tconsole.log(a);\n\t\t\treturn true;\n\t\t},\n\t\n\t\tdesc: function desc(a) {\n\t\t\tconsole.log(a);\n\t\t\treturn true;\n\t\t}\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t\n\t\tdeckLength: function deckLength(a) {\n\t\t\treturn _defaults2.default.card.ranks.length <= a.deck.cards.length;\n\t\t},\n\t\n\t\tnot: function not() {\n\t\t\treturn false;\n\t\t}\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = {\n\t\n\t\tnone: function none(params, card, index, length, deck) {\n\t\t\treturn { x: params.x, y: params.y };\n\t\t},\n\t\tlast_three_min: function last_three_min(params, card, index, length, deck) {\n\t\t\tif (index > length - 3) {\n\t\t\t\tif (length > 3) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx: params.x - (length - 3 - index) * 2,\n\t\t\t\t\t\ty: params.y - (length - 3 - index)\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx: params.x + index * 2,\n\t\t\t\t\t\ty: params.y + (index | 0)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn { x: x, y: y };\n\t\t\t}\n\t\t},\n\t\ttwindeck_typeA: function twindeck_typeA(params, card, index, length, deck) {\n\t\n\t\t\tvar twindeck_max_cards = 24,\n\t\t\t    twindeck_deck_length = 3;\n\t\n\t\t\tvar _padding = {\n\t\t\t\tx: 2,\n\t\t\t\ty: 1\n\t\t\t};\n\t\n\t\t\tvar _depth = length / twindeck_max_cards * twindeck_deck_length | 0;\n\t\t\tif (_depth >= twindeck_deck_length) _depth = twindeck_deck_length - 1;\n\t\n\t\t\tvar _plus = index - (length - _depth - 1);\n\t\t\tif (_plus < 0) _plus = 0;\n\t\n\t\t\treturn {\n\t\t\t\tx: params.x + _padding.x * _plus,\n\t\t\t\ty: params.y + _padding.y * _plus\n\t\t\t};\n\t\t},\n\t\tradial: function radial(params, card, index, length, deck) {\n\t\n\t\t\t//              b\n\t\t\t//       C  ..`:   A = sin(b) * C\n\t\t\t//     ...``   :B  B = cos(b) * C\n\t\t\t// a.``.......+:\n\t\t\t//        A     y 90deg\n\t\t\tvar _depth = 1,\n\t\t\t    _radius = index * _depth,\n\t\n\t\t\t// _step   = 180 / 16,\n\t\t\t// _card   = defaults.card,\n\t\t\t_angle = params.rotate,\n\t\t\t    //_step / 2 + 270;\n\t\t\t_deg = Math.PI / 180,\n\t\t\t    _a = Math.sin(_angle * _deg) * _radius,\n\t\t\t    _b = Math.cos(_angle * _deg) * _radius;\n\t\t\t// if(_angle > 360) _angle -= 360;\n\t\t\treturn {\n\t\t\t\tx: params.x + _a, // - _card.width  / 2,\n\t\t\t\ty: params.y - _b // - _card.height / 2\n\t\t\t};\n\t\t\t// console.log('radial:', params, card, index, length, deck);\n\t\t},\n\t\tspecial: function special(params, card, index, length, deck) {\n\t\n\t\t\tvar _y = params.y,\n\t\t\t    _x = params.x;\n\t\n\t\t\tfor (var i = 0; i < index; i += 1) {\n\t\t\t\t_y += deck[i] && deck[i].flip ? params.flip_padding_y : params.padding_y;\n\t\t\t\t_x += deck[i] && deck[i].flip ? params.flip_padding_x : params.padding_x;\n\t\t\t}\n\t\t\treturn { x: _x, y: _y };\n\t\t},\n\t\tvertical: function vertical(params, card, index, length, deck) {\n\t\t\tvar _y = params.y;\n\t\t\tfor (var i = 0; i < index; i += 1) {\n\t\t\t\t_y += deck[i] && deck[i].flip ? params.flip_padding_y : params.padding_y;\n\t\t\t}var _return = {\n\t\t\t\tx: params.x,\n\t\t\t\ty: _y\n\t\t\t};\n\t\t\t// console.log('vertical:', deck.length, index, _return);\n\t\t\treturn _return;\n\t\t},\n\t\thorizontal: function horizontal(params, card, index, length, deck) {\n\t\t\tvar _x = params.x;\n\t\t\tfor (var i = 0; i < index; i += 1) {\n\t\t\t\t_x += deck[i] && deck[i].flip ? params.flip_padding_x : params.padding_x;\n\t\t\t}var _return = {\n\t\t\t\tx: _x,\n\t\t\t\ty: params.y\n\t\t\t};\n\t\t\t// console.log('horizontal:', deck.length, index, _return);\n\t\t\treturn _return;\n\t\t}\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event2 = __webpack_require__(2);\n\t\n\tvar _event3 = _interopRequireDefault(_event2);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _twindeckAction = __webpack_require__(18);\n\t\n\tvar _twindeckAction2 = _interopRequireDefault(_twindeckAction);\n\t\n\tvar _dealerdeckAction = __webpack_require__(19);\n\t\n\tvar _dealerdeckAction2 = _interopRequireDefault(_dealerdeckAction);\n\t\n\tvar _kickAction = __webpack_require__(25);\n\t\n\tvar _kickAction2 = _interopRequireDefault(_kickAction);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _actions = {\n\t\t\"twindeck\": _twindeckAction2.default,\n\t\t\"dealerdeck\": _dealerdeckAction2.default,\n\t\t\"kick\": _kickAction2.default,\n\t\t\"avalanche\": function avalanche(e) {//\n\t\t\t// listen avalanche\n\t\t}\n\t};\n\t\n\t// ------------------------------------------------------------------------------------------\n\t\n\t// History extension\n\t// History.addUndoMethods({twindeck : function(a) {\n\t// \tif(a.twindeck) {\n\t\n\t// \t\tvar _deck_from = Deck.Deck(a.twindeck.from),\n\t// \t\t\t_deck_to   = Deck.Deck(a.twindeck.to);\n\t\n\t// \t\t// TODO\n\t// \t\t// deck_to cards [moveCards] -> deck_from\n\t// \t\tvar _moveDeck = _deck_to.Pop(a.twindeck.moveCards.length);\n\t// \t\tif(_moveDeck.length) {\n\t// \t\t\t_deck_from.Push(_moveDeck);\n\t// \t\t}\n\t\n\t// \t\tvar _twindeck = [];\n\t// \t\tfor(var i in a.twindeck.toHide) {\n\t// \t\t\tif(_deck_from.twindeck.length) {\n\t// \t\t\t\t_twindeck.push(\n\t// \t\t\t\t\t_deck_from.twindeck.pop()\n\t// \t\t\t\t);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t\t_twindeck.reverse();\n\t\n\t// \t\tif(_twindeck.length) {\n\t// \t\t\t_deck_to.Push(_twindeck);\n\t// \t\t}\n\t\n\t// \t\t_deck_from.flipCheck();\n\t// \t\t_deck_to  .showCards();\n\t// \t\t_deck_from.Redraw();\n\t// \t\t_deck_to  .Redraw();\n\t\n\t// \t\t// console.log('twindeck undo:', a.twindeck, share.deckCardNames(_deck_from.twindeck));\n\t// \t}\n\t// }});\n\t\n\t// History.addRedoMethods({twindeck : function(a) {\n\t// \tif(a.twindeck) {\n\t// \t\t// TODO\n\t// \t\tconsole.log('twindeck redo:', a.twindeck);\n\t// \t}\n\t// }});\n\t\n\t// Actions\n\tvar _decksActions = [],\n\t    _events = [];\n\t\n\tvar addActionEvent = function addActionEvent(_event) {\n\t\n\t\t// console.log('addActionEvent#1', _event);\n\t\n\t\t_event3.default.listen(_event, function (data) {\n\t\n\t\t\t// console.log(_event, data, _decks);\n\t\n\t\t\tfor (var i in _decksActions) {\n\t\t\t\tif (_decksActions[i].event == _event) {\n\t\n\t\t\t\t\tvar _actionName = _decksActions[i].action;\n\t\n\t\t\t\t\tvar _canRun = _event == 'click' ? data.name == _decksActions[i].deck.name : true;\n\t\n\t\t\t\t\tif (_canRun) {\n\t\n\t\t\t\t\t\t// console.log('RUN', _actionName, 'for', _decksActions[i].deck.name, 'on', _event);\n\t\n\t\t\t\t\t\t_actions[_actionName].call(_decksActions[i].deck, {\n\t\t\t\t\t\t\tactionData: _decksActions[i].deck.actions[_actionName],\n\t\t\t\t\t\t\teventData: data,\n\t\t\t\t\t\t\teventName: _event\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t// for(var actionName in _decksActions[i].deck.actions) {\n\t\t\t\t// if(_decksActions[i].actions[actionName].event == _event) {\n\t\n\t\t\t\t// if(_actions[actionName]) {\n\t\n\t\t\t\t// _actions[actionName].call(_decks[i], _decks[i].actions[actionName], e);\n\t\n\t\t\t\t// }\n\t\t\t\t// }\n\t\t\t\t// }\n\t\t\t}\n\t\t});\n\t};\n\t\n\t// addActionEvent('click');\n\t\n\tvar addActions = function addActions() {\n\t\n\t\t// console.log(this.name, 'add actions:', this);\n\t\n\t\tfor (var actionName in this.actions) {\n\t\n\t\t\tif (!this.actions[actionName].event) {\n\t\t\t\tthis.actions[actionName].event = 'click';\n\t\t\t}\n\t\n\t\t\tif (_actions[actionName]) {\n\t\n\t\t\t\t_decksActions.push({\n\t\t\t\t\tdeck: this,\n\t\t\t\t\tevent: this.actions[actionName].event,\n\t\t\t\t\taction: actionName\n\t\t\t\t});\n\t\n\t\t\t\t// console.log('add action:', actionName, this.actions[actionName].event, _events.indexOf(this.actions[actionName].event) < 0, _events);\n\t\t\t\tif (_events.indexOf(this.actions[actionName].event) < 0) {\n\t\t\t\t\t_events.push(this.actions[actionName].event);\n\t\t\t\t\taddActionEvent(this.actions[actionName].event);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('Action', actionName, 'for', this.name, 'not found.');\n\t\t\t};\n\t\t}\n\t\tautoRunActions(this.actions);\n\t};\n\t\n\t/*var runActions = function(e) {// bind this deck\r\n\t\r\n\t\tcommon.animationDefault()\r\n\t\r\n\t\tfor(var actionName in this.actions) {\r\n\t\t\tif(\r\n\t\t\t\ttypeof this.actions[actionName].type == \"undefined\"\r\n\t\t\t || this.actions[actionName].type && this.actions[actionName].listen == \"click\" // default action event - click\r\n\t\t\t) {\r\n\t\t\t\tif(_actions[actionName]) {\r\n\t\t\t\t\t// console.log('run action', this, actionName, this.actions[actionName]);\r\n\t\t\t\t\t_actions[actionName].call(this, this.actions[actionName]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Tips.checkTips();\r\n\t}*/\n\t\n\tvar autoRunActions = function autoRunActions(data) {\n\t\t// bind this deck\n\t\n\t\t_common2.default.animationDefault();\n\t\n\t\tfor (var actionName in data.actions) {\n\t\t\tif (data.actions[actionName].autorun) {\n\t\t\t\tif (_actions[actionName]) {\n\t\t\t\t\t_actions[actionName].call(data, {\n\t\t\t\t\t\tactionData: data.actions[actionName],\n\t\t\t\t\t\teventData: null,\n\t\t\t\t\t\teventName: data.actions[actionName].event\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Tips.checkTips();\n\t};\n\t\n\texports.default = {\n\t\t// autoRunActions,\n\t\t// runActions,\n\t\taddActions: addActions\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t// import event    from 'event';\n\t// import defaults from 'defaults';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (e) {\n\t\t// TODO переделать\n\t\n\t\tconsole.log('TWINDECK', e);\n\t\n\t\t/*\r\n\t \t\r\n\t \t// console.log(\"twindeck action:\", e);\r\n\t \tif(e.deck_from.iteration == 0) {\r\n\t \t\treturn;\r\n\t \t}\r\n\t \r\n\t \tvar deck_to = Deck.Deck(e.data.to);\r\n\t \t\r\n\t \tvar moveCardsCount = e.data.count && typeof e.data.count == 'number' \r\n\t \t\t? e.data.count \r\n\t \t\t: defaults.actions.twindeck.CardsCount;\r\n\t \t\r\n\t \t// количество оставшихся карт в первой колоде\r\n\t \tvar deckFromCardsCount = e.deck_from.cards.length;\r\n\t \t\r\n\t \tif(deckFromCardsCount < moveCardsCount) {\r\n\t \t\tmoveCardsCount = deckFromCardsCount;\r\n\t \t}\r\n\t \t\r\n\t \t// инициализация\r\n\t \tif(typeof e.deck_from.iteration == 'undefined') {\r\n\t \t\t// \"-1\" - infinity\r\n\t \t\te.deck_from.iteration = -1;\r\n\t \t\te.deck_from.twindeck = [];\r\n\t \t}\r\n\t \r\n\t \t// количество циклов перелистываний сначало до конца\r\n\t \tif(e.iterations && e.deck_from.iteration < 0) {\r\n\t \t\te.deck_from.iteration = e.iterations\r\n\t \t}\r\n\t \r\n\t \tdeck_to.hideCards();\r\n\t \r\n\t \tvar _deck = deck_to.Pop(deck_to.cards.length);\r\n\t \r\n\t \t// oneStepWay.add('toHide') = Deck.deckCardNames(_deck);\r\n\t \t\r\n\t \t_deck.reverse();\r\n\t \tfor(var i in _deck) {\r\n\t \t\te.deck_from.twindeck.unshift(_deck[i]);\r\n\t \t}\r\n\t \t\r\n\t \t// первая колода пуста\r\n\t \tif(e.deck_from.twindeck && e.deck_from.twindeck.length && deckFromCardsCount == 0 && e.deck_from.iteration != 0) {\r\n\t \t\t// e.deck_from.twindeck.reverse();\r\n\t \t\te.deck_from.Push(e.deck_from.twindeck);\r\n\t \t\te.deck_from.twindeck = [];// unshift\r\n\t \t// перелистывание\r\n\t \t} else {\r\n\t \t\tvar _deck = e.deck_from.Pop(moveCardsCount);\r\n\t \t\tdeck_to.Push(_deck);\r\n\t \t}\r\n\t \t\r\n\t \te.deck_from.showCards();\r\n\t \t\r\n\t \t// ------------ FLIP ------------\r\n\t \t// var _deck_from = e.deck_from.cards;\r\n\t \t// var _deck_to = deck_to.cards;\r\n\t \t\r\n\t \te.deck_from.flipCheck();\r\n\t \tdeck_to    .flipCheck();\r\n\t \t\r\n\t \te.deck_from.Redraw();\r\n\t \tdeck_to    .Redraw();\r\n\t \t\r\n\t \t// ------------ STEP ------------\r\n\t \t// Step\r\n\t \tvar _twindeckStep = {\r\n\t \t\tfrom      : e.deck_from.name,\r\n\t \t\tto        : deck_to    .name,\r\n\t \t\tmoveCards : share.deckCardNames(_deck),\r\n\t \t\titeration : (e.deck_from.iteration|0)\r\n\t \t};\r\n\t \t\r\n\t \t// hiddenCards : share.deckCardNames(e.deck_from.twindeck), \r\n\t \t// cards       : share.deckCardNames(e.deck_from.cards),\r\n\t \r\n\t \tHistory.add(_twindeckStep);\r\n\t \t\r\n\t \tevent.dispatch('makeStep', History.get());\r\n\t \t\r\n\t \t// ------------------------------\r\n\t \r\n\t \t// share.checkTips();\r\n\t \r\n\t \te.deck_from.iteration -= 1;\r\n\t \r\n\t */\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (data) {\n\t\t// data.actionData, e\n\t\n\t\t// listen click\n\t\t// click is for me (default)\n\t\t// if(this.name != data.actionData.name) { return; };\n\t\n\t\t// console.log(\"dealerdeck\", this, data.actionData, data.actionData);\n\t\n\t\tif (this.cards.length == 0) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar _decks = [];\n\t\n\t\tif (data.actionData.toGroup && !data.actionData.to) {\n\t\n\t\t\tdata.actionData.to = data.actionData.toGroup;\n\t\n\t\t\t// _decks = _decks.concat(Group.Group(e.toGroup).decks);\n\t\n\t\t\t// var __decks = Group.Group(data.actionData.toGroup).decks;\n\t\t\t// for(var deckIndex in __decks) {\n\t\t\t// \t_decks.push(__decks[deckIndex]);\n\t\t\t// }\n\t\t};\n\t\n\t\tif (data.actionData.to) {\n\t\t\tif (typeof data.actionData.to == \"string\") {\n\t\n\t\t\t\tvar _elements = _common2.default.getElementsByName(data.actionData.to);\n\t\t\t\t// console.log('>>>', _elements);\n\t\t\t\tfor (var i in _elements) {\n\t\n\t\t\t\t\tif (_elements[i].type == \"group\") {\n\t\t\t\t\t\t// _decks = _decks.concat(Group.Group(data.actionData.to).decks);\n\t\t\t\t\t\t// var __decks = Group.Group(data.actionData.to).decks;\n\t\t\t\t\t\tfor (var deckIndex in _elements[i].decks) {\n\t\t\t\t\t\t\t_decks.push(_elements[i].decks[deckIndex]);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\n\t\t\t\t\tif (_elements[i].type == \"deck\") {\n\t\t\t\t\t\t_decks.push(_el);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var i in data.actionData.to) {\n\t\n\t\t\t\t\tvar _elements = _common2.default.getElementsByName(data.actionData.to[i]);\n\t\n\t\t\t\t\tfor (var elIndex in _elements) {\n\t\n\t\t\t\t\t\tif (_elements[elIndex].type == \"group\") {\n\t\t\t\t\t\t\t// _decks = _decks.concat(Group.Group(data.actionData.to[i]).decks);\n\t\t\t\t\t\t\t// var __decks = Group.Group(data.actionData.to[i]).decks;\n\t\t\t\t\t\t\tfor (var deckIndex in _elements[elIndex].decks) {\n\t\t\t\t\t\t\t\t_decks.push(_elements[elIndex].decks[deckIndex]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\n\t\t\t\t\t\tif (_elements[elIndex].type == \"deck\") {\n\t\t\t\t\t\t\t_decks.push(_elements[elIndex]);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\t_common2.default.animationDefault();\n\t\n\t\tvar _makeStep = false;\n\t\n\t\tfor (var deckId in _decks) {\n\t\n\t\t\tvar _card = this.getTopCard();\n\t\n\t\t\t_decks[deckId].cards.length == 0 && data.actionData.onlyEmpty;\n\t\n\t\t\tvar _canStep = data.actionData.onlyEmpty ? _decks[deckId].cards.length == 0 : true;\n\t\n\t\t\tif (_canStep && _card) {\n\t\n\t\t\t\t_makeStep = true;\n\t\n\t\t\t\tvar _cardName = _card.name;\n\t\n\t\t\t\t(0, _forceMove2.default)({\n\t\t\t\t\tfrom: this.name,\n\t\t\t\t\tto: _decks[deckId].name,\n\t\t\t\t\tdeck: [_cardName],\n\t\t\t\t\tflip: true\n\t\t\t\t}, true);\n\t\n\t\t\t\t_decks[deckId].flipCheck();\n\t\t\t\t// _decks[deckId].Redraw();\n\t\n\t\t\t\t_history2.default.add({ move: {\n\t\t\t\t\t\tfrom: this.name,\n\t\t\t\t\t\tto: _decks[deckId].name,\n\t\t\t\t\t\tdeck: [_cardName],\n\t\t\t\t\t\tflip: true\n\t\t\t\t\t} });\n\t\t\t};\n\t\t};\n\t\n\t\t// History.add({\n\t\t// \t\"action\" : {\n\t\t// \t\tname     : \"dealerdeck\",\n\t\t// \t\tdeckName : this.name,\n\t\t// \t\tparams   : data.actionData\n\t\t// \t}\n\t\t// });\n\t\n\t\tif (_makeStep) {\n\t\t\t_event2.default.dispatch('makeStep', _history2.default.get());\n\t\t};\n\t};\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _forceMove = __webpack_require__(20);\n\t\n\tvar _forceMove2 = _interopRequireDefault(_forceMove);\n\t\n\tvar _history = __webpack_require__(24);\n\t\n\tvar _history2 = _interopRequireDefault(_history);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (a) {\n\t\n\t\tvar _animation = _share2.default.get('animation');\n\t\n\t\tif (!a.from || !a.to || !a.deck) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tif (!a.deck.length) return;\n\t\n\t\tvar _from = typeof a.from == \"string\" ? _addDeck2.default.Deck(a.from) : a.from;\n\t\tvar _to = typeof a.to == \"string\" ? _addDeck2.default.Deck(a.to) : a.to;\n\t\n\t\tif (!_from || !_to || _from.type != \"deck\" || _to.type != \"deck\") {\n\t\t\treturn;\n\t\t}\n\t\n\t\t// console.log('FORCEMOVE from:', _from.name, 'to:', _to.name, a.deck);\n\t\n\t\tvar _check = true;\n\t\tvar _from_deck = _from.cards;\n\t\n\t\tfor (var i in _from_deck) {\n\t\n\t\t\tif (i >= _from_deck.length - a.deck.length) {\n\t\t\t\tvar _id = i - (_from_deck.length | 0) + (a.deck.length | 0);\n\t\t\t\tif (a.deck[_id] && _from_deck[i].name != a.deck[_id]) {\n\t\t\t\t\t_check = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tif (_check) {\n\t\n\t\t\tvar _pop = _from.Pop(a.deck.length);\n\t\n\t\t\t// перевернуть карты во время хода\n\t\t\tif (a.flip) {\n\t\t\t\tfor (var i in _pop) {\n\t\t\t\t\t_pop[i].flip = !_pop[i].flip;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t_to.Push(_pop);\n\t\n\t\t\tif (_animation) {\n\t\n\t\t\t\tvar __pop = [];\n\t\t\t\tfor (var i in _pop) {\n\t\t\t\t\t__pop.push({\n\t\t\t\t\t\tcard: _pop[i]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\t_event2.default.dispatch('moveDragDeck', {\n\t\t\t\t\tdeparture: _from,\n\t\t\t\t\tdestination: _to,\n\t\t\t\t\tmoveDeck: __pop\n\t\t\t\t});\n\t\t\t} else // callback : function() {}\n\t\t\t\t{\n\t\t\t\t\t_from.Redraw();\n\t\t\t\t\t_to.Redraw();\n\t\t\t\t}\n\t\t} else {\n\t\t\t// _warn(4);\n\t\t\tconsole.log(\"forceMove:Ход невозможен\", a);\n\t\t}\n\t};\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _tips = __webpack_require__(6);\n\t\n\tvar _tips2 = _interopRequireDefault(_tips);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// let jquery = require(\"script!../../../frontend/js/jquery-2.2.4.min.js\");\n\t\n\t// export default jquery;\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _elClass = __webpack_require__(22);\n\t\n\tvar _elClass2 = _interopRequireDefault(_elClass);\n\t\n\tvar _allElClass = __webpack_require__(23);\n\t\n\tvar _allElClass2 = _interopRequireDefault(_allElClass);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_share2.default.set('animatedElements', 0);\n\t_share2.default.set('animatedElementsStack', []);\n\t_share2.default.set('animatedCallback', function () {});\n\t\n\tvar _allEl = function _allEl(e) {\n\t\n\t\tif (!e) {\n\t\t\tthrow new Error(\"elRender:empty arguments\");\n\t\t};\n\t\n\t\tif (typeof e == \"string\") {\n\t\n\t\t\tif (e[0] == \"#\") {\n\t\t\t\tvar _element = document.getElementById(e.slice(1, Infinity));\n\t\t\t\treturn new _elClass2.default(_element);\n\t\t\t} else if (e[0] == \".\") {\n\t\t\t\tvar _elements = document.getElementsByClassName(e.slice(1, Infinity));\n\t\t\t\treturn new _allElClass2.default(_elements);\n\t\t\t} else if (e[0] == \"<\") {\n\t\t\t\tvar _temp = document.createElement('temp');\n\t\t\t\t_temp.innerHTML = e;\n\t\t\t\tvar _element = _temp.children[0];\n\t\t\t\treturn new _elClass2.default(_element);\n\t\t\t}\n\t\t} else if (e.el || e.elements) {\n\t\t\treturn e;\n\t\t} else {\n\t\t\treturn new _elClass2.default(e);\n\t\t};\n\t};\n\t\n\t_allEl.stopAnimations = function (callback) {\n\t\n\t\t_allEl(\".animated\").css({ transition: '0s' }).removeClass(\"animated\");\n\t\n\t\t// console.log('end all animations.', _animatedElementsStack);\n\t\n\t\t/*var _animatedElementsStack = share.get('animatedElementsStack');\r\n\t \n\t for(var i in _animatedElementsStack) {\r\n\t \t_animatedElementsStack[i].el.style.transition = null;\r\n\t };\r\n\t share.set('animatedElementsStack', []);\r\n\t \n\t share.set('animatedElements', 0);\r\n\t var _animatedCallback = share.get('animatedCallback');\r\n\t _animatedCallback.call(this);\r\n\t share.set('animatedCallback', ()=>{});*/\n\t};\n\t\n\texports.default = _allEl;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar elClass = function () {\n\t\tfunction elClass(e) {\n\t\t\t_classCallCheck(this, elClass);\n\t\n\t\t\tthis.el = e;\n\t\n\t\t\tif (!e) {\n\t\t\t\t// if(window._debug) throw new Error(\"test\");\n\t\t\t\t// console.warn(\"elClass: empty arrtibutes;\");\n\t\t\t\tthis.el = null;\n\t\t\t}\n\t\t}\n\t\t// --\n\t\n\t\n\t\t_createClass(elClass, [{\n\t\t\tkey: 'attr',\n\t\t\tvalue: function attr(attributes) {\n\t\t\t\ttry {\n\t\t\t\t\tfor (var attrName in attributes) {\n\t\t\t\t\t\tthis.el[attrName] = attributes[attrName];\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'hasClass',\n\t\t\tvalue: function hasClass(className) {\n\t\t\t\ttry {\n\t\n\t\t\t\t\tvar _classes = this.el.className.split(' ');\n\t\t\t\t\treturn _classes.indexOf(className) >= 0;\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'toggleClass',\n\t\t\tvalue: function toggleClass(className) {\n\t\t\t\ttry {\n\t\n\t\t\t\t\tif (this.hasClass(className)) {\n\t\t\t\t\t\tthis.removeClass(className);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addClass(className);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'addClass',\n\t\t\tvalue: function addClass(className) {\n\t\t\t\ttry {\n\t\n\t\t\t\t\tvar _classes = this.el.className.split(' ');\n\t\t\t\t\tif (!this.hasClass(className)) {\n\t\t\t\t\t\t_classes.push(className);\n\t\t\t\t\t\tthis.el.className = _classes.join(' ');\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'removeClass',\n\t\t\tvalue: function removeClass(className) {\n\t\t\t\ttry {\n\t\t\t\t\tvar _classes = this.el.className.split(' ');\n\t\n\t\t\t\t\tif (this.hasClass(className)) {\n\t\n\t\t\t\t\t\tvar _clone = [];\n\t\t\t\t\t\tfor (var i in _classes) {\n\t\t\t\t\t\t\tif (_classes[i] != className) {\n\t\t\t\t\t\t\t\t_clone.push(_classes[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_classes = _clone;\n\t\t\t\t\t\tthis.el.className = _classes.join(' ');\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'css',\n\t\t\tvalue: function css(a) {\n\t\t\t\ttry {\n\t\n\t\t\t\t\t// console.log('CSS', this.el ? true : false, a);\n\t\n\t\t\t\t\tfor (var attrName in a) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthis.el.style[attrName] = a[attrName];\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// S.log('>>>>>', this.el, e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'hide',\n\t\t\tvalue: function hide() {\n\t\t\t\ttry {\n\t\n\t\t\t\t\treturn this.css({ 'display': 'none' });\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'show',\n\t\t\tvalue: function show() {\n\t\t\t\ttry {\n\t\n\t\t\t\t\treturn this.css({ 'display': 'block' });\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'append',\n\t\t\tvalue: function append(el) {\n\t\t\t\ttry {\n\t\n\t\t\t\t\tif (el.el) {\n\t\t\t\t\t\tel = el.el;\n\t\t\t\t\t};\n\t\t\t\t\tthis.el.appendChild(el);\n\t\t\t\t\treturn this;\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'html',\n\t\t\tvalue: function html(el) {\n\t\t\t\ttry {\n\t\n\t\t\t\t\tif (typeof el == \"undefined\") {\n\t\t\t\t\t\treturn this.el.innerHTML;\n\t\t\t\t\t};\n\t\n\t\t\t\t\tif (el.el) {\n\t\t\t\t\t\tel = el.el;\n\t\t\t\t\t};\n\t\n\t\t\t\t\tthis.el.innerHTML = el;\n\t\n\t\t\t\t\treturn this;\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'animate',\n\t\t\tvalue: function animate(params) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar animationTime = arguments.length <= 1 || arguments[1] === undefined ? _defaults2.default.animationTime : arguments[1];\n\t\t\t\tvar callback = arguments[2];\n\t\n\t\t\t\ttypeof animationTime == \"function\" && (callback = animationTime, animationTime = _defaults2.default.animationTime);\n\t\t\t\tsetTimeout(function () {\n\t\n\t\t\t\t\t_this.css({ transition: animationTime / 1000 + 's' });\n\t\t\t\t\tvar counter = 0;\n\t\t\t\t\tfor (var attrName in params) {\n\t\t\t\t\t\tif (_this.el.style[attrName] != params[attrName]) {\n\t\t\t\t\t\t\tcounter += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.el.style[attrName] = params[attrName];\n\t\t\t\t\t}\n\t\t\t\t\t_this.addClass(\"animated\");\n\t\n\t\t\t\t\t_this.el.addEventListener(\"transitionend\", function () {\n\t\t\t\t\t\tcounter -= 1;\n\t\n\t\t\t\t\t\tif (!counter) {\n\t\t\t\t\t\t\t_this.removeClass(\"animated\");\n\t\t\t\t\t\t\t_this.css({ transition: null });\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\t/*animate(params, animationTime, callback) {\r\n\t  \n\t  \tif(typeof animationTime == \"undefined\") {\r\n\t  \t\tanimationTime = defaults.animationTime;\r\n\t  \t}\r\n\t  \n\t  \tif(\r\n\t  \t\ttypeof callback      == \"undefined\" \r\n\t  \t && typeof animationTime == \"function\"\r\n\t  \t) {\r\n\t  \t\tcallback = animationTime;\r\n\t  \t\tanimationTime = defaults.animationTime;\r\n\t  \t}\r\n\t  \n\t  \tthis.done(callback);\r\n\t  \n\t  \tvar _animatedElements = share.get('animatedElements');\r\n\t  \tvar _animatedElementsStack = share.get('animatedElementsStack');\r\n\t  \t_animatedElements += 1;\r\n\t  \t_animatedElementsStack.push(this);\r\n\t  \tshare.set('animatedElements', _animatedElements);\r\n\t  \tshare.set('animatedElementsStack', _animatedElementsStack);\r\n\t  \n\t  \tvar _animateThread = function(params) {\r\n\t  \t\tthis.el.style.transition = '0.5s';\r\n\t  \t\tthis.css(params);\r\n\t  \t\tthis.el.addEventListener(\"transitionend\", function() {\r\n\t  \t\t\tif(this.el.style.transition) {\r\n\t  \t\t\t\t\r\n\t  \t\t\t\tvar _animatedElements = share.get('animatedElements');\r\n\t  \t\t\t\t_animatedElements -= 1;\r\n\t  \t\t\t\tshare.set('animatedElements', _animatedElements);\r\n\t  \t\t\t\t\r\n\t  \t\t\t\tvar _animatedCallback = share.get('animatedCallback');\r\n\t  \t\t\t\tvar _cloneCallback = _animatedCallback;\r\n\t  \t\t\t\t\r\n\t  \t\t\t\tif(share.get('animatedElements') == 0) {\r\n\t  \t\t\t\t\t_animatedCallback.call(this);\r\n\t  \t\t\t\t};\r\n\t  \t\t\t\t\r\n\t  \t\t\t\tif(\r\n\t  \t\t\t\t\tshare.get('animatedElements') == 0\r\n\t  \t\t\t\t || _cloneCallback == share.get('animatedCallback')\r\n\t  \t\t\t\t) {\r\n\t  \t\t\t\t\t_animatedCallback = function() {};\r\n\t  \t\t\t\t};\r\n\t  \t\t\t};\r\n\t  \t\t\tthis.el.style.transition = null;\r\n\t  \t\t}.bind(this), false);\r\n\t  \t}\r\n\t  \t\r\n\t  \t// Thread\r\n\t  \tsetTimeout(_animateThread.bind(this, params), 0);\r\n\t  \n\t  \treturn this;\r\n\t  }*/\n\t\n\t\t\t/*done(callback) {\r\n\t  \n\t  \tif(typeof callback == \"function\") {\r\n\t  \t\tshare.set('animatedCallback', callback);\r\n\t  \t};\r\n\t  \t\r\n\t  \treturn this;\r\n\t  }*/\n\t\t\t// --\t\n\t\n\t\t}, {\n\t\t\tkey: 'remove',\n\t\t\tvalue: function remove() {\n\t\t\t\ttry {\n\t\n\t\t\t\t\tthis.el.remove();\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\n\t\t\t/*getEl() {\r\n\t  \t\r\n\t  \treturn this.el;\r\n\t  }*/\n\t\n\t\t}, {\n\t\t\tkey: 'parent',\n\t\t\tvalue: function parent() {\n\t\t\t\treturn new elClass(this.el.parentNode);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'after',\n\t\t\tvalue: function after(html) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.el.parentNode.insertBefore(html, this.el.nextElementSibling);\n\t\t\t\t\t/*if(html.el) html = html.el;\r\n\t    \t\tvar _parentElements = this.el.parentNode.children;\r\n\t    var _newChildren = [];\r\n\t    \r\n\t    for(var i in _parentElements) {\r\n\t    \t_newChildren.push(_parentElements[i]);\r\n\t    \tif(_parentElements[i] == this.el) {\r\n\t    \t\t_newChildren.push(html);\r\n\t    \t}\r\n\t    }\r\n\t    \r\n\t    this.el.parentNode.children = _newChildren;*/\n\t\t\t\t} catch (e) {}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'before',\n\t\t\tvalue: function before(html) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.el.parentNode.insertBefore(html, this.el);\n\t\t\t\t\t/*if(html.el) html = html.el;\r\n\t    \t\tvar _parentElements = this.el.parentNode.children;\r\n\t    var _newChildren = [];\r\n\t    \r\n\t    for(var i in _parentElements) {\r\n\t    \tif(_parentElements[i] == this.el) {\r\n\t    \t\t_newChildren.push(html);\r\n\t    \t}\r\n\t    \t_newChildren.push(_parentElements[i]);\r\n\t    }\r\n\t    \r\n\t    this.el.parentNode.children = _newChildren;*/\n\t\t\t\t} catch (e) {}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'event',\n\t\t\tvalue: function event(eventName, callback) {\n\t\t\t\tthis.el.addEventListener(eventName, callback);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'click',\n\t\t\tvalue: function click(callback) {\n\t\t\t\tthis.event(callback);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn elClass;\n\t}();\n\t\n\texports.default = elClass;\n\t;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _elClass = __webpack_require__(22);\n\t\n\tvar _elClass2 = _interopRequireDefault(_elClass);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar allElClass = function () {\n\t\tfunction allElClass(elements) {\n\t\t\t_classCallCheck(this, allElClass);\n\t\n\t\t\tthis.elements = [];\n\t\n\t\t\tfor (var i in elements) {\n\t\t\t\tthis.elements.push(new _elClass2.default(elements[i]));\n\t\t\t}\n\t\t}\n\t\t// --\n\t\n\t\n\t\t_createClass(allElClass, [{\n\t\t\tkey: 'attr',\n\t\t\tvalue: function attr(attributes) {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].attr(attributes);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'toggleClass',\n\t\t\tvalue: function toggleClass(className) {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].toggleClass(className);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'addClass',\n\t\t\tvalue: function addClass(className) {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].addClass(className);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'removeClass',\n\t\t\tvalue: function removeClass(className) {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].removeClass(className);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'css',\n\t\t\tvalue: function css(a) {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].css(a);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'hide',\n\t\t\tvalue: function hide() {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].hide();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'show',\n\t\t\tvalue: function show() {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].show();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'animate',\n\t\t\tvalue: function animate(params, animationTime, callback) {\n\t\t\t\tvar counter = 0;\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tcounter += 1;\n\t\t\t\t\tthis.elements[i].animate(params, animationTime, function () {\n\t\t\t\t\t\tcounter -= 1;\n\t\t\t\t\t\tif (!counter) callback();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t// --\n\t\n\t\t}, {\n\t\t\tkey: 'remove',\n\t\t\tvalue: function remove() {\n\t\t\t\tfor (var i in this.elements) {\n\t\t\t\t\tthis.elements[i].remove();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn allElClass;\n\t}();\n\t\n\texports.default = allElClass;\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _forceMove = __webpack_require__(20);\n\t\n\tvar _forceMove2 = _interopRequireDefault(_forceMove);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _tips = __webpack_require__(6);\n\t\n\tvar _tips2 = _interopRequireDefault(_tips);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// import elRender  from 'elRender';\n\t\n\tvar _oneStepWay = [];\n\tvar _undoMethods = {};\n\tvar _redoMethods = {};\n\t\n\t// ---------------------------------------- UNDO ----------------------------------------\n\t\n\tvar _undo = function _undo(a) {\n\t\n\t\t// console.log('#undo', a);\n\t\n\t\tfor (var i in _undoMethods) {\n\t\t\t// console.log(i);\n\t\t\t_undoMethods[i](a);\n\t\t}\n\t\n\t\t// if(a.flip) {\n\t\t// };\n\t\n\t\t// if(a.unflip) {\n\t\t// \tif(\n\t\t// \t\ttypeof a.unflip.deck       == \"string\"\n\t\t// \t && typeof a.unflip.card       != \"undefined\"\n\t\t// \t && typeof a.unflip.card.name  == \"string\"\n\t\t// \t && typeof a.unflip.card.index != \"undefined\"\n\t\t// \t) {\n\t\t// \t\tvar _deck = Deck.Deck(a.unflip.deck),\n\t\t// \t\t\t_cards = _deck ? _deck.cards : [];\n\t\t// \t\tif(_cards[a.unflip.card.index].name == a.unflip.card.name) {\n\t\t// \t\t\t_cards[a.unflip.card.index].flip = true;\n\t\t// \t\t}\n\t\t// \t}\n\t\t// };\n\t\n\t\t// if(a.fill) {\n\t\t// \t// TODO\n\t\t// };\n\t\n\t\t// MOVE\n\t\tif (typeof a.move != \"undefined\" && typeof a.move.from != \"undefined\" && typeof a.move.to != \"undefined\" && typeof a.move.deck != \"undefined\") {\n\t\t\t(0, _forceMove2.default)({\n\t\t\t\tfrom: a.move.to, // from <=> to\n\t\t\t\tto: a.move.from,\n\t\t\t\tdeck: a.move.deck,\n\t\t\t\tflip: a.move.flip\n\t\t\t});\n\t\t}\n\t};\n\t\n\t_event2.default.listen('undo', function (_a) {\n\t\n\t\t// console.log('undo', _a);\n\t\n\t\t// elRender.animationsEnd();\n\t\t_event2.default.dispatch('stopAnimations');\n\t\n\t\tif (!_a) {\n\t\t\treturn;\n\t\t};\n\t\n\t\t// Обратная совместимость\n\t\tif (_a instanceof Array) {\n\t\n\t\t\t_a.reverse();\n\t\n\t\t\tfor (var _i in _a) {\n\t\t\t\tvar a = _a[_i];\n\t\t\t\t_undo(a);\n\t\t\t}\n\t\t} else {\n\t\n\t\t\t_undo(_a);\n\t\t}\n\t\n\t\t_tips2.default.checkTips();\n\t});\n\t\n\t// ---------------------------------------- REDO ----------------------------------------\n\t\n\tvar _redo = function _redo(a) {\n\t\n\t\t// console.log('#redo', a);\n\t\n\t\tfor (var i in _redoMethods) {\n\t\t\t_redoMethods[i](a);\n\t\t}\n\t\n\t\t// if(a.flip) {\n\t\t// };\n\t\n\t\t// if(a.unflip) {\n\t\t// \tif(\n\t\t// \t\ttypeof a.unflip.deck       == \"string\"\n\t\t// \t && typeof a.unflip.card       != \"undefined\"\n\t\t// \t && typeof a.unflip.card.name  == \"string\"\n\t\t// \t && typeof a.unflip.card.index != \"undefined\"\n\t\t// \t) {\n\t\t// \t\tvar _deck = Deck.Deck(a.unflip.deck),\n\t\t// \t\t\t_cards = _deck ? _deck.cards : [];\n\t\t// \t\tif(_cards[a.unflip.card.index].name == a.unflip.card.name) {\n\t\t// \t\t\t_cards[a.unflip.card.index].flip = false;\n\t\t// \t\t}\n\t\t// \t}\n\t\t// };\n\t\n\t\t// if(a.fill) {\n\t\t// \t// TODO\n\t\t// };\n\t\n\t\tif (typeof a.move != \"undefined\" && typeof a.move.from != \"undefined\" && typeof a.move.to != \"undefined\" && typeof a.move.deck != \"undefined\") {\n\t\t\t(0, _forceMove2.default)(a.move);\n\t\t}\n\t};\n\t\n\t_event2.default.listen('redo', function (_a) {\n\t\n\t\t// console.log('redo', _a);\n\t\n\t\t// elRender.animationsEnd();\n\t\t_event2.default.dispatch('stopAnimations');\n\t\n\t\tif (!_a) return;\n\t\n\t\t// Обратная совместимость\n\t\tif (_a instanceof Array) {\n\t\t\t_a.reverse();\n\t\t\tfor (var _i in _a) {\n\t\t\t\tvar a = _a[_i];\n\t\t\t\t_redo(a);\n\t\t\t}\n\t\t} else {\n\t\t\t_redo(_a);\n\t\t}\n\t\n\t\t_tips2.default.checkTips();\n\t});\n\t\n\texports.default = new function () {\n\t\n\t\tthis.reset = function () {\n\t\t\t_oneStepWay = [];\n\t\t};\n\t\n\t\tthis.add = function (step) {\n\t\n\t\t\t// console.log('History add:', step);\n\t\t\t// for(var i in step) {\n\t\t\t_oneStepWay.push(step);\n\t\t\t// }\n\t\t};\n\t\n\t\tthis.get = function () {\n\t\t\t// TODO get without reset (param)\n\t\t\tvar _req = _oneStepWay;\n\t\t\tthis.reset();\n\t\t\treturn _req;\n\t\t};\n\t\n\t\tthis.addUndoMethods = function (a) {\n\t\t\tfor (var i in a) {\n\t\t\t\t_undoMethods[i] = a[i];\n\t\t\t}\n\t\t};\n\t\n\t\tthis.addRedoMethods = function (a) {\n\t\t\tfor (var i in a) {\n\t\t\t\t_redoMethods[i] = a[i];\n\t\t\t}\n\t\t};\n\t}();\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (data) {\n\t\n\t\t// listen move ???\n\t\tif (this.name != data.eventData.to.name) {\n\t\t\treturn false;\n\t\t};\n\t\n\t\tconsole.log('KICK');\n\t\n\t\t// var _toDeck = Deck.Deck(data.actionData.to);\n\t\t// TODO CURRENT\n\t\tvar _from = data.eventData.to,\n\t\t    _deck = _from.getCardsNames();\n\t\n\t\t(0, _forceMove2.default)({\n\t\t\tfrom: _from, //this.name,\n\t\t\tto: data.actionData.to, //_decks[deckId].name,\n\t\t\tdeck: _deck, //[_cardName],\n\t\t\tflip: true //true\n\t\t});\n\t\n\t\t_history2.default.add({ 'move': {\n\t\t\t\tfrom: _from.name,\n\t\t\t\tto: data.actionData.to,\n\t\t\t\tdeck: _deck,\n\t\t\t\tflip: true\n\t\t\t} });\n\t\n\t\t_event2.default.dispatch('makeStep', _history2.default.get());\n\t\n\t\t// if(e.after) {\n\t\t// \t_events[e.after].call(this, e);\n\t\t// };\n\t};\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _forceMove = __webpack_require__(20);\n\t\n\tvar _forceMove2 = _interopRequireDefault(_forceMove);\n\t\n\tvar _history = __webpack_require__(24);\n\t\n\tvar _history2 = _interopRequireDefault(_history);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (cardId) {\n\t\n\t\tvar rulesCorrect = true; //!common.isLock();\n\t\n\t\trulesCorrect = rulesCorrect && !this.locked;\n\t\n\t\tif (typeof this.fill == \"boolean\") {\n\t\t\trulesCorrect = rulesCorrect && !this.fill;\n\t\t}\n\t\n\t\t// берём карту/стопку\n\t\t// console.log('Take', cardId);\n\t\n\t\tvar cardIndex = -1;\n\t\tvar cardName = null;\n\t\tvar cardSuit = null;\n\t\tvar cardRank = null;\n\t\tvar deckLength = this.cards.length;\n\t\n\t\t// проверяем не является ли перевернутой\n\t\n\t\tvar takeDeck = [];\n\t\n\t\tfor (var i in this.cards) {\n\t\n\t\t\tif (this.cards[i].id == cardId) {\n\t\t\t\tcardIndex = i | 0;\n\t\t\t\tcardName = this.cards[i].name;\n\t\n\t\t\t\tvar _name = _common2.default.validateCardName(cardName);\n\t\n\t\t\t\trulesCorrect = rulesCorrect && _name;\n\t\n\t\t\t\tif (_name) {\n\t\t\t\t\tcardSuit = _name.suit;\n\t\t\t\t\tcardRank = _name.rank;\n\t\t\t\t}\n\t\n\t\t\t\trulesCorrect = rulesCorrect && (!this.cards[i].flip || this.cards[i].flip == _defaults2.default.canMoveFlip);\n\t\t\t}\n\t\n\t\t\tif (cardIndex >= 0) {\n\t\t\t\ttakeDeck.push({ index: i, card: this.cards[i] });\n\t\t\t}\n\t\t}\n\t\tvar _attrs = {\n\t\t\tcardId: cardId,\n\t\t\tcardName: cardName,\n\t\t\tcardSuit: cardSuit,\n\t\t\tcardRank: cardRank,\n\t\t\tcardIndex: cardIndex,\n\t\t\tdeckLength: deckLength\n\t\t};\n\t\t// if(typeof takeRules == 'function') {\n\t\t// rulesCorrect = rulesCorrect && takeRules(_attrs);\n\t\t// TODO\n\t\t// лучше обрабатывать строку если правило одно и не нужен массив\n\t\t// } else if(typeof takeRules == 'string') {\n\t\t// } else {\n\t\tfor (var ruleIndex in this.takeRules) {\n\t\t\tvar ruleName = this.takeRules[ruleIndex];\n\t\n\t\t\t// console.log(this.takeRules);\n\t\n\t\t\tif (_readyTakeRules2.default[ruleName]) {\n\t\t\t\trulesCorrect = rulesCorrect && _readyTakeRules2.default[ruleName](_attrs);\n\t\t\t} else {\n\t\t\t\t// if(typeof takeRules[ruleIndex] == 'function') {\n\t\t\t\t// rulesCorrect = rulesCorrect && takeRules[ruleIndex](_attrs);\n\t\t\t\tconsole.log('Incorrect take rule:', ruleName);\n\t\t\t\trulesCorrect = false;\n\t\t\t}\n\t\t}\n\t\t// }\n\t\n\t\t// возвращает массив ID карт которые можно будет перетащить\n\t\t// записывает их как активные\n\t\n\t\trulesCorrect = rulesCorrect && cardIndex >= 0;\n\t\n\t\treturn rulesCorrect && takeDeck;\n\t};\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _readyTakeRules = __webpack_require__(14);\n\t\n\tvar _readyTakeRules2 = _interopRequireDefault(_readyTakeRules);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (putDeck) {\n\t\n\t\t// console.log('PUT', this.name, this.putRules);\n\t\n\t\tvar rulesCorrect = true;\n\t\n\t\tvar _deckId = putDeck[0].card.parent;\n\t\tvar _deck_departure = _addDeck2.default.getDeckById(_deckId);\n\t\n\t\trulesCorrect = rulesCorrect && !this.locked;\n\t\n\t\tfor (var ruleIndex in this.putRules) {\n\t\n\t\t\tvar ruleName = this.putRules[ruleIndex];\n\t\n\t\t\tif (_readyPutRules2.default[ruleName]) {\n\t\t\t\trulesCorrect = rulesCorrect && _readyPutRules2.default[ruleName]({\n\t\t\t\t\tfrom: {\n\t\t\t\t\t\tdeckId: _deckId,\n\t\t\t\t\t\tdeck: _deck_departure\n\t\t\t\t\t},\n\t\t\t\t\tputDeck: putDeck,\n\t\t\t\t\tcards: this.cards,\n\t\t\t\t\trulesArgs: _readyPutRules2.default[ruleName]\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.warn('putRule:', ruleName, 'not exists');\n\t\t\t\trulesCorrect = false;\n\t\t\t}\n\t\t}\n\t\n\t\treturn rulesCorrect;\n\t};\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _readyPutRules = __webpack_require__(13);\n\t\n\tvar _readyPutRules2 = _interopRequireDefault(_readyPutRules);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t;\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (name) {\n\t\t// TODO\n\t\n\t\t// console.log('genCardByName:', name);\n\t\n\t\tvar _name = _common2.default.validateCardName(name); // {color, rank}\n\t\t// var _parent = id;\n\t\n\t\tif (_name) {\n\t\n\t\t\tvar _id = 'card_' + _common2.default.genId(),\n\t\t\t    _card = {\n\t\t\t\tid: _id,\n\t\t\t\tname: name,\n\t\t\t\ttype: 'card',\n\t\t\t\t// domElement : domElement,\n\t\t\t\tvisible: true,\n\t\t\t\t// parent  : _parent,\n\t\t\t\tflip: false\n\t\t\t};\n\t\t\t_card.parent = this.getId();\n\t\n\t\t\t_event2.default.dispatch('addCardEl', _card);\n\t\n\t\t\tvar _elements = _share2.default.get('elements');\n\t\t\t_elements[_id] = _card;\n\t\t\t_share2.default.set('elements', _elements);\n\t\n\t\t\tthis.Push([_card]);\n\t\t\tthis.flipCheck();\n\t\t\tthis.Redraw();\n\t\n\t\t\treturn _card;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t;\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (a) {\n\t\n\t\t// console.log('getDecks', a)\n\t\n\t\tvar _decks = {};\n\t\tvar _elements = _share2.default.get('elements');\n\t\tfor (var d in _elements) {\n\t\t\tif (_elements[d].type == 'deck') {\n\t\t\t\tif (a && a.visible) {\n\t\t\t\t\tif (_elements[d].visible) {\n\t\t\t\t\t\t_decks[d] = _elements[d];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_decks[d] = _elements[d];\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\treturn _decks;\n\t};\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (id) {\n\t\t// ID\n\t\n\t\tvar _elements = _share2.default.get('elements');\n\t\tfor (var d in _elements) {\n\t\t\tif (_elements[d].type == 'deck' && d == id) {\n\t\t\t\treturn _elements[d];\n\t\t\t};\n\t\t};\n\t\treturn null;\n\t};\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (a) {\n\t\t// Take deck [{card, index}]\n\t\n\t\tvar _deck = [];\n\t\tfor (var i in a) {\n\t\t\tif (a[i].card && a[i].card.name) {\n\t\t\t\t_deck.push(a[i].card.name);\n\t\t\t} else if (a[i].name) {\n\t\t\t\t_deck.push(a[i].name);\n\t\t\t};\n\t\t};\n\t\treturn _deck;\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (name, groupName) {\n\t\n\t\tvar _decks = _common2.default.getElementsByName(name, 'deck');\n\t\tif (groupName && typeof groupName == 'string') {\n\t\t\tfor (var i in _decks) {\n\t\t\t\tvar _group = _common2.default.getElementById(_gecks[i].parent());\n\t\t\t\tif (_group && _group.name && _group.name == groupName) {\n\t\t\t\t\treturn _decks[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn _decks[0];\n\t\t}\n\t};\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 33 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (cardNames) {\n\t\n\t\tvar deckIndex = [];\n\t\tvar _decksLength = 0;\n\t\n\t\t// создаём карты из списка cardNames в порядке очерёдности колод (по одной карте)\n\t\tfor (var i in this.decks) {\n\t\t\t_decksLength += 1;\n\t\t\tdeckIndex.push(null);\n\t\t}\n\t\n\t\tfor (var i in this.decks) {\n\t\t\tif (this.decks[i].groupIndex && this.decks[i].groupIndex <= _decksLength) {\n\t\t\t\tdeckIndex[this.decks[i].groupIndex - 1] = true;\n\t\t\t}\n\t\t}\n\t\n\t\tfor (var i in this.decks) {\n\t\t\tif (!this.decks[i].groupIndex) {\n\t\t\t\tvar _index = 0;\n\t\t\t\tfor (; deckIndex[_index] != null; _index += 1) {}\n\t\t\t\tdeckIndex[_index] = this.decks[i].getId();\n\t\t\t}\n\t\t}\n\t\n\t\tfor (var i in this.decks) {\n\t\t\tif (this.decks[i].groupIndex && this.decks[i].groupIndex <= _decksLength) {\n\t\t\t\tdeckIndex[this.decks[i].groupIndex - 1] = this.decks[i].getId();\n\t\t\t}\n\t\t}\n\t\n\t\tvar _decksWithBigIndex = {};\n\t\tfor (var i in this.decks) {\n\t\t\tif (this.decks[i].groupIndex && this.decks[i].groupIndex > _decksLength) {\n\t\t\t\t_decksWithBigIndex[this.decks[i].groupIndex - 1] = this.decks[i].getId();\n\t\t\t}\n\t\t}\n\t\n\t\tfor (var i in _decksWithBigIndex) {\n\t\t\tvar _index = 0;\n\t\t\tfor (; deckIndex[_index] != null; _index += 1) {}\n\t\t\tdeckIndex[_index] = this.decks[_decksWithBigIndex[i]].getId();\n\t\t}\n\t\n\t\tvar _checkDeck = true;\n\t\tfor (var i in cardNames) {\n\t\t\t_checkDeck = _checkDeck && typeof cardNames[i] == 'string';\n\t\t}\n\t\n\t\tif (_checkDeck) {\n\t\t\t// циклично добавляет карты в колоды в группе (в порядке добавления)\n\t\t\tfor (var i in cardNames) {\n\t\t\t\tvar _index = deckIndex[i % deckIndex.length];\n\t\t\t\tthis.decks[_index].genCardByName(cardNames[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i in cardNames) {\n\t\t\t\tif (i < deckIndex.length) {\n\t\t\t\t\tthis.decks[deckIndex[i]].Fill(cardNames[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t;\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (_a) {\n\t\n\t\t// console.log('groupRedraw:', _a);\n\t\n\t\tvar _decks = this.getDecks();\n\t\t// var _index = {}\n\t\n\t\tif (typeof _a.decks == 'undefined' || typeof _a.decks == 'number') {\n\t\t\t_a.decks = [];\n\t\t}\n\t\n\t\tfor (var i in _decks) {\n\t\n\t\t\tif (!_a.decks[i]) {\n\t\t\t\t_a.decks[i] = {};\n\t\t\t};\n\t\n\t\t\t// changed values\n\t\t\tif (_a.position && _a.decks[i].parentPosition) {\n\t\t\t\t_a.decks[i].parentPosition = {\n\t\t\t\t\tx: _a.position.x,\n\t\t\t\t\ty: _a.position.y\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tif (_a.rotate) {\n\t\t\t\t_a.decks[i].rotate = _a.rotate;\n\t\t\t};\n\t\t\tif (_a.paddingX) {\n\t\t\t\t_a.decks[i].paddingX = _a.paddingX;\n\t\t\t};\n\t\t\tif (_a.paddingY) {\n\t\t\t\t_a.decks[i].paddingY = _a.paddingY;\n\t\t\t};\n\t\t\tif (_a.flipPaddingX) {\n\t\t\t\t_a.decks[i].flipPaddingX = _a.flipPaddingX;\n\t\t\t};\n\t\t\tif (_a.flipPaddingY) {\n\t\t\t\t_a.decks[i].flipPaddingY = _a.flipPaddingY;\n\t\t\t};\n\t\t\tif (!_a.decks[i].position) {\n\t\t\t\t_a.decks[i].position = {};\n\t\t\t};\n\t\t\tif (!_a.decks[i].parentPosition) {\n\t\t\t\t_a.decks[i].parentPosition = {};\n\t\t\t};\n\t\n\t\t\tif (!_a.decks[i].parentPosition.x && a.position && a.position.x && typeof a.position.x == 'number') {\n\t\t\t\t_a.decks[i].parentPosition.x = _a.position.x;\n\t\t\t};\n\t\n\t\t\tif (!_a.decks[i].parentPosition.y && a.position && a.position.y && typeof a.position.y == 'number') {\n\t\t\t\t_a.decks[i].parentPosition.y = _a.position.y;\n\t\t\t};\n\t\n\t\t\tif (_a.placement) {\n\t\n\t\t\t\tvar _card = _defaults2.default.card;\n\t\t\t\tif (_a.placement.x) _a.decks[i].position.x = (_a.placement.x + _card.width) * i;\n\t\t\t\tif (_a.placement.y) _a.decks[i].position.y = (_a.placement.y + _card.height) * i;\n\t\t\t};\n\t\n\t\t\tif (!_a.decks[i].rotate && _a.rotate && typeof _a.rotate == 'number') {\n\t\t\t\t_a.decks[i].rotate = _a.rotate;\n\t\t\t};\n\t\t\tif (!_a.decks[i].paddingX && _a.paddingX && typeof _a.paddingX == 'number') {\n\t\t\t\t_a.decks[i].paddingX = _a.paddingX;\n\t\t\t};\n\t\t\tif (!_a.decks[i].paddingY && _a.paddingY && typeof _a.paddingY == 'number') {\n\t\t\t\t_a.decks[i].paddingY = _a.paddingY;\n\t\t\t};\n\t\t\tif (!_a.decks[i].flipPaddingX && _a.flipPaddingX && typeof _a.flipPaddingX == 'number') {\n\t\t\t\t_a.decks[i].flipPaddingX = _a.flipPaddingX;\n\t\t\t};\n\t\t\tif (!_a.decks[i].flipPaddingY && _a.flipPaddingY && typeof _a.flipPaddingY == 'number') {\n\t\t\t\t_a.decks[i].flipPaddingY = _a.flipPaddingY;\n\t\t\t};\n\t\n\t\t\t_decks[i].Redraw(_a.decks[i]);\n\t\t};\n\t};\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t;\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _mapGenerator = __webpack_require__(36);\n\t\n\tvar _mapGenerator2 = _interopRequireDefault(_mapGenerator);\n\t\n\tvar _fanGenerator = __webpack_require__(37);\n\t\n\tvar _fanGenerator2 = _interopRequireDefault(_fanGenerator);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t\t\"count\": function count(e) {\n\t\t\t// console.log('!COUNT GENERATOR', e);\n\t\t\tvar _count = e.count;\n\t\t\tvar _decks = [];\n\t\t\tfor (var deckIndex = 0; deckIndex < _count; deckIndex += 1) {\n\t\t\t\tvar _deckName = this.name + \"_deck\" + (deckIndex + 1);\n\t\t\t\t_decks.push({\n\t\t\t\t\tname: _deckName\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn _decks;\n\t\t},\n\t\n\t\t\"map\": _mapGenerator2.default,\n\t\t\"fan\": _fanGenerator2.default\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (e) {\n\t\n\t\t// TODO\n\t\t// console.log('MAP GENERATOR', e);\n\t\n\t\tvar _decks = [];\n\t\n\t\tvar _default_placement = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\t\n\t\tvar _placement = this.placement ? {\n\t\t\tx: typeof this.placement.x != \"undefined\" ? this.placement.x : _default_placement.x,\n\t\t\ty: typeof this.placement.y != \"undefined\" ? this.placement.y : _default_placement.y\n\t\t} : _default_placement;\n\t\n\t\tthis.placement = { x: 0, y: 0 };\n\t\n\t\tvar _index = 1;\n\t\n\t\tvar _mapSize = {\n\t\t\twidth: e.map[0].length, //MAX LENGTH\n\t\t\theight: e.map.length\n\t\t};\n\t\te.map.forEach(function (e) {\n\t\t\t_mapSize.width = Math.max(_mapSize.width, e.length);\n\t\t});\n\t\n\t\tfor (var y in e.map) {\n\t\t\tfor (var x in e.map[y]) {\n\t\t\t\tif (e.map[y][x]) {\n\t\n\t\t\t\t\tvar _deck = {\n\t\t\t\t\t\t\"name\": e.map[y][x], // (this.name + \"_deck\" + _index) OR (this.name + '_' + e.map[y][x])\n\t\t\t\t\t\t\"position\": {\n\t\t\t\t\t\t\t\"x\": x * ((_defaults2.default.card.width | 0) + (_placement.x | 0)),\n\t\t\t\t\t\t\t\"y\": y * ((_defaults2.default.card.height | 0) + (_placement.y | 0))\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\n\t\t\t\t\tif (e.aroundRealtions) {\n\t\t\t\t\t\t// default false\n\t\n\t\t\t\t\t\t// CLT TOP CRT ... CORN SIDE CORN\n\t\t\t\t\t\t// LFT  *  RGT ... SIDE      SIDE\n\t\t\t\t\t\t// CLB BTM CRB ... CORN SIDE CORN\n\t\n\t\t\t\t\t\tvar _relations = [];\n\t\n\t\t\t\t\t\t// SYS: name, from (type???)\n\t\n\t\t\t\t\t\tif (inMap(y - 1, x - 1, _mapSize) && e.map[y - 1] && e.map[y - 1][x - 1]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'corn', id: 'clt', to: e.map[y - 1][x - 1] });\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inMap(y - 1, x, _mapSize) && e.map[y - 1] && e.map[y - 1][x]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'side', id: 'top', to: e.map[y - 1][x] });\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inMap(y - 1, x + 1, _mapSize) && e.map[y - 1] && e.map[y - 1][x + 1]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'corn', id: 'crt', to: e.map[y - 1][x + 1] });\n\t\t\t\t\t\t};\n\t\n\t\t\t\t\t\tif (inMap(y, x - 1, _mapSize) && e.map[y] && e.map[y][x - 1]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'side', id: 'lft', to: e.map[y][x - 1] });\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inMap(y, x + 1, _mapSize) && e.map[y] && e.map[y][x + 1]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'side', id: 'rgt', to: e.map[y][x + 1] });\n\t\t\t\t\t\t};\n\t\n\t\t\t\t\t\tif (inMap(y + 1, x - 1, _mapSize) && e.map[y + 1] && e.map[y + 1][x - 1]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'corn', id: 'clb', to: e.map[y + 1][x - 1] });\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inMap(y + 1, x, _mapSize) && e.map[y + 1] && e.map[y + 1][x]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'side', id: 'btm', to: e.map[y + 1][x] });\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (inMap(y + 1, x + 1, _mapSize) && e.map[y + 1] && e.map[y + 1][x + 1]) {\n\t\t\t\t\t\t\t_relations.push({ name: 'around', type: 'corn', id: 'crb', to: e.map[y + 1][x + 1] });\n\t\t\t\t\t\t};\n\t\n\t\t\t\t\t\t_deck.relations = _relations;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t_decks.push(_deck);\n\t\t\t\t\t_index += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// -----------------------------\n\t\n\t\t// if(e.generateDeckRelations) {}\n\t\n\t\treturn _decks;\n\t};\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar inMap = function inMap(x, y, mapSize) {\n\t\treturn x >= 0 && y >= 0 && x < mapSize.width && y < mapSize.height;\n\t};\n\t\n\t;\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (e) {\n\t    //{count, radus, center}\n\t\n\t    this.placement = {\n\t        x: 0,\n\t        y: 0\n\t    };\n\t\n\t    console.log('FAN GENERATOR', e);\n\t    //              b\n\t    //       C  ..`:   A = sin(b) * C\n\t    //     ...``   :B  B = cos(b) * C\n\t    // a.``.......+:\n\t    //        A     y 90deg\n\t    var _decks = [];\n\t\n\t    var _count = typeof e.count == \"number\" ? e.count : 3; //16\n\t    var _step = 180 / _count;\n\t    var _radius = typeof e.radius == \"number\" ? e.radius : 100; //405;\n\t    var _center = typeof e.center != \"undefined\" && typeof e.center.x != \"undefined\" && typeof e.center.y != \"undefined\" ? e.center : {\n\t        \"x\": 0,\n\t        \"y\": 0\n\t    };\n\t    var _angle = _step / 2 + 270;\n\t    var _deg = Math.PI / 180;\n\t    for (var deckIndex = 0; deckIndex < _count; deckIndex += 1) {\n\t        var _a = Math.sin(_angle * _deg) * _radius;\n\t        var _b = Math.cos(_angle * _deg) * _radius;\n\t        if (_angle > 360) _angle -= 360;\n\t        // console.log(\"lunaDeck_\" + i, _angle);\n\t        _decks.push({\n\t            \"name\": this.name + \"_deck\" + deckIndex,\n\t            \"rotate\": _angle,\n\t            \"position\": {\n\t                \"x\": _center.x + _a - _defaults2.default.card.width / 2,\n\t                \"y\": _center.y - _b - _defaults2.default.card.height / 2\n\t            }\n\t        });\n\t        _angle += _step;\n\t    }\n\t\n\t    return _decks;\n\t};\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t;\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// import elRender from 'elRender';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function () {\n\t\n\t\tvar _html = __webpack_require__(39);\n\t\n\t\t// console.log(\n\t\t// \t\"html\",\n\t\t// \t_html\n\t\t// );\n\t\t// console.log(\n\t\t// \t\"#gpCommit\",\n\t\t// \telRender(\"#gpCommit\")\n\t\t// );\n\t\t// console.log(\n\t\t// \t\"PARENT:\",\n\t\t// \telRender(\"#gpCommit\")\n\t\t// \t\t.parent()\n\t\t// );\n\t\n\t\t// elRender(\"#gpCommit\")\n\t\t// \t.parent()\n\t\t// \t.before(_html);\n\t\t$(\"#gpCommit\").parent().before(_html);\n\t\n\t\t// console.log(\"test\")\n\t};\n\t\n\t// preload preferences\n\t// clicks (apply changes)\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div style=\\\"margin:15px 0 20px 0\\\" id=cards-style-preferences> <h4 style=\\\"margin:20px 0 20px 0\\\">Настройки оформления</h4> <div> <span class=cards-style-preferences-label>Лицевая сторона:</span> <select id=pref_face class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>Англо-американская</option> </select> </div> <div> <span class=cards-style-preferences-label>Рубашка:</span> <select id=pref_back class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>Альтернативная</option> <option value=2>Красная</option> <option value=3>Синяя</option> </select> </div> <div> <span class=cards-style-preferences-label>Пустая ячейка:</span> <select id=pref_empty class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>С обводкой</option> </select> </div> </div>\";\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _storage = __webpack_require__(41);\n\t\n\tvar _storage2 = _interopRequireDefault(_storage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar onShowParameters = function onShowParameters() {\n\t\n\t\tvar pref = _storage2.default.get('pref');\n\t\t!pref && (pref = _defaults2.default.pref);\n\t\n\t\t$(\"#pref_face [value=\" + pref.face + \"]\").prop({ selected: true });\n\t\t$(\"#pref_back [value=\" + pref.back + \"]\").prop({ selected: true });\n\t\t$(\"#pref_empty [value=\" + pref.empty + \"]\").prop({ selected: true });\n\t};\n\t\n\tvar applyParameters = function applyParameters() {\n\t\n\t\tvar pref = {\n\t\t\tface: $(\"#pref_face\").val(),\n\t\t\tback: $(\"#pref_back\").val(),\n\t\t\tempty: $(\"#pref_empty\").val()\n\t\t};\n\t\n\t\t_event2.default.dispatch('fieldThemesSet', pref);\n\t\n\t\tsaveParameters(pref);\n\t};\n\t\n\tvar saveParameters = function saveParameters(pref) {\n\t\n\t\t_storage2.default.set('pref', pref);\n\t};\n\t\n\texports.default = function () {\n\t\n\t\t$(\"#bbParameters\").click(onShowParameters);\n\t\t// $(\"#gpCommit\").click(saveParameters);\n\t\t$(\".cards-style-preferences-element\").change(applyParameters);\n\t};\n\n/***/ },\n/* 41 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar storage = function () {\n\t\n\t\t// TODO настройки сохраняются для всех игр,\n\t\t// возможно нужно будет для каждой отдельно,\n\t\t// тогда в конфигурацию нужно будет включить gameId\n\t\n\t\tfunction storage() {\n\t\t\t_classCallCheck(this, storage);\n\t\n\t\t\tif (!localStorage.hasOwnProperty('SolitaireEngine')) {\n\t\t\t\tlocalStorage.SolitaireEngine = \"{}\";\n\t\t\t}\n\t\t}\n\t\n\t\t_createClass(storage, [{\n\t\t\tkey: 'set',\n\t\t\tvalue: function set(key, data) {\n\t\t\t\t// console.log('set', key);\n\t\n\t\t\t\tvar _ls = JSON.parse(localStorage.SolitaireEngine);\n\t\t\t\t// Object['assign'](_ls, data);\n\t\t\t\t_ls[key] = data;\n\t\t\t\tlocalStorage.SolitaireEngine = JSON.stringify(_ls);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'get',\n\t\t\tvalue: function get(key) {\n\t\n\t\t\t\tvar _ls = JSON.parse(localStorage.SolitaireEngine);\n\t\t\t\treturn _ls[key];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'clear',\n\t\t\tvalue: function clear() {\n\t\t\t\tlocalStorage.SolitaireEngine = \"{}\";\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn storage;\n\t}();\n\t\n\texports.default = new storage();\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _storage = __webpack_require__(41);\n\t\n\tvar _storage2 = _interopRequireDefault(_storage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t\n\t\tvar pref = _storage2.default.get('pref');\n\t\t!pref && (pref = _defaults2.default.pref);\n\t\n\t\t_event2.default.dispatch('fieldThemesSet', pref);\n\t};\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tvar _tips = __webpack_require__(6);\n\t\n\tvar _tips2 = _interopRequireDefault(_tips);\n\t\n\tvar _bestTip = __webpack_require__(8);\n\t\n\tvar _bestTip2 = _interopRequireDefault(_bestTip);\n\t\n\tvar _history = __webpack_require__(24);\n\t\n\tvar _history2 = _interopRequireDefault(_history);\n\t\n\tvar _winCheck = __webpack_require__(44);\n\t\n\tvar _winCheck2 = _interopRequireDefault(_winCheck);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Move = function Move(moveDeck, to, cursorMove) {\n\t\n\t\tif (!cursorMove.dbclick && cursorMove.distance == 0 && _share2.default.get('moveDistance') > 0) {\n\t\t\t// кликнули один раз\n\t\t\t// чтобы сделать ход нужно переместить карту стопку (moveDistance != 0)\n\t\t\treturn false;\n\t\t}\n\t\n\t\tvar _deck_destination = null,\n\t\t    // to\n\t\t_deck_departure = null,\n\t\t    // from\n\t\t_success = true;\n\t\n\t\t_success = _success && to; // to - не пустой\n\t\n\t\tvar _el = to && to.id && _common2.default.getElementById(to.id); // получаем карту/стопку\n\t\n\t\t// если положили на карту узнаём из какой она стопки\n\t\tif (_el) {\n\t\t\tif (_el.type == 'card') {\n\t\t\t\t_deck_destination = _common2.default.getElementById(_el.parent);\n\t\t\t} else if (_el.type == 'deck') {\n\t\t\t\t_deck_destination = _el;\n\t\t\t}\n\t\t}\n\t\t_success = _success && _deck_destination;\n\t\n\t\t// находим стопку из которой взяли\n\t\t_deck_departure = moveDeck[0].card.parent && _common2.default.getElementById(moveDeck[0].card.parent);\n\t\t_success = _success && _deck_departure;\n\t\n\t\t// смотрим не одна и та же ли эта стопка\n\t\tif (_deck_destination && _deck_destination.getId() != _deck_departure.getId()) {\n\t\n\t\t\t// узнаём можно ли положить карты на папку назначения\n\t\t\tvar _put = _deck_destination.Put(moveDeck);\n\t\t\t_success = _success && _put;\n\t\n\t\t\tif (_put) {\n\t\t\t\t//} && _deck_departure) {\n\t\n\t\t\t\t// если можно положить карты берём их из исходной стопки\n\t\t\t\tvar _pop = _deck_departure.Pop(moveDeck.length);\n\t\t\t\t_success = _success && _pop;\n\t\n\t\t\t\tif (_pop) {\n\t\n\t\t\t\t\t// ложим карты в колоду назначения\n\t\t\t\t\t_deck_destination.Push(_pop);\n\t\n\t\t\t\t\t// режим анимации по умолчанию\n\t\t\t\t\t_common2.default.animationDefault();\n\t\n\t\t\t\t\t_event2.default.dispatch('moveDragDeck', {\n\t\t\t\t\t\tdeparture: _deck_departure,\n\t\t\t\t\t\tdestination: _deck_destination,\n\t\t\t\t\t\tmoveDeck: moveDeck,\n\t\t\t\t\t\tcallback: function callback() {\n\t\n\t\t\t\t\t\t\t// console.log('Move:moveEnd');\n\t\n\t\t\t\t\t\t\t_event2.default.dispatch('moveEnd', {\n\t\t\t\t\t\t\t\tfrom: _deck_departure,\n\t\t\t\t\t\t\t\tto: _deck_destination,\n\t\t\t\t\t\t\t\tmoveDeck: moveDeck\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\n\t\t\t\t\t_history2.default.add({ 'move': {\n\t\t\t\t\t\t\tfrom: _deck_departure.name,\n\t\t\t\t\t\t\tto: _deck_destination.name,\n\t\t\t\t\t\t\tdeck: _addDeck2.default.deckCardNames(moveDeck)\n\t\t\t\t\t\t} });\n\t\n\t\t\t\t\tvar _deck = _deck_departure.cards;\n\t\t\t\t\tif (_deck.length && _deck[_deck.length - 1].flip) {\n\t\t\t\t\t\t_deck[_deck.length - 1].flip = false;\n\t\t\t\t\t\t_history2.default.add({ unflip: {\n\t\t\t\t\t\t\t\tdeck: _deck_departure.name,\n\t\t\t\t\t\t\t\tcard: {\n\t\t\t\t\t\t\t\t\tname: _deck[_deck.length - 1].name,\n\t\t\t\t\t\t\t\t\tindex: _deck.length - 1\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} });\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// console.log('afterStep:', _deck_destination.afterStep);\n\t\n\t\t\t\t\tif (!_deck_destination.afterStep) {\n\t\t\t\t\t\t// typeof _deck_destination.afterStep == \"function\"\n\t\t\t\t\t\t// console.log('Move:makeStep');\n\t\t\t\t\t\t_event2.default.dispatch('makeStep', _history2.default.get());\n\t\t\t\t\t};\n\t\n\t\t\t\t\t_winCheck2.default.winCheck({ show: true });\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// карту отпустили на той же стопке\n\t\t\t// + минимальное неоходимое расстояние для автохода не пройдено\n\t\t\t_success = false;\n\t\t}\n\t\n\t\t// если не кдалось положить карты, вернуть обратно\n\t\t// или положить на лучшее возможное место\n\t\tif (!_success && _deck_departure) {\n\t\n\t\t\tvar _field = (0, _field3.default)();\n\t\t\tif (_field.inputParams.doubleClick && cursorMove.dbclick || cursorMove.distance >= _share2.default.get('moveDistance')) {\n\t\n\t\t\t\tvar Tip = (0, _bestTip2.default)(moveDeck, cursorMove);\n\t\n\t\t\t\tif (Tip) {\n\t\t\t\t\tconsole.log('###', Tip);\n\t\t\t\t\tMove(moveDeck, Tip.to.deck.domElement.el, cursorMove);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t_event2.default.dispatch('moveCardToHome', {\n\t\t\t\t\t\tmoveDeck: moveDeck,\n\t\t\t\t\t\tdeparture: _deck_departure\n\t\t\t\t\t});\n\t\t\t\t\t// share.moveCardToHome();\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t_event2.default.dispatch('moveCardToHome', {\n\t\t\t\t\tmoveDeck: moveDeck,\n\t\t\t\t\tdeparture: _deck_departure\n\t\t\t\t});\n\t\t\t};\n\t\t};\n\t\n\t\t// console.log('_success', _success);\n\t\n\t\t// if(_success) {\n\t\n\t\t// afterMove();\n\t\t_tips2.default.checkTips();\n\t\t// }\n\t};\n\t\n\t// console.log('>>>')\n\t_event2.default.listen('Move', function (e) {\n\t\n\t\tconsole.log('Move ->');\n\t\n\t\tMove(e.moveDeck, e.to, e.cursorMove);\n\t});\n\t\n\t// export default Move;\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _winCheckMethods = __webpack_require__(45);\n\t\n\tvar _winCheckMethods2 = _interopRequireDefault(_winCheckMethods);\n\t\n\tvar _addDeck = __webpack_require__(11);\n\t\n\tvar _addDeck2 = _interopRequireDefault(_addDeck);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar winCheck = function winCheck(params) {\n\t\n\t\t// console.log('%cWIN CHECK', 'background : red');\n\t\n\t\tvar rulesCorrect = true;\n\t\tvar _hasMetods = false;\n\t\tvar _winCheck = _share2.default.get('winCheck');\n\t\n\t\t// console.log('winCheck', params, _winCheck);\n\t\n\t\tfor (var ruleName in _winCheck.rules) {\n\t\t\t_hasMetods = true;\n\t\n\t\t\tif (_winCheckMethods2.default[ruleName]) {\n\t\n\t\t\t\trulesCorrect = rulesCorrect && _winCheckMethods2.default[ruleName]({\n\t\t\t\t\tdecks: _addDeck2.default.getDecks({ visible: true }),\n\t\t\t\t\trulesArgs: _winCheck.rules[ruleName]\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trulesCorrect = rulesCorrect && _winCheckMethods2.default['newerWin']();\n\t\t\t}\n\t\t}\n\t\n\t\tif (!_hasMetods) {\n\t\t\trulesCorrect = rulesCorrect && _winCheckMethods2.default['newerWin']();\n\t\t}\n\t\n\t\tif (rulesCorrect) {\n\t\t\tif (params && params.noCallback) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t_event2.default.dispatch('win', params);\n\t\t\t// a.winCheck.callback();\n\t\t\treturn true;\n\t\t}\n\t\n\t\treturn false;\n\t};\n\t\n\tvar hwinCheck = function hwinCheck(a) {\n\t\tif (!a) {\n\t\t\ta = {};\n\t\t}\n\t\tif (typeof a.show == 'undefined') {\n\t\t\ta.show = false;\n\t\t}\n\t\t// console.log('winCheck', a);\n\t\twinCheck(a);\n\t\t// return winCheck({noCallback : true});\n\t};\n\t\n\texports.default = {\n\t\twinCheck: winCheck,\n\t\thwinCheck: hwinCheck\n\t};\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/*\r\n\t * Client-server application for planning biomechanical stimulation\r\n\t * version: 1.0\r\n\t * author: Romasan\r\n\t * date: 05.05.2016\r\n\t */\n\t\n\t// import share    from 'share';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar wcm = {\n\t\t// Filters\n\t\n\t\t// возвращает колоды определённой группы/групп\n\t\tgroup: function group(a) {\n\t\n\t\t\t// console.log(\"winCheck:group\", a);\n\t\n\t\t\tif (!a.filter || !a.filterArgs) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\tvar _decks = [];\n\t\t\tfor (var _i in a.decks) {\n\t\n\t\t\t\t// console.log('group filter:', _i, a.decks[_i].parent, a.filterArgs);\n\t\t\t\t// var _parent = a.decks[_i].parent\n\t\t\t\t// if(a.filterArgs.indexOf(a.decks[_i].parent)) {\n\t\t\t\tif (typeof a.filterArgs == \"string\" && a.decks[_i].parent == a.filterArgs || a.filterArgs.length && a.filterArgs.indexOf(a.decks[_i].parent) >= 0) {\n\t\t\t\t\t_decks.push(a.decks[_i]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\ta.decks = _decks;\n\t\t\treturn _decks.length;\n\t\t},\n\t\n\t\tgroups: function groups(a) {\n\t\t\treturn wcm.group(a);\n\t\t},\n\t\n\t\t// groups : function() {},\n\t\n\t\t// Internal use\n\t\n\t\t_asc_desk: function _asc_desk(a) {\n\t\n\t\t\tif (!a || a.asc_desk == null || typeof a.asc_desk != 'number') return false;\n\t\n\t\t\tvar _correct = true;\n\t\n\t\t\tfor (var d in a.decks) {\n\t\n\t\t\t\t// console.log('_asc_desk', a.asc_desk ? 'asc' : 'desk', a.asc_desk, d, a.decks[d], _correct, a.decks[d].cards);\n\t\t\t\tif (!_correct) return false;\n\t\n\t\t\t\tvar _cards = a.decks[d].cards;\n\t\t\t\t// console.log('cards:', _cards);\n\t\t\t\tfor (var c in _cards) {\n\t\t\t\t\tif (c > 0) {\n\t\t\t\t\t\tvar down = _common2.default.validateCardName(_cards[(c | 0) - 1].name),\n\t\t\t\t\t\t    up = _common2.default.validateCardName(_cards[c | 0].name);\n\t\t\t\t\t\t// console.log('_asc_desk', down, up, a.asc_desk);\t\n\t\t\t\t\t\tvar _cardsRankS = _defaults2.default.card.ranks;\n\t\t\t\t\t\t_correct = _correct && down && up && _cardsRankS.indexOf(down.rank) == _cardsRankS.indexOf(up.rank) + a.asc_desk;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _correct;\n\t\t},\n\t\n\t\t// Simple rules\n\t\n\t\tnewerWin: function newerWin() {\n\t\t\tconsole.warn(\"You use 'newerWin' rule for checking Win. Maybe arguments in 'winCheck.rule' have incorrect rule name.\");\n\t\t\treturn false;\n\t\t},\n\t\n\t\t// все колоды пусты\n\t\n\t\tallEmpty: function allEmpty(a) {\n\t\n\t\t\tvar _correct = true;\n\t\t\tfor (var _i in a.decks) {\n\t\t\t\t_correct = _correct && a.decks[_i].cards.length == 0;\n\t\t\t}\n\t\t\treturn _correct;\n\t\t},\n\t\n\t\t// Combined rules (use like filter)\n\t\n\t\t// все карты в одной колоде\n\t\tallInOne: function allInOne(a) {\n\t\n\t\t\t// console.log('check Win, rule/filter - allInOne:', a);\n\t\n\t\t\tvar _emptyDecksCount = 0,\n\t\t\t    _decksLength = 0,\n\t\t\t    _fillIndex = 0;\n\t\t\tfor (var i in a.decks) {\n\t\t\t\tif (a.decks[i].cards.length == 0) {\n\t\t\t\t\t_emptyDecksCount += 1;\n\t\t\t\t} else {\n\t\t\t\t\t_fillIndex = i;\n\t\t\t\t}\n\t\t\t\t_decksLength += 1;\n\t\t\t}\n\t\t\t// console.log('allinone', a, _emptyDecksCount, _decksLength);\n\t\t\tvar _correct = _emptyDecksCount == _decksLength - 1;\n\t\t\tif (a.filter) {\n\t\t\t\ta.decks = _correct ? [a.decks[_fillIndex]] : [];\n\t\t\t}\n\t\t\treturn _correct;\n\t\t},\n\t\n\t\t// step by step 1, 2, 3\n\t\t// во всех колодах карты по возрастанию\n\t\tallAscend: function allAscend(a) {\n\t\n\t\t\t// console.log('check Win, rule - allAscending:', a);\n\t\t\ta.asc_desk = -1;\n\t\t\treturn wcm._asc_desk(a);\n\t\t},\n\t\n\t\t// step by step 3, 2, 1\n\t\t// во всех колодах карты по убыванию\n\t\tallDescent: function allDescent(a) {\n\t\n\t\t\ta.asc_desk = 1;\n\t\t\treturn wcm._asc_desk(a);\n\t\t},\n\t\n\t\t// Composite rules (input arguments)\n\t\t// комбинированное правило\n\t\n\t\tlego: function lego(_a) {\n\t\n\t\t\t// console.log('LEGO', _a);//a.rulesArgs.filters, a.rulesArgs.rules)\n\t\n\t\t\tif (!_a || !_a.rulesArgs) return false;\n\t\n\t\t\tvar _correct = true;\n\t\n\t\t\t// apply filters\n\t\t\tfor (var next in _a.rulesArgs) {\n\t\n\t\t\t\tvar _decksClone = {};\n\t\t\t\tfor (var i in _a.decks) {\n\t\t\t\t\t_decksClone[i] = _a.decks[i];\n\t\t\t\t}\n\t\t\t\tvar a = {\n\t\t\t\t\t// filters : _a[next].filters,\n\t\t\t\t\t// rules   : _a[next].rules,\n\t\t\t\t\tdecks: _decksClone\n\t\t\t\t};\n\t\n\t\t\t\t// применяем фильтры, оставляем только интересующие колоды\n\t\n\t\t\t\tif (_correct && _a.rulesArgs[next].filters) {\n\t\n\t\t\t\t\ta.filter = true;\n\t\n\t\t\t\t\tfor (var i in _a.rulesArgs[next].filters) {\n\t\t\t\t\t\tif (typeof _a.rulesArgs[next].filters[i] == 'string' && wcm[_a.rulesArgs[next].filters[i]]) {\n\t\t\t\t\t\t\ta.filterArgs = null;\n\t\t\t\t\t\t\t_correct = _correct && wcm[_a.rulesArgs[next].filters[i]](a);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// if(typeof _a.rulesArgs[next].filters[i] == 'object') {\n\t\t\t\t\t\t\tif (_a.rulesArgs[next].filters[i] && _a.rulesArgs[next].filters[i].toString() == \"[object Object]\") {\n\t\t\t\t\t\t\t\tfor (var filterName in _a.rulesArgs[next].filters[i]) {\n\t\t\t\t\t\t\t\t\tif (wcm[filterName]) {\n\t\t\t\t\t\t\t\t\t\ta.filterArgs = _a.rulesArgs[next].filters[i][filterName];\n\t\t\t\t\t\t\t\t\t\t_correct = _correct && wcm[filterName](a);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t_correct = _correct && wcm['newerWin']();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_correct = _correct && wcm['newerWin']();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\ta.filter = false;\n\t\t\t\t}\n\t\n\t\t\t\t// применяем правила к оставшимся колодам\n\t\n\t\t\t\tif (_a.rulesArgs[next].rules) {\n\t\n\t\t\t\t\tfor (var i in _a.rulesArgs[next].rules) {\n\t\t\t\t\t\tif (wcm[_a.rulesArgs[next].rules[i]]) {\n\t\t\t\t\t\t\t_correct = _correct && wcm[_a.rulesArgs[next].rules[i]](a);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log('#2');\n\t\t\t\t\t\t\t_correct = _correct && wcm['newerWin']();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn _correct;\n\t\t}\n\t};\n\t\n\texports.default = wcm;\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tvar _initField = __webpack_require__(47);\n\t\n\tvar _initField2 = _interopRequireDefault(_initField);\n\t\n\tvar _drawDeck = __webpack_require__(48);\n\t\n\tvar _drawDeck2 = _interopRequireDefault(_drawDeck);\n\t\n\tvar _drawCard = __webpack_require__(49);\n\t\n\tvar _drawCard2 = _interopRequireDefault(_drawCard);\n\t\n\tvar _drawTip = __webpack_require__(50);\n\t\n\tvar _drawTip2 = _interopRequireDefault(_drawTip);\n\t\n\tvar _moveDragDeck = __webpack_require__(51);\n\t\n\tvar _moveDragDeck2 = _interopRequireDefault(_moveDragDeck);\n\t\n\tvar _moveCardToHome = __webpack_require__(52);\n\t\n\tvar _moveCardToHome2 = _interopRequireDefault(_moveCardToHome);\n\t\n\tvar _fieldThemesSet = __webpack_require__(53);\n\t\n\tvar _fieldThemesSet2 = _interopRequireDefault(_fieldThemesSet);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_event2.default.listen('removeEl', function (e) {\n\t\t(0, _elRender2.default)(e.domElement).remove();\n\t});\n\t\n\t_event2.default.listen('showCard', function (target) {\n\t\t(0, _elRender2.default)(target).show();\n\t});\n\t\n\t_event2.default.listen('hideCard', function (target) {\n\t\t(0, _elRender2.default)(target).hide();\n\t});\n\t\n\t_event2.default.listen('stopAnimations', function () {\n\t\t_elRender2.default.stopAnimations();\n\t});\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_event2.default.listen('initField', function (e) {\n\t\n\t\t// console.log('initField');\n\t\n\t\tvar domElement = e.a.field ? e.a.field : '#mat'; // default;\n\t\tif (typeof domElement == 'string') {\n\t\t\tif (domElement.split('.').length == 2) {\n\t\t\t\tdomElement = document.getElementsByClassName(domElement.split('.')[1])[0];\n\t\t\t} else if (domElement.split('#').length == 2) {\n\t\t\t\tdomElement = document.getElementById(domElement.split('#')[1]);\n\t\t\t} else {\n\t\t\t\tdomElement = document.getElementsByTagName(domElement);\n\t\t\t}\n\t\t\tif (!domElement) {\n\t\t\t\tdomElement = document.getElementById('mat');\n\t\t\t}\n\t\t};\n\t\t// share.field = e.field;\n\t\tvar _field = (0, _field3.default)();\n\t\t_field.domElement = domElement;\n\t\n\t\tvar _params = {};\n\t\n\t\tif (e.a.width && typeof e.a.width == 'number') {\n\t\t\t_params.width = e.a.width + 'px';\n\t\t}\n\t\tif (e.a.height && typeof e.a.height == 'number') {\n\t\t\t_params.height = e.a.height + 'px';\n\t\t}\n\t\tif (e.a.top && typeof e.a.top == 'number') {\n\t\t\t_params.top = e.a.top + 'px';\n\t\t}\n\t\tif (e.a.left && typeof e.a.left == 'number') {\n\t\t\t_params.left = e.a.left + 'px';\n\t\t}\n\t\n\t\tvar _zoom = _share2.default.get('zoom');\n\t\t(_zoom != _defaults2.default.zoom || _zoom != 1) && (_params.transform = 'scale(' + _zoom + ')', _params['transform-origin'] = '0 0');\n\t\t// if(a.rotate && typeof a.rotate == 'number') _params.transform = 'rotate(' + (a.rotate|0) + 'deg)';\n\t\n\t\tvar themeName = typeof e.a.theme == 'string' ? e.a.theme : _typeof(e.a.theme) == 'object' && e.a.theme.name ? e.a.theme.name : _defaults2.default.theme.name;\n\t\n\t\t(0, _elRender2.default)(domElement).css(_params).addClass('field').addClass(themeName);\n\t});\n\n/***/ },\n/* 48 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar applyChangedParameters = function applyChangedParameters(p, a, deck) {\n\t\n\t\t// console.log('applyChangedParameters', a);\n\t\n\t\tp.x = a.position && a.position.x && typeof a.position.x == 'number' ? a.position.x : 0, p.y = a.position && a.position.y && typeof a.position.y == 'number' ? a.position.y : 0;\n\t\tp.x = a.parentPosition && a.parentPosition.x ? p.x + a.parentPosition.x : p.x;\n\t\tp.y = a.parentPosition && a.parentPosition.y ? p.y + a.parentPosition.y : p.y;\n\t\n\t\tdeck.rotate = p.rotate = a.rotate && typeof a.rotate == 'number' ? a.rotate : 0;\n\t\n\t\t// у padding_x, padding_y приоритет выше чем paddingType\n\t\n\t\tp.padding_y = a.paddingY && typeof a.paddingY == 'number' ? a.paddingY : a.paddingType ? _defaults2.default.padding_y : 0, p.padding_x = a.paddingX && typeof a.paddingX == 'number' ? a.paddingX : a.paddingType ? _defaults2.default.padding_x : 0, p.flip_padding_y = a.flipPaddingY && typeof a.flipPaddingY == 'number' ? a.flipPaddingY : a.paddingType ? _defaults2.default.flip_padding_y : 0, p.flip_padding_x = a.flipPaddingX && typeof a.flipPaddingX == 'number' ? a.flipPaddingX : a.paddingType ? _defaults2.default.flip_padding_x : 0;\n\t};\n\t\n\t// --------------------------------------------------------------------------------------------------------\n\t\n\t_event2.default.listen('addDeckEl', function (e) {\n\t\n\t\tvar _field = (0, _field3.default)();\n\t\n\t\t// console.log('addDeckEl', e);\n\t\n\t\tapplyChangedParameters(e.params, e.a, e.deck);\n\t\n\t\te.deck.domElement = (0, _elRender2.default)('<div>');\n\t\t// .getEl();\n\t\n\t\tvar _params = {\n\t\t\tleft: e.params.x + 'px',\n\t\t\ttop: e.params.y + 'px',\n\t\t\twidth: _defaults2.default.card.width + 'px',\n\t\t\theight: _defaults2.default.card.height + 'px',\n\t\t\ttransform: 'rotate(' + (e.params.rotate | 0) + 'deg)'\n\t\t};\n\t\n\t\t_params.display = e.deck.visible ? 'block' : 'none';\n\t\n\t\t(0, _elRender2.default)(e.deck.domElement).css(_params).addClass('el').attr({\n\t\t\tid: e.deck.getId()\n\t\t});\n\t\n\t\t// var showSlot = e.a.showSlot && typeof e.a.showSlot == 'boolean' ? e.a.showSlot : defaults.showSlot;\n\t\t// console.log('slot', e.a);\n\t\tif (e.a.showSlot) {\n\t\t\t(0, _elRender2.default)(e.deck.domElement).addClass('slot');\n\t\t}\n\t\tif (e.a.class) {\n\t\t\t(0, _elRender2.default)(e.deck.domElement).addClass(e.a.class);\n\t\t}\n\t\n\t\t(0, _elRender2.default)(_field.domElement).append(e.deck.domElement);\n\t\n\t\t// add label\n\t\n\t\tvar label = e.a.label && typeof e.a.label == 'string' ? e.a.label : null;\n\t\n\t\t// console.log('debugLabels -->', share.get('debugLabels'));\n\t\n\t\tif (!e.a.label && _share2.default.get('debugLabels')) {\n\t\t\tlabel = '<span style=\"color:#65B0FF;\">' + e.deck.name + '</span>';\n\t\t}\n\t\tif (label) {\n\t\t\tvar _labelElement = (0, _elRender2.default)('<div>').addClass('deckLabel')\n\t\t\t// DEBUG, TODO remove next string\n\t\t\t.attr({\n\t\t\t\t\"title\": e.deck.getId() + \" (\" + e.deck.parent + \")\"\n\t\t\t});\n\t\t\t// .getEl();\n\t\t\t(0, _elRender2.default)(_labelElement).html(label);\n\t\t\t(0, _elRender2.default)(e.deck.domElement).append(_labelElement);\n\t\t}\n\t});\n\t\n\t// --------------------------------------------------------------------------------------------------------\n\t\n\t_event2.default.listen('redrawDeckFlip', function (e) {\n\t\n\t\tif (!e || !e.cards) return;\n\t\n\t\tfor (var i in e.cards) {\n\t\t\tvar _params = {};\n\t\n\t\t\tif (e.cards[i].flip) {\n\t\t\t\t(0, _elRender2.default)(e.cards[i].domElement).addClass('flip');\n\t\t\t} else {\n\t\t\t\t(0, _elRender2.default)(e.cards[i].domElement).removeClass('flip');\n\t\t\t}\n\t\t\t(0, _elRender2.default)(e.cards[i].domElement).css(_params);\n\t\t}\n\t});\n\t\n\t// --------------------------------------------------------------------------------------------------------\n\t\n\t_event2.default.listen('redrawDeckIndexes', function (e) {\n\t\n\t\tconsole.log('redrawDeckPaddings:', e);\n\t\n\t\tif (!e || !e.cards) return;\n\t\n\t\tfor (var i in e.cards) {\n\t\t\t(0, _elRender2.default)(e.cards[i].domElement).css({\n\t\t\t\t'z-index': (_defaults2.default.startZIndex | 0) + (i | 0)\n\t\t\t});\n\t\t}\n\t});\n\t\n\t// --------------------------------------------------------------------------------------------------------\n\t\n\t_event2.default.listen('redrawDeck', function (e) {\n\t\n\t\t// console.log('redrawDeck', share.get('noRedraw'));\n\t\n\t\tif (_share2.default.get('noRedraw')) {\n\t\t\treturn false;\n\t\t};\n\t\n\t\tif (e.data) {\n\t\t\tapplyChangedParameters(e.params, e.data, e.deck);\n\t\n\t\t\tif (e.data.paddingX) _share2.default.get('padding_x', e.data.paddingX);\n\t\t\tif (e.data.flipPaddingX) _share2.default.get('flip_padding_x', e.data.flipPaddingX);\n\t\t\tif (e.data.paddingY) _share2.default.get('padding_y', e.data.paddingY);\n\t\t\tif (e.data.flipPaddingY) _share2.default.get('flip_padding_y', e.data.flipPaddingY);\n\t\t}\n\t\n\t\tvar _params = {\n\t\t\tleft: e.params.x,\n\t\t\ttop: e.params.y,\n\t\t\ttransform: 'rotate(' + (e.params.rotate | 0) + 'deg)'\n\t\t};\n\t\n\t\t_params.display = e.deck.visible ? 'block' : 'none';\n\t\n\t\t// console.log('DECK REDRAW', e.deck.domElement);\n\t\n\t\t(0, _elRender2.default)(e.deck.domElement).css(_params);\n\t\n\t\tfor (var i in e.cards) {\n\t\t\tvar _card_position = e.deck.padding(i);\n\t\t\tvar _zIndex = (e.params.startZIndex | 0) + (i | 0);\n\t\t\t// console.log('>>> Z-INDEX:', e.deck.name, _zIndex);\n\t\t\tvar _params = {\n\t\t\t\t'left': _card_position.x + 'px',\n\t\t\t\t'top': _card_position.y + 'px',\n\t\t\t\t'z-index': _zIndex,\n\t\t\t\t'-ms-transform': 'rotate(' + (e.params.rotate | 0) + 'deg)',\n\t\t\t\t'-webkit-transform': 'rotate(' + (e.params.rotate | 0) + 'deg)',\n\t\t\t\t'-moz-transform': 'rotate(' + (e.params.rotate | 0) + 'deg)',\n\t\t\t\t'transform': 'rotate(' + (e.params.rotate | 0) + 'deg)'\n\t\t\t};\n\t\t\t_params.display = e.deck.visible ? 'block' : 'none';\n\t\n\t\t\t// e.deck.checkFlip(e.cards[i], i|0, e.cards.length|0);\n\t\n\t\t\tif (e.cards[i].flip) {\n\t\t\t\t(0, _elRender2.default)(e.cards[i].domElement).addClass('flip');\n\t\t\t} else {\n\t\t\t\t(0, _elRender2.default)(e.cards[i].domElement).removeClass('flip');\n\t\t\t}\n\t\t\t(0, _elRender2.default)(e.cards[i].domElement).css(_params);\n\t\t}\n\t});\n\n/***/ },\n/* 49 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_event2.default.listen('addCardEl', function (e) {\n\t\n\t\tvar _field = (0, _field3.default)();\n\t\n\t\tvar _card = {\n\t\t\twidth: _defaults2.default.card.width,\n\t\t\theight: _defaults2.default.card.height\n\t\t};\n\t\t_card = {\n\t\t\twidth: _card.width.toFixed(3) * 1,\n\t\t\theight: _card.height.toFixed(3) * 1\n\t\t};\n\t\n\t\tvar _params = {\n\t\t\t\"width\": _card.width + 'px',\n\t\t\t\"height\": _card.height + 'px'\n\t\t};\n\t\n\t\t// TODO Переписать на SASS\n\t\t/*if(share.get('spriteTexture')) {\r\n\t \tvar _vcard = common.validateCardName(e.name),\r\n\t \t_position = {\r\n\t \t\tx : defaults.card.ranks      .indexOf(_vcard.rank),\r\n\t \t\ty : share.get('textureSuits').indexOf(_vcard.suit),\r\n\t \t};\r\n\t \n\t \tvar _backgroundSize = {\r\n\t \t\t\twidth  : defaults.card.ranks.length * _card.width,\r\n\t \t\t\theight : defaults.card.suits.length * _card.height\r\n\t \t\t},\r\n\t \t\t_backgroundPosition = {\r\n\t \t\t\tx : _position.x * _card.width,\r\n\t \t\t\ty : _position.y * _card.height\r\n\t \t\t};\r\n\t \t_backgroundSize = {\r\n\t \t\twidth  : _backgroundSize.width .toFixed(3) * 1,\r\n\t \t\theight : _backgroundSize.height.toFixed(3) * 1\r\n\t \t};\r\n\t \t_backgroundPosition = {\r\n\t \t\tx : _backgroundPosition.x.toFixed(3) * 1,\r\n\t \t\ty : _backgroundPosition.y.toFixed(3) * 1\r\n\t \t};\r\n\t \n\t \t_params[\"background-size\"]     = _backgroundSize.width + 'px ' + _backgroundSize.height + 'px';\r\n\t \t_params[\"background-position\"] = _backgroundPosition.x + 'px ' + _backgroundPosition.y  + 'px';\r\n\t }*/\n\t\n\t\te.domElement = (0, _elRender2.default)('<div>');\n\t\t// .getEl();\n\t\n\t\t(0, _elRender2.default)(e.domElement)\n\t\t// .addClass(e.name)\n\t\t.addClass('el card draggable ' + e.name)\n\t\t// .css({'background-size' : null})\n\t\t.css(_params).attr({\n\t\t\tid: e.id\n\t\t});\n\t\t(0, _elRender2.default)(_field.domElement).append(e.domElement);\n\t});\n\t\n\t_event2.default.listen('hideCard', function (e) {\n\t\n\t\t// console.log('hideCard:', e);\n\t\tif (e && e.domElement) {\n\t\t\t(0, _elRender2.default)(e.domElement[0]).hide();\n\t\t}\n\t});\n\t\n\t_event2.default.listen('showCard', function (e) {\n\t\n\t\t// console.log('showCard:', e);\n\t\tif (e && e.domElement) {\n\t\t\t(0, _elRender2.default)(e.domElement[0]).show();\n\t\t}\n\t});\n\n/***/ },\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tvar _tips = __webpack_require__(6);\n\t\n\tvar _tips2 = _interopRequireDefault(_tips);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_event2.default.listen('showTip', function (e) {\n\t\n\t\t// console.log('showTip', e);\n\t\n\t\tif (e && e.el && e.el.domElement && e.type) {\n\t\t\t(0, _elRender2.default)(e.el.domElement).addClass(e.type);\n\t\t}\n\t});\n\t\n\t_event2.default.listen('hideTips', function (e) {\n\t\n\t\t// console.log('hideTips', e);\n\t\n\t\tif (e && e.types) {\n\t\t\tfor (var i in e.types) {\n\t\t\t\tvar typeName = e.types[i];\n\t\t\t\t(0, _elRender2.default)('.' + typeName).removeClass(typeName);\n\t\t\t}\n\t\t} else {\n\t\n\t\t\tfor (var i in _tips2.default.tipTypes) {\n\t\t\t\tvar typeName = _tips2.default.tipTypes[i];\n\t\t\t\t(0, _elRender2.default)('.' + typeName).removeClass(typeName, 777);\n\t\t\t}\n\t\t}\n\t});\n\n/***/ },\n/* 51 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar angleValidate = function angleValidate(_angle) {\n\t\tif (_angle < 0) {\n\t\t\t_angle = 360 + _angle;\n\t\t};\n\t\tif (_angle > 360) {\n\t\t\t_angle = _angle - 360;\n\t\t};\n\t\treturn _angle;\n\t};\n\t\n\t_event2.default.listen('moveDragDeck', function (e) {\n\t\n\t\tconsole.log('moveDragDeck', e);\n\t\n\t\t_common2.default.curLock();\n\t\n\t\tfor (var i in e.moveDeck) {\n\t\n\t\t\tvar _position = e.destination.padding(e.destination.cards.length - 1 + (i | 0));\n\t\n\t\t\tvar departureAngle = angleValidate(e.departure.rotate),\n\t\t\t    destinationAngle = angleValidate(e.destination.rotate);\n\t\n\t\t\t(0, _elRender2.default)(e.moveDeck[i].card.domElement).css({\n\t\t\t\t'transform': 'rotate(' + departureAngle + 'deg)'\n\t\t\t});\n\t\n\t\t\tif (departureAngle - destinationAngle > 180) {\n\t\n\t\t\t\tdepartureAngle = departureAngle - 360;\n\t\t\t\t(0, _elRender2.default)(e.moveDeck[i].card.domElement).css({\n\t\t\t\t\t'transform': 'rotate(' + departureAngle + 'deg)'\n\t\t\t\t});\n\t\t\t};\n\t\n\t\t\tif (departureAngle - destinationAngle < -180) {\n\t\t\t\tdestinationAngle = destinationAngle - 360;\n\t\t\t}\n\t\n\t\t\tvar _params = {\n\t\t\t\t'left': _position.x + 'px',\n\t\t\t\t'top': _position.y + 'px',\n\t\t\t\t'transform': 'rotate(' + destinationAngle + 'deg)'\n\t\t\t};\n\t\n\t\t\tvar _zIndex = (_defaults2.default.topZIndex | 0) + (i | 0);\n\t\t\t// console.log('_zIndex :', _zIndex);\n\t\t\t(0, _elRender2.default)(e.moveDeck[i].card.domElement).css({ 'z-index': _zIndex }).animate(_params, function (e) {\n\t\n\t\t\t\te.departure.Redraw();\n\t\t\t\te.destination.Redraw();\n\t\n\t\t\t\t_common2.default.curUnLock();\n\t\n\t\t\t\tif (typeof e.callback == \"function\") {\n\t\t\t\t\te.callback();\n\t\t\t\t};\n\t\n\t\t\t\t_event2.default.dispatch('moveDragDeckDone', {\n\t\t\t\t\tdeck: e.destination\n\t\t\t\t});\n\t\t\t}.bind(this, e));\n\t\n\t\t\t// elRender(e.moveDeck[i].card.domElement)\n\t\t\t// .animate(_params)\n\t\t}\n\t});\n\t\n\t// --------------------------------------------------------------------------------------------------------\n\t\n\t_event2.default.listen('moveDragDeckDone', function (e) {\n\t\n\t\tif (!e.deck.fill) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar _deck = e.deck.cards;\n\t\tfor (var i in _deck) {\n\t\t\t(0, _elRender2.default)(_deck[i].domElement).addClass('fill');\n\t\t}\n\t});\n\t\n\t// --------------------------------------------------------------------------------------------------------\n\t\n\t_event2.default.listen('dragDeck', function (e) {\n\t\t// {x, y, _dragDeck, _startCursor, _deck}\n\t\n\t\tfor (var i in e._dragDeck) {\n\t\t\tvar _position = e._deck.padding(e._dragDeck[i].index);\n\t\t\tvar _params = {\n\t\t\t\t'left': _position.x + (e.x - e._startCursor.x) + 'px',\n\t\t\t\t'top': _position.y + (e.y - e._startCursor.y) + 'px',\n\t\t\t\t// transform : 'rotate(0deg)',\n\t\t\t\t'z-index': _defaults2.default.topZIndex + (i | 0)\n\t\t\t};\n\t\t\t// Operations with DOM\n\t\t\t(0, _elRender2.default)(e._dragDeck[i].card.domElement).css(_params);\n\t\t}\n\t});\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _share = __webpack_require__(1);\n\t\n\tvar _share2 = _interopRequireDefault(_share);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_event2.default.listen('moveCardToHome', function (e) {\n\t\n\t  //  Move card home\n\t\n\t  console.log('Move card home', e);\n\t\n\t  _common2.default.curLock();\n\t  for (var i in e.moveDeck) {\n\t    var _position = e.departure.padding(e.moveDeck[i].index);\n\t    var _params = {\n\t      left: _position.x + 'px',\n\t      top: _position.y + 'px'\n\t    };\n\t    (0, _elRender2.default)(e.moveDeck[i].card.domElement).animate(_params, function () {\n\t      _common2.default.curUnLock();\n\t      if (e.departure) {\n\t        e.departure.Redraw();\n\t      }\n\t    });\n\t  }\n\t});\n\n/***/ },\n/* 53 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tvar _field2 = __webpack_require__(9);\n\t\n\tvar _field3 = _interopRequireDefault(_field2);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_event2.default.listen('fieldThemesSet', function (pref) {\n\t\n\t\tvar _field = (0, _field3.default)();\n\t\n\t\tvar fieldDomElement = _field.domElement;\n\t\n\t\t// Clear old themes\n\t\tfor (var i in _defaults2.default.themes.face) {\n\t\t\tvar themeName = _defaults2.default.themes.face[i];\n\t\t\t(0, _elRender2.default)(fieldDomElement).removeClass(themeName);\n\t\t}\n\t\tfor (var i in _defaults2.default.themes.back) {\n\t\t\tvar _themeName = _defaults2.default.themes.back[i];\n\t\t\t(0, _elRender2.default)(fieldDomElement).removeClass(_themeName);\n\t\t}\n\t\tfor (var i in _defaults2.default.themes.empty) {\n\t\t\tvar _themeName2 = _defaults2.default.themes.empty[i];\n\t\t\t(0, _elRender2.default)(fieldDomElement).removeClass(_themeName2);\n\t\t}\n\t\n\t\t// Add new themes\n\t\tvar faceClassName = _defaults2.default.themes.face[pref.face];\n\t\t(0, _elRender2.default)(fieldDomElement).addClass(faceClassName);\n\t\n\t\tvar backClassName = _defaults2.default.themes.back[pref.back];\n\t\t(0, _elRender2.default)(fieldDomElement).addClass(backClassName);\n\t\n\t\tvar emptyClassName = _defaults2.default.themes.empty[pref.empty];\n\t\t(0, _elRender2.default)(fieldDomElement).addClass(emptyClassName);\n\t});\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _event = __webpack_require__(2);\n\t\n\tvar _event2 = _interopRequireDefault(_event);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tvar _deckGenerator = __webpack_require__(55);\n\t\n\tvar _deckGenerator2 = _interopRequireDefault(_deckGenerator);\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tvar _renderTest = __webpack_require__(56);\n\t\n\tvar _renderTest2 = _interopRequireDefault(_renderTest);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _history = [],\n\t    _redo = [];\n\t\n\tvar debugHistoryMgr = new function () {\n\t\n\t\tthis.record = function (data) {\n\t\t\t_redo = [];\n\t\t\t_history.push(data);\n\t\t};\n\t\n\t\tthis.undo = function () {\n\t\n\t\t\tvar _step = _history.pop();\n\t\t\tif (_step) {\n\t\t\t\t_redo.push(_step);\n\t\t\t};\n\t\t\treturn _step;\n\t\t};\n\t\n\t\tthis.redo = function () {\n\t\n\t\t\tvar _step = _redo.pop();\n\t\t\tif (_step) {\n\t\t\t\t_history.push(_step);\n\t\t\t};\n\t\t\treturn _step;\n\t\t};\n\t}();\n\t\n\t// add buttons\n\t\n\tvar _debugHistory = false;\n\tvar debugHistory = function debugHistory(a) {\n\t\n\t\tif (_debugHistory) {\n\t\t\treturn;\n\t\t}\n\t\t_debugHistory = true;\n\t\n\t\t_event2.default.listen('makeStep', debugHistoryMgr.record);\n\t\n\t\tif (a && a.drawButtons) (0, _elRender2.default)(document.body).append((0, _elRender2.default)(\"<div>\").append($(\"<span>\").addClass('awesome').text('UNDO').click(function () {\n\t\t\tvar _data = debugHistoryMgr.undo();\n\t\t\tif (_data) {\n\t\t\t\tSolitaireEngine.event.dispatch('undo', _data);\n\t\t\t}\n\t\t})).append($(\"<span>\").addClass('awesome').text('REDO').click(function () {\n\t\t\tvar _data = debugHistoryMgr.redo();\n\t\t\tif (_data) {\n\t\t\t\tSolitaireEngine.event.dispatch('redo', _data);\n\t\t\t}\n\t\t})).css({\n\t\t\tposition: 'fixed',\n\t\t\ttop: '1px',\n\t\t\tleft: '1px'\n\t\t}));\n\t};\n\t\n\tvar tests = function tests() {\n\t\t(0, _renderTest2.default)();\n\t};\n\t\n\texports.default = {\n\t\tdeckGenerator: _deckGenerator2.default,\n\t\tdebugHistory: debugHistory,\n\t\tdebugHistoryMgr: debugHistoryMgr,\n\t\tvalidateCardName: _common2.default.validateCardName,\n\t\telRender: _elRender2.default,\n\t\ttests: tests\n\t};\n\n/***/ },\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\texports.default = function (a) {\n\t\n\t\tvar default_type = 'all';\n\t\n\t\tvar default_shuffle = false;\n\t\tvar max_iterations = 10;\n\t\n\t\tvar type = a && a.type && typeof a.type == 'string' ? a.type : default_type;\n\t\tvar _deckCount = a && a.deckCount && typeof a.deckCount == 'number' ? a.deckCount : 52;\n\t\tvar _iterations = a && a.iterations && typeof a.iterations == 'number' && a.iterations < max_iterations ? a.iterations : 1;\n\t\tvar _shuffle = a && a.shuffle && typeof a.shuffle != 'undefuned' ? a.shuffle : default_shuffle;\n\t\n\t\tvar genType = function genType(_cardsColors, _cardsRanks) {\n\t\t\tvar _deck = [];\n\t\t\tfor (var c in _cardsColors) {\n\t\t\t\tfor (var r in _cardsRanks) {\n\t\t\t\t\t_deck.push(_cardsColors[c] + _cardsRanks[r]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _deck;\n\t\t};\n\t\n\t\tvar _ranks = _deckCount == 36 ? _defaults2.default.card.ranks36 : _defaults2.default.card.ranks;\n\t\tif (a && a.ranks) {\n\t\t\t_ranks = [];\n\t\t\tfor (i in a.ranks) {\n\t\t\t\tif (_defaults2.default.card.rank.indexOf(a.ranks[i].toString()) >= 0) {\n\t\t\t\t\t_ranks.push(a.ranks[i].toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tvar genTypes = {\n\t\t\tall: function all() {\n\t\t\t\treturn genType(_defaults2.default.card.suits, _ranks);\n\t\t\t},\n\t\t\tblack: function black() {\n\t\t\t\tvar _cardsSuits = _defaults2.default.card.colors.black;\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t},\n\t\t\tred: function red() {\n\t\t\t\tvar _cardsSuits = _defaults2.default.card.colors.red;\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t},\n\t\t\tblack_and_red: function black_and_red() {\n\t\t\t\tvar _cardsSuits = [_defaults2.default.card.colors.red[Math.random() * _defaults2.default.card.colors.red.length | 0], _defaults2.default.card.colors.black[Math.random() * _defaults2.default.card.colors.black.length | 0]];\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t},\n\t\t\th_only: function h_only() {\n\t\t\t\tvar _cardsSuits = ['h'];\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t},\n\t\t\td_only: function d_only() {\n\t\t\t\tvar _cardsSuits = ['d'];\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t},\n\t\t\tc_only: function c_only() {\n\t\t\t\tvar _cardsSuits = ['c'];\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t},\n\t\t\ts_only: function s_only() {\n\t\t\t\tvar _cardsSuits = ['s'];\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t},\n\t\t\tone_rank_only: function one_rank_only() {\n\t\t\t\tvar _cardsSuits = [_defaults2.default.card.solors[Math.random() * _defaults2.default.card.solors.length | 0]];\n\t\t\t\treturn genType(_cardsSuits, _ranks);\n\t\t\t}\n\t\n\t\t};\n\t\n\t\tgenTypes.hearts = genTypes.h_only;\n\t\tgenTypes.diamonds = genTypes.d_only;\n\t\tgenTypes.clubs = genTypes.c_only;\n\t\tgenTypes.spades = genTypes.s_only;\n\t\n\t\tvar _deck = [];\n\t\n\t\tfor (; _iterations > 0; _iterations -= 1) {\n\t\t\t_deck = _deck.concat(genTypes[type]());\n\t\t}\n\t\n\t\tif (_shuffle) {\n\t\t\tshuffle(_deck);\n\t\t}\n\t\n\t\treturn _deck;\n\t};\n\t\n\tvar _defaults = __webpack_require__(3);\n\t\n\tvar _defaults2 = _interopRequireDefault(_defaults);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar shuffle = function shuffle(a) {\n\t\tfor (var j, x, i = a.length; i; j = Math.floor(Math.random() * i), x = a[--i], a[i] = a[j], a[j] = x) {};\n\t};\n\t\n\t;\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _elRender = __webpack_require__(21);\n\t\n\tvar _elRender2 = _interopRequireDefault(_elRender);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t\n\t\t/*\tconsole.log(\"-- renderTests\");\r\n\t // --\r\n\t \tconsole.log(\"- startTest#1\");\r\n\t \tlet _el_1 = elRender(\"<div>\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#1-A\",\r\n\t \t\t_el_1\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#1-B\",\r\n\t \t// \t_el_1.elements[0].el.className\r\n\t \t// );\r\n\t // --\tconsole.log(\"-- renderTests\");\r\n\t // --\r\n\t \tconsole.log(\"- startTest#1\");\r\n\t \tlet _el_1 = elRender(\"<div>\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#1-A\",\r\n\t \t\t_el_1\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#1-B\",\r\n\t \t// \t_el_1.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#2\");\r\n\t \tlet _el_2 = elRender(\"#tbUndo\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#2-A\",\r\n\t \t\t_el_2\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#2-B\",\r\n\t \t// \t_el_2.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#3\");\r\n\t \tlet _el_3 = elRender(\".titleBandLink\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#3 '.titleBandLink'\",\r\n\t \t\t_el_3\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#3-B\",\r\n\t \t// \t_el_3.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#4\");\r\n\t \tlet _el_4 = document.querySelector(\".titleBandLink\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#4-A\",\r\n\t \t\telRender(_el_4)\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#4-B\",\r\n\t \t// \t_el_4.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#5\");\r\n\t \tlet _el_5 = document.querySelectorAll(\".titleBandLink\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#5 '.titleBandLink'\",\r\n\t \t\t_el_5\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#5-B\",\r\n\t \t// \t_el_5.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#6\");\r\n\t \tlet _el = elRender(\"#tbUndo\");\r\n\t \tlet _el_6 = elRender(_el);\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#6-A\",\r\n\t \t\t_el_6\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#6-B\",\r\n\t \t// \t_el_6.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#7\");\r\n\t \tlet _elements = elRender(\".titleBandLink\");\r\n\t \tlet _el_7 = elRender(_elements);\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#7-A\",\r\n\t \t\t_el_7\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#7-B\",\r\n\t \t// \t_el_7.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#8\");\r\n\t \tlet _element = elRender(\"#tbUndo\");\r\n\t \tlet _element2 = elRender(\"#tbRedo\");\r\n\t \tlet _el_8 = elRender(_element)\r\n\t \t\t.after(_element2);\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#8-A\",\r\n\t \t\t_el_8\r\n\t \t);\r\n\t \tconsole.log(\"- startTest#2\");\r\n\t \tlet _el_2 = elRender(\"#tbUndo\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#2-A\",\r\n\t \t\t_el_2\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#2-B\",\r\n\t \t// \t_el_2.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#3\");\r\n\t \tlet _el_3 = elRender(\".titleBandLink\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#3 '.titleBandLink'\",\r\n\t \t\t_el_3\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#3-B\",\r\n\t \t// \t_el_3.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#4\");\r\n\t \tlet _el_4 = document.querySelector(\".titleBandLink\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#4-A\",\r\n\t \t\telRender(_el_4)\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#4-B\",\r\n\t \t// \t_el_4.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#5\");\r\n\t \tlet _el_5 = document.querySelectorAll(\".titleBandLink\");\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#5 '.titleBandLink'\",\r\n\t \t\t_el_5\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#5-B\",\r\n\t \t// \t_el_5.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#6\");\r\n\t \tlet _el = elRender(\"#tbUndo\");\r\n\t \tlet _el_6 = elRender(_el);\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#6-A\",\r\n\t \t\t_el_6\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#6-B\",\r\n\t \t// \t_el_6.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#7\");\r\n\t \tlet _elements = elRender(\".titleBandLink\");\r\n\t \tlet _el_7 = elRender(_elements);\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#7-A\",\r\n\t \t\t_el_7\r\n\t \t);\r\n\t \t// console.log(\r\n\t \t// \t\"- renderTest#7-B\",\r\n\t \t// \t_el_7.elements[0].el.className\r\n\t \t// );\r\n\t // --\r\n\t \tconsole.log(\"- startTest#8\");\r\n\t \tlet _element = elRender(\"#tbUndo\");\r\n\t \tlet _element2 = elRender(\"#tbRedo\");\r\n\t \tlet _el_8 = elRender(_element)\r\n\t \t\t.after(_element2);\r\n\t \tconsole.log(\r\n\t \t\t\"- renderTest#8-A\",\r\n\t \t\t_el_8\r\n\t \t);*/\n\t};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 58 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 59 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** SolitaireEngine.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 51999719aa84bc34759c\n **/","'use strict';\r\n\r\n/*\r\n * Solitaire game engine\r\n * by Roman Bauer - kotapesic@gmail.com\r\n * Oct. 2015\r\n * Webpack version Feb. 24 2016\r\n */\r\n\r\nimport share      from 'share';\r\nimport event      from 'event';\r\nimport defaults   from 'defaults';\r\n\r\nimport Inputs     from 'inputs';\r\nimport Move       from 'move';\r\nimport domManager from 'domManager';\r\nimport Field      from 'field';\r\nimport common     from 'common';\r\nimport winCheck   from 'winCheck';\r\n\r\nimport debug from 'debug';\r\n\r\n// var _themes = ['default', 'alternative'];\r\n\r\nimport 'common.scss';\r\nimport 'default_theme.scss';\r\nimport 'alternative_theme.scss';\r\n\r\nexports.event    = event;\r\nexports.options  = defaults;\r\nexports.winCheck = winCheck.hwinCheck;\r\n\r\nlet firstInit = true;\r\n\r\nexports.init = function(gameConfig) {\r\n\t\r\n\tif(firstInit) {\r\n\t\tdebug.tests();\r\n\t\tcommon.onInit();\r\n\t\tfirstInit = false;\r\n\t};\r\n\r\n\tvar _field = Field(gameConfig);\r\n\r\n\tcommon.afterInit();\r\n\r\n\texports.Redraw = function(data) {\r\n\t\t_field.Redraw(data);\r\n\t}\r\n};\r\n\r\nif(debug) {\r\n\r\n\t\r\n\texports.debug = debug;\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/index.js\n **/","'use strict';\r\n\r\nvar data = {};\r\n\r\nexport default new function() {\r\n\t\r\n\tthis.get = function(name) {\r\n\t\tif(typeof data[name] != \"undefined\") {\r\n\t\t\t// TODO решить наконец проблему, \r\n\t\t\t// почему Object.assign не работает после babel-я\r\n\t\t\t\r\n\t\t\t// try {\r\n\r\n\t\t\t// if( (data[data]).toString() == \"[object Object]\" ) {\r\n\t\t\t// \treturn Object['assign'] ? Object['assign']({}, data[name]) : data[name]\r\n\t\t\t// } else {\r\n\t\t\t\r\n\t\t\t// event.dispatch('shareGet', {name : name, data : data[name]});\r\n\t\t\treturn data[name];\r\n\t\t\t\r\n\t\t\t// }\r\n\r\n\t\t\t// } catch(e) {\r\n\t\t\t// \tconsole.log( (data[name]).toString() );\r\n\t\t\t// \tconsole.log('CATCH:', name, data[name]);\r\n\t\t\t// }\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tthis.set = function(name, _data) {\r\n\r\n\t\tif(typeof name == \"string\") {\r\n\t\t\t\r\n\t\t\tdata[name] = _data;\r\n\t\t\t// event.dispatch('shareSet', {name : _data});\r\n\t\t\r\n\t\t} else if(name instanceof Object && typeof _data == \"undefined\") {\r\n\t\t\t\r\n\t\t\tfor(var _name in name) {\r\n\t\t\t\tdata[_name] = name[_name];\r\n\t\t\t}\r\n\t\t\t// event.dispatch('shareSet', name);\r\n\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tconsole.warn('Error share.set:', name, _data);\r\n\r\n\t\t}\r\n\t\t// }\r\n\t};\r\n\r\n\tthis.getAll = function() {\r\n\t\treturn data;\r\n\t}\r\n\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/common/share.js\n **/","'use strict';\r\n\r\nvar events = {};\r\n\r\nexport default new function() {\r\n\t\r\n\t// this.on = \r\n\tthis.listen = function(name, callback) {\r\n\t\tif(typeof name != 'string' || typeof callback != 'function') return;\r\n\t\tif(events[name]) {\r\n\t\t\tevents[name].push(callback);\r\n\t\t} else {\r\n\t\t\tevents[name] = [callback];\r\n\t\t}\r\n\t};\r\n\r\n\t// this.do =\r\n\tthis.dispatch = function(name, data) {\r\n\r\n\t\t// console.log('dispatch', name, data);\r\n\t\t\r\n\t\tif(events[name]) {\r\n\t\t\tfor(var i in events[name]) {\r\n\t\t\t\tevents[name][i](data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// this.one function(name, data) {};\r\n\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/common/event.js\n **/","'use strict';\r\n\r\nexport default {\r\n\t\r\n\tcard : {\r\n\t    width        : 71,\r\n\t    height       : 96,\r\n\r\n\t    suits        : ['h', 'd', 'c', 's'],\r\n\t    // suitindexes : [ 1,   2,   3,   4 ],\r\n\t    colors       : {\r\n\t    \tred   : ['h', 'd'],\r\n\t\t\tblack : ['c', 's']\r\n\t    },\r\n\t    \r\n\t    ranks        : ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'j', 'q', 'k'],\r\n\t    values       : [ 1,   2,   3,   4,   5,   6,   7,   8,   9,   10,   11,  12,  13],\r\n\t    ranks36      : ['1',                     '6', '7', '8', '9', '10', 'j', 'q', 'k']\r\n\t},\r\n\t\r\n\tzoom                : 1.0,\r\n\r\n\tcan_move_flip       : false,\r\n\tshowSlot            : true,\r\n\tautohide            : false,\r\n\r\n\tpaddingType         : 'none',\r\n\tflip_type           : 'none',\r\n\ttakeRules           : ['onlytop'],\r\n\tputName             : 'any',\r\n\r\n\ttipRule             : 'allToAll',\r\n\r\n\tpadding_y           : 0,\r\n\tpadding_x           : 0,\r\n\tflip_padding_y      : 0,//5,\r\n\tflip_padding_x      : 0,//20,\r\n\tmove_distance       : 10,\r\n\r\n\tTips                : null,\r\n\tmoveDistance        : 0,\r\n\tshowTips            : true,\r\n\tshowTipsDestination : false,\r\n\tshowTipPriority     : false,\r\n\r\n\tdebugLabels         : false,\r\n\tdebugLog            : false,\r\n\r\n\t// theme               : {\r\n\t// \tname          : 'alternative_theme',\r\n\t// \tspriteTexture : true,\r\n\t//     textureSuits  : ['d', 'c', 'h', 's']\r\n\t// },\r\n\r\n\tthemes : {\r\n\t\tface  : [\r\n\t\t\t\"default_face\",\r\n\t\t\t\"alternative_face\"\r\n\t\t],\r\n\t\tback  : [\r\n\t\t\t\"default_back\",\r\n\t\t\t\"alternative_back\",\r\n\t\t\t\"red_back\",\r\n\t\t\t\"blue_back\"\r\n\t\t],\r\n\t\tempty : [\r\n\t\t\t\"default_empty\",\r\n\t\t\t\"alternative_empty\"\r\n\t\t]\r\n\t},\r\n\t// theme               : 'default_theme',\r\n\r\n\tanimation           : true,\r\n\tanimationTime       : 300,// ms.\r\n\r\n\t// actions : {\r\n\t// \ttwindeck : {\r\n\t// \t\tcardCount : 3\r\n\t// \t}\r\n\t// },\r\n\r\n\r\n\t// start_z_index       : 1,\r\n\tstartZIndex         : 100,\r\n    topZIndex           : 900,\r\n\r\n\tcanMoveFlip         : false,\r\n\r\n\tafterStep           : false,\r\n\r\n\ttipsParams   : {\r\n        hideOnEmpty       : false,\r\n        excludeHomeGroups : true\r\n    },\r\n\r\n    inputParams : {\r\n        doubleClick : false\r\n    },\r\n\r\n    pref : {\r\n    \tface  : 0,\r\n\t\tback  : 0,\r\n\t\tempty : 1\r\n    }\r\n\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/common/defaults.js\n **/","'use strict';\r\n\r\nimport share    from 'share';\r\nimport event    from 'event';\r\nimport defaults from 'defaults';\r\nimport common   from 'common';\r\n\r\nimport Deck from 'addDeck';\r\nimport Tips from 'tips';\r\n\r\n// var drag_el = null;\r\nshare.set('dragDeck',    null);\r\nshare.set('startCursor', null);\r\n\r\nvar _inputUndoRedo = function() {\r\n    \r\n    var _dragDeck = share.get('dragDeck');\r\n\tif(\r\n        _dragDeck \r\n     && _dragDeck[0] \r\n     && _dragDeck[0].card \r\n     && _dragDeck[0].card.parent\r\n    ) {\r\n\t\tvar _deck = Deck.getDeckById(_dragDeck[0].card.parent)\r\n        if(_deck) {\r\n            _deck.Redraw();\r\n        }\r\n\t}\r\n\t\r\n    share.set('dragDeck',    null);\r\n\tshare.set('startCursor', null);\r\n\r\n    common.curUnLock();\r\n}\r\n\r\nevent.listen('undo', function() {\r\n    _inputUndoRedo();\r\n});\r\n\r\nevent.listen('redo', function() {\r\n    _inputUndoRedo();\r\n});\r\n\r\n// -------------------------------------------------------------------------------------------------------------\r\n\r\nvar cdown = function(target, x, y) {\r\n\r\n    share.set('dragDeck',    null);\r\n    share.set('startCursor', null);\r\n    \r\n    // var _startCursor = share.get('startCursor'),\r\n        // _dragDeck    = share.get('dragDeck');\r\n    // if(_dragDeck || _startCursor) return;\r\n    \r\n    if(common.isCurLock()) { return; };\r\n\r\n    // if (target.className.split(' ').indexOf('animated') >= 0) {\r\n    //     return;\r\n    // }\r\n        \r\n    if( target.className.split(' ').indexOf('slot') >= 0 ) {\r\n        \r\n        var _id   = target.id,\r\n            _deck = common.getElementById(_id);\r\n        if(_deck) {\r\n            event.dispatch('click', _deck);\r\n        }\r\n        // _deck.runActions();\r\n    }\r\n    \r\n    if( target.className.split(' ').indexOf('draggable') >= 0 ) {\r\n\r\n        \r\n        var _id     = target.id,\r\n            _card   = _id                   ? common.getElementById(_id) : null,\r\n            _parent = _card && _card.parent ? _card.parent               : null,\r\n            _deck   = _parent               ? Deck.getDeckById(_parent)  : null;\r\n        \r\n        if(_deck) {\r\n            event.dispatch('click', _deck);\r\n        }\r\n        // _deck.runActions();\r\n        \r\n        // TODO\r\n        // в данной ситуации обрабатывается только клик по карте, пустые колоды никак не обрабатываются\r\n        \r\n        var _dragDeck = _deck ? _deck.Take(_id) : null;\r\n\r\n\t\t\r\n        share.set('dragDeck', _dragDeck);\r\n\t\t\r\n        if(share.get('dragDeck')) {\r\n\r\n        \tshare.set('startCursor', {\r\n            \tx : x,\r\n            \ty : y\r\n\t        });\r\n\r\n        \t// ???\r\n\t        Tips.tipsDestination({currentCard : _card});\r\n\t    }\r\n\r\n    }\r\n\r\n}\r\n\r\n// -------------------------------------------------------------------------------------------------------------\r\n\r\nvar cmove = function(x, y) {\r\n\r\n    var _startCursor = share.get('startCursor'),\r\n        _dragDeck    = share.get('dragDeck');\r\n        \r\n    if(!_dragDeck || !_startCursor) return;\r\n\r\n\tvar _distance = _startCursor \r\n\t\t? Math.sqrt(common.sqr(x - _startCursor.x) + common.sqr(y - _startCursor.y)) \r\n\t\t: 0;\r\n\r\n\tvar _deck = common.getElementById(_dragDeck[0].card.parent);\r\n\r\n    var _position = _deck.padding(_dragDeck[_dragDeck.length - 1].index);\r\n    \r\n    event.dispatch('dragDeck', {\r\n        x, y        , \r\n        _dragDeck   , \r\n        _startCursor, \r\n        _deck\r\n    });\r\n\r\n    var cursorMove = {\r\n    \tdistance     : _distance,\r\n    \tdirection    : {\r\n\t    \tx     : x - _startCursor.x,// (+) rigth / (-) left\r\n\t    \ty     : y - _startCursor.y,// (+) down  / (-) up\r\n\t    \tright : x > _startCursor.x,\r\n\t    \tleft  : x < _startCursor.x,\r\n\t    \tdown  : y > _startCursor.y,\r\n\t    \tup    : y < _startCursor.y\r\n    \t},\r\n    \tlastPosition : {\r\n    \t\tx : x,\r\n    \t\ty : y\r\n    \t},\r\n    \tdeckPosition : {\r\n    \t\tx : (_position.x + (x - _startCursor.x)),\r\n    \t\ty : (_position.y + (y - _startCursor.y))\r\n    \t}\r\n    }\r\n    \r\n    Tips.tipsMove({\r\n    \tmoveDeck   : _dragDeck, \r\n    \tcursorMove : cursorMove\r\n    });\r\n\r\n}\r\n\r\n// -------------------------------------------------------------------------------------------------------------\r\n\r\nvar cend = function(target, x, y, dbclick) {\r\n\r\n    var _startCursor = share.get('startCursor'),\r\n    \t_dragDeck    = share.get('dragDeck');\r\n    \r\n    if(!_dragDeck || !_startCursor) return;\r\n\r\n\tvar _deck = common.getElementById(_dragDeck[0].card.parent);\r\n\tvar _position = _deck.padding(_dragDeck[0].index);\r\n    var cursorMove = {\r\n        distance     : Math.sqrt(common.sqr(x - _startCursor.x) + common.sqr(y - _startCursor.y)),\r\n        dbclick      : !!dbclick,\r\n        direction    : {\r\n            x     : x - _startCursor.x,// (+) rigth / (-) left\r\n            y     : y - _startCursor.y,// (+) down  / (-) up\r\n            right : x > _startCursor.x,\r\n            left  : x < _startCursor.x,\r\n            down  : y > _startCursor.y,\r\n            up    : y < _startCursor.y\r\n        },\r\n        lastPosition : {\r\n            x : x,\r\n            y : y\r\n        },\r\n        deckPosition : {\r\n            x : (_position.x + (x - _startCursor.x)),\r\n            y : (_position.y + (y - _startCursor.y))\r\n        }\r\n    }\r\n\r\n    event.dispatch('hideCard', target);\r\n    var _dop = document.elementFromPoint(x, y);\r\n    event.dispatch('showCard', target);\r\n    // if(_dop) {\r\n\t\r\n    // Move(_dragDeck, _dop, cursorMove);\r\n    console.log('>>>>', dbclick)\r\n    event.dispatch('Move', {\r\n        moveDeck   : _dragDeck,\r\n        to         : _dop,\r\n        cursorMove : cursorMove\r\n    })\r\n    // }\r\n\r\n    // event.dispatch('redrawDeckIndexes', _deck);\r\n\r\n    share.set('dragDeck',    null);\r\n    share.set('startCursor', null);\r\n\r\n}\r\n\r\n// -------------------------------------------------------------------------------------------------------------\r\n\r\ndocument.onmousedown = function(e) {\r\n    if(e.button != 0) return;\r\n    cdown(e.target, e.clientX, e.clientY);\r\n};\r\n\r\ndocument.onmousemove = function(e) {\r\n    cmove(e.clientX, e.clientY);\r\n};\r\n\r\ndocument.onmouseup = function(e) {\r\n    cend(e.target, e.clientX, e.clientY);\r\n};\r\n\r\ndocument.ondblclick = function(e) {\r\n    cdown(e.target, e.clientX, e.clientY);\r\n    cend(e.target, e.clientX, e.clientY, true);\r\n    common.curUnLock();\r\n};\r\n\r\ndocument.addEventListener('touchstart', function(e) {\r\n    // e.preventDefault()\r\n    cdown(e.target, e.touches[0].clientX, e.touches[0].clientY)\r\n}, false);\r\n\r\ndocument.addEventListener('touchmove', function(e) {\r\n\tif(share.startCursor) e.preventDefault();\r\n    cmove(e.touches[0].clientX, e.touches[0].clientY)\r\n}, false);\r\n\r\ndocument.addEventListener('touchend', function(e) {\r\n    // e.preventDefault()\r\n    cend(e.changedTouches[0].target, e.changedTouches[0].clientX, e.changedTouches[0].clientY);\r\n}, false);\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/inputs.js\n **/","'use strict';\r\n\r\nimport share    from 'share';\r\nimport event    from 'event';\r\nimport defaults from 'defaults';\r\n\r\nimport Tips     from 'tips';\r\nimport Field    from 'field';\r\n\r\nimport drawPreferences    from 'drawPreferences';\r\nimport preferencesEvents  from 'preferencesEvents';\r\nimport defaultPreferences from 'defaultPreferences';\r\n\r\n\r\nlet onInit = ()=>{\r\n\tdrawPreferences();\r\n\tpreferencesEvents();\r\n}\r\n\r\nlet afterInit = ()=>{\r\n\tdefaultPreferences();\r\n}\r\n\r\n// drawPreferences();\r\n\r\n// event.listen('makeStep', function(e) {\r\n// \t// ???\r\n// \tshare.saveStepCallback(e);\r\n\t\r\n// \tshare.set('oneStepWay', {});\r\n// });\r\n\r\n// event.listen('win', function(e) {\r\n// \tif(e && e.show) {\r\n// \t\t//  ????\r\n// \t\tshare.winCheckCallback(e);\r\n// \t}\r\n// });\r\n// event.listen('newGame', function(e) {\r\n// \tTips.checkTips();\r\n// });\r\n\r\n// Lock/Unlock\r\n\r\nvar sqr = function(i) {\r\n    return i * i;\r\n};\r\n\r\nvar _lock = false;\r\n\r\nvar isLock = function() {\r\n\treturn _lock;\r\n};\r\nvar lock = function() {\r\n\t_lock = true;\r\n}\r\nevent.listen('lock', lock);\r\n\r\nvar unlock = function() {\r\n\tlock = false;\r\n}\r\nevent.listen('unlock', unlock);\r\n\r\nvar isCurLock = function() {\r\n\treturn share.get('curLockState');\r\n};\r\n\r\n\r\nvar curLock = function() {\r\n\t// console.log('curLock');\r\n\tshare.set('curLockState', true);\r\n}\r\nvar curUnLock = function() {\r\n\t// console.log('curUnLock');\r\n\tshare.set('curLockState', false);\r\n}\r\n\r\n// getters\r\n\r\nvar getElements = function() {\r\n\treturn share.get('elements');\r\n}\r\n\r\nvar getElementById = function(a) {\r\n\tvar _elements = share.get('elements');\r\n\treturn _elements[a];\r\n}\r\n\r\nvar getElementsByName = function(name, type) {\r\n\tvar response = [];\r\n\tvar _elements = share.get('elements');\r\n\tfor(var i in _elements) {\r\n\t\tif(_elements[i].name && typeof _elements[i].name == 'string' && _elements[i].name == name) {\r\n\t\t\tif(type && typeof _elements[i].type == 'string') {\r\n\t\t\t\tif(type && _elements[i].type == type) {\r\n\t\t\t\t\tresponse.push(_elements[i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse.push(_elements[i]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresponse.push(_elements[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn response;\r\n};\r\n\r\n// validator\r\n\r\nvar validateCardName = function(name, nolog) {\r\n\t\r\n\tif(typeof name != 'string') {\r\n\t\tconsole.warn('Warning: validate name must have string type', name);\r\n\t\t// throw new Error('z');\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tvar suit  = name.slice(0, 1),\r\n\t\trank  = name.slice(1, 3),\r\n\t\tcolor = null,\r\n\t\tvalue = defaults.card.values[defaults.card.ranks.indexOf(rank)];\r\n\tfor(var colorName in defaults.card.colors) {\r\n\t\tif(defaults.card.colors[colorName].indexOf(suit) >= 0) {\r\n\t\t\tcolor = colorName;\r\n\t\t}\r\n\t}\r\n\t\r\n\tif( \r\n\t\tdefaults.card.suits.indexOf(suit) >= 0\r\n\t && defaults.card.ranks.indexOf(rank) >= 0\r\n\t) {\r\n\t\treturn {\r\n\t\t\tsuit  : suit, \r\n\t\t\trank  : rank,\r\n\t\t\tcolor : color,\r\n\t\t\tvalue : value\r\n\t\t}\r\n\t} else {\r\n\t\tconsole.warn('Warning: validate name:', name, '- incorrect');\r\n\t\t// throw new Error();\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\n// ID generator\r\n\r\nvar _id = 0,\r\n\tgenId = function() {\r\n\treturn _id++;\r\n};\r\n\r\nshare.set('animation', defaults.animation);\r\n\r\nvar animationOn = function() {\r\n\tshare.set('animation', true);\r\n}\r\n\r\nvar animationDefault = function() {\r\n\tshare.set('animation', defaults.animation);\r\n}\r\n\r\nvar animationOff = function() {\r\n\tshare.set('animation', false);\r\n}\r\n\r\nevent.listen('newGame', function(e) {\r\n\t// TODO\r\n\t// из-за отключения анимации \r\n\t// на время восстановления ходов из истории приходится костылять\r\n\t// и везде где нужна анимация ставить common.animationDefault();\r\n\t// надо исправить когда из истории можно будет получить\r\n\t// не только историю ходов\r\n\tanimationOff();\r\n});\r\n\r\nevent.listen('historyReapeater', function(e) {\r\n\tif(e) {\r\n\t\tshare.set('noRedraw', true);\r\n\t\tshare.set('noTips', true);\r\n\t} else {\r\n\t\tshare.set('noRedraw', false);\r\n\t\tvar _field = Field();\r\n\t\t_field.Redraw();\r\n\t\tshare.set('noTips', false);\r\n\t\tTips.checkTips();\r\n\t}\r\n});\r\n\r\n// event.listen('makeStep', function(e) {\r\n\t// share.set('animation', defaults.animation);\r\n// });\r\n\r\nexport default {\r\n\tisLock           ,\r\n\tlock             ,\r\n\tunlock           ,\r\n\tisCurLock        ,\r\n\tcurLock          ,\r\n\tcurUnLock        ,\r\n\tgetElements      ,\r\n\tgetElementById   ,\r\n\tgetElementsByName,\r\n\tvalidateCardName ,\r\n\tgenId            ,\r\n\tanimationOn      ,\r\n\tanimationOff     ,\r\n\tanimationDefault ,\r\n\tonInit           ,\r\n\tafterInit        ,\r\n\tsqr              \r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/common/common.js\n **/","'use strict';\r\n\r\nimport event     from 'event';\r\nimport share     from 'share';\r\nimport defaults  from 'defaults';\r\nimport common    from 'common';\r\n\r\nimport tipsRules from 'tipsRules';\r\nimport bestTip   from 'bestTip';\r\nimport Deck      from 'addDeck';\r\nimport Field     from 'field';\r\n\r\nvar _showTips = defaults.showTips;\r\n\r\nvar tipTypes = [\r\n\t'tip'        , \r\n\t'tipTo'      , \r\n\t'tipPriority',\r\n\t'tipToHome'\r\n];\r\n\r\nvar _tips = [];\r\n\r\nvar getTips = function() {\r\n\treturn _tips;\r\n}\r\n\r\nvar checkTips = function() {\r\n\r\n\tif(share.get('noTips')) { return false; };\r\n\t\r\n\t// console.log('%cCHECK TIPS', 'background : green');\r\n\r\n\tevent.dispatch('hideTips');\r\n\r\n\tvar _decks = Deck.getDecks({visible : true});\r\n\t\r\n\tvar _autoTipsName = share.get('autoTips');\r\n\tvar _autoTips = tipsRules[_autoTipsName];\r\n\t\r\n\tif(typeof _autoTips == 'function') {\r\n\t\t_tips = _autoTips({\r\n\t\t\tdecks : _decks\r\n\t\t});\r\n\t} else {\r\n\t\tfor(i in share.autoTips) {\r\n\t\t\tif(typeof share.autoTips[i] == 'function') {\r\n\t\t\t\t_tips = _tips.concat(\r\n\t\t\t\t\tautoTips[i]({\r\n\t\t\t\t\t\tdecks : _decks\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tif(tipsRules[i]) {\r\n\t\t\t\t\t_tips = _tips.concat(\r\n\t\t\t\t\t\ttipsRules[i]({\r\n\t\t\t\t\t\t\tdecks : _decks,\r\n\t\t\t\t\t\t\trules : share.autoTips[i]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// var _showTips = share.get('showTips')\r\n\tif(_showTips) {\r\n\r\n\t\tvar _field = Field();\r\n\t\tvar _homeGroups = _field.homeGroups;\r\n\r\n\t\t// console.log(_tips, _field);\r\n\r\n\t\tfor(var i in _tips) {\r\n\r\n\t\t\t// TODO инициализировать \"hideTipsInDom\" в Field.js \r\n\t\t\tif(\r\n\t\t\t\t(\r\n\t\t\t \t_tips[i].to.count == 0 \r\n\t\t\t && _field.tipsParams.hideOnEmpty\r\n\t\t\t \t)\r\n\t\t\t || (\r\n\t\t\t \t_field.tipsParams.excludeHomeGroups\r\n\t\t\t && _homeGroups\r\n\t\t\t && _homeGroups.length\r\n\t\t\t \r\n\t\t\t && _homeGroups.indexOf(_tips[i].from.deck.parent) >= 0\r\n\t\t\t \t)\r\n\t\t\t) {\r\n\t\t\t\t// ?#$%&!\r\n\t\t\t} else {\r\n\r\n\t\t\t\tevent.dispatch('showTip', {\r\n\t\t\t\t\tel   : _tips[i].from.card, \r\n\t\t\t\t\ttype : 'tip'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(_homeGroups.indexOf(_tips[i].to.deck.parent) >= 0) {\r\n\t\t\t\tevent.dispatch('showTip', {\r\n\t\t\t\t\tel   : _tips[i].from.card, \r\n\t\t\t\t\ttype : 'tipToHome'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// console.log('Tips:', _tips);\r\n\t\r\n};\r\nevent.listen('makeStep', checkTips);\r\n\r\n// --------------------------------------------------------\r\n\r\nvar showTips = function(a) {\r\n\t_showTips = true;\r\n\tif(a && a.init) return;\r\n\tcheckTips();\r\n};\r\nevent.listen('tipsON', showTips);\r\n\r\nvar hideTips = function(a) {\r\n\t_showTips = false;\r\n\tif(a && a.init) return;\r\n\tcheckTips();\r\n};\r\nevent.listen('tipsOFF', hideTips);\r\n\r\n// --------------------------------------------------------\r\n\r\nvar tipsMove = function(a) {\r\n\r\n\tif(!share.showTipPriority) return;\r\n\r\n\tevent.dispatch('hideTips', {types : ['tipPriority']});\r\n\r\n\tif( share.showTipPriority \r\n\t && a \r\n\t && a.moveDeck \r\n\t && a.cursorMove \r\n\t && a.cursorMove.distance \r\n\t && a.cursorMove.distance >= share.moveDistance\r\n\t) {\r\n\r\n\t\tvar Tip = bestTip(a.moveDeck, a.cursorMove);\r\n\r\n\t\tif(Tip) {\r\n\r\n\t\t\tevent.dispatch('showTip', {el : Tip.to.deck, type : 'tipPriority'});\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// --------------------------------------------------------\r\n\r\nvar tipsDestination = function(a) {\r\n\r\n\tif(share.get('showTipsDestination')) {\r\n\r\n\t\tevent.dispatch('hideTips');\r\n\t\t\r\n\t\tif(a && a.currentCard && a.currentCard.id) {\r\n\t\t\tfor(var i in _tips) {\r\n\t\t\t\tif(_tips[i].from.card.id == a.currentCard.id) {\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tevent.dispatch('showTip', {\r\n\t\t\t\t\t\t'el'   : _tips[i].to.deck, \r\n\t\t\t\t\t\t'type' : 'tipTo'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default {\r\n\ttipTypes       ,\r\n\tgetTips        ,\r\n\tcheckTips      ,\r\n\tshowTips       ,\r\n\thideTips       ,\r\n\ttipsMove       ,\r\n\ttipsDestination\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/tips/tips.js\n **/","'use strict';\r\n\r\nexport default {\r\n\t\r\n\tallToAll : function(a) {\r\n\r\n\t\tvar _moves = [];\r\n\t\t\r\n\t\tvar put = function(deckIndex_2, deckIndex, cardIndex, _cards) {\r\n\t\t\t\r\n\t\t\tvar _cards_to = a.decks[deckIndex_2].cards,\r\n\t\t\t\t_card_to  = _cards_to.length ? _cards_to[_cards_to.length - 1] : null;\r\n\t\t\t_moves.push({\r\n\t\t\t\tfrom : {\r\n\t\t\t\t\tdeck     : a.decks[deckIndex],\r\n\t\t\t\t\tcard     : _cards[cardIndex],//firstCard of moved deck\r\n\t\t\t\t\tcount    : _cards.length\r\n\t\t\t\t\t// deckName : a.decks[deckIndex].name\r\n\t\t\t\t},\r\n\t\t\t\tto : {\r\n\t\t\t\t\tdeck     : a.decks[deckIndex_2],\r\n\t\t\t\t\tlastCard : _card_to,\r\n\t\t\t\t\tcount    : _cards_to.length\r\n\t\t\t\t\t// deckName : a.decks[deckIndex_2].name\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\tvar decksToPut = function(_cards, _take, deckIndex, cardIndex) {\r\n\r\n\t\t\tfor(var deckIndex_2 in a.decks) {\r\n\t\t\t\t// ...all without current\r\n\t\t\t\tif(deckIndex != deckIndex_2) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar _put = a.decks[deckIndex_2].Put(_take);\r\n\t\t\t\t\tif(_put) {\r\n\t\t\t\t\t\tput(deckIndex_2, deckIndex, cardIndex, _cards)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar cardsInTakeDeck = function(_cards) {\r\n\r\n\t\t\tfor(var cardIndex in _cards) {\r\n\t\t\t\tvar _id = _cards[cardIndex].id;\r\n\t\t\t\t// check can take this card/deck\r\n\t\t\t\tvar _take = a.decks[deckIndex].Take(_id);\r\n\t\t\t\tif(_take) {\r\n\t\t\t\t\t// check put taked card/deck iinto another decks\r\n\t\t\t\t\tdecksToPut(_cards, _take, deckIndex, cardIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.log('%cTIPS', 'color : red; font-size : 30pt; font-weigth : bold;', 'allToAll', a);\r\n\t\t\r\n\t\t// each decks\r\n\t\tfor(var deckIndex in a.decks) {\r\n\t\t\tvar _cards = a.decks[deckIndex].cards;\r\n\t\t\t// each cards in  current deck\r\n\t\t\tcardsInTakeDeck(_cards);\r\n\t\t\t\r\n\t\t}\r\n\t\treturn _moves;\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/tips/tipsRules.js\n **/","'use strict';\r\n\r\nimport share    from 'share';\r\nimport defaults from 'defaults';\r\nimport common   from 'common';\r\n\r\nimport Tips  from 'tips';\r\nimport Field from 'field';\r\n\r\nexport default function(moveDeck, cursorMove) {\r\n\r\n\tvar _autoTips = [];\r\n\tvar _tips = Tips.getTips();\r\n\tfor(i in _tips) {\r\n\t\tif(_tips[i].from.card.id == moveDeck[0].card.id) {\r\n\t\t\t_autoTips.push(_tips[i]);\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(_autoTips.length == 0) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// move card to closest deck of a possible move\r\n\tvar _min_distance       = -1,\r\n\t\t_tip_index          = 0,\r\n\t\t_in_direction_count = 0;\r\n\r\n\tvar _field = Field();\r\n\tvar _homeGroups = _field.homeGroups;\r\n\t\r\n\tif(_homeGroups) {\r\n\t\tvar _tips = [];\r\n\t\tfor(var i in _homeGroups) {\r\n\t\t\tfor(var t in _autoTips) {\r\n\t\t\t\tif(_autoTips[t].to.deck.parent == _homeGroups[i]) {\r\n\t\t\t\t\t_tips.push(_autoTips[t]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(_tips.length) _autoTips = _tips;\r\n\t}\r\n\r\n\tif(_autoTips.length >= 2) {\r\n\r\n\t\tfor(var i in _autoTips) {\r\n\r\n\t\t\tvar center_from = {\r\n\t\t\t\tx : cursorMove.deckPosition.x + (defaults.card.width ),\r\n\t\t\t\ty : cursorMove.deckPosition.y + (defaults.card.height)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar _destination_deck_last_card_position = _autoTips[i].to.deck.padding(_autoTips[i].to.deck.cards.length);\r\n\t\t\tvar center_to = {\r\n\t\t\t\tx : _destination_deck_last_card_position.x + (defaults.card.width ),\r\n\t\t\t\ty : _destination_deck_last_card_position.y + (defaults.card.height)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t_autoTips[i].distance = Math.sqrt(common.sqr(center_from.x - center_to.x) + common.sqr(center_from.y - center_to.y));\r\n\t\t\t_autoTips[i].inDirection = false;\r\n\t\t\tif(\r\n\t\t\t\t(cursorMove.direction.x > 0 && center_to.x > center_from.x)\r\n\t\t\t || (cursorMove.direction.x < 0 && center_to.x < center_from.x)\r\n\t\t\t) {\r\n\t\t\t\t_autoTips[i].inDirection = true;\r\n    \t\t\t_in_direction_count += 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tfor(var i in _autoTips) {\r\n\r\n\t\t\tif(_min_distance == '-1') {\r\n\t\t\t\tif(_in_direction_count == 0) {\r\n\t\t\t\t\t_min_distance = _autoTips[i].distance;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(_autoTips[i].inDirection) {\r\n\t\t\t\t\t\t_min_distance = _autoTips[i].distance;\r\n\t\t\t\t\t\t_tip_index = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(_autoTips[i].distance < _min_distance) {\r\n\t\t\t\tif(_in_direction_count == 0) {\r\n\t\t\t\t\t_min_distance = _autoTips[i].distance;\r\n\t\t\t\t\t_tip_index = i;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(_autoTips[i].inDirection) {\r\n\t\t\t\t\t\t_min_distance = _autoTips[i].distance;\r\n\t\t\t\t\t\t_tip_index = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _autoTips[_tip_index]\r\n\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/tips/bestTip.js\n **/","'use strict';\r\n\r\n// module.exports = function(main, share) {\r\nimport share     from 'share';\r\nimport event     from 'event';\r\nimport defaults  from 'defaults';\r\nimport common    from 'common';\r\n\r\nimport Group     from 'addGroup';\r\nimport Deck      from 'addDeck';\r\nimport Tips      from 'tips';\r\nimport tipsRules from 'tipsRules';\r\n\r\nvar _field = null;\r\n\t// _params = {},\r\n\t// _elements = {};\r\n\r\nvar Field = function(data) {\r\n\r\n\t// window.currentVersion = '0.11';\r\n\r\n\t// TODO избавиться от share.field и вообще от share ?\r\n\t// console.log('FIELD', data, _field);\t\r\n\t\r\n\t// if(!data && share.field) {\r\n\t// \treturn share.field;\r\n\t// }\r\n\r\n\tif(!data) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcommon.unlock();\r\n\t\r\n\tif(data && _field) {\r\n\t\t\r\n\t\t// console.log('CLEAR');\r\n\t\t\r\n\t\t_field.clear();\r\n\t} else {\r\n\t\tshare.set('elements', {});\r\n\t}\r\n\t\r\n\tvar a = null;\r\n\ttry {\r\n\t\t// BABEL BUG\r\n\t\t// a = JSON.parse(JSON.stringify(data));\r\n\t\ta = Object['assign'] ? Object['assign']({}, data) : JSON.parse(JSON.stringify(data));\r\n\t\t// a = _.clone(data);\r\n\t} catch(e) {\r\n\t\ta = data;\r\n\t\tconsole.warn('Field input params is not JSON, maybe the rules are wrong.');\r\n\t\t// 'zxczxc';\r\n\t\t// console.log(JSON.parse(JSON.stringify(data)));\r\n\t\t// console.log(data);\r\n\t}\r\n\r\n\t// share.set(\r\n\t// \t'spriteTexture', \r\n\t// \ttypeof a.theme == 'object' \r\n\t// \t\t? a       .theme.spriteTexture \r\n\t// \t\t: defaults.theme.spriteTexture\r\n\t// );\r\n\r\n\t// share.set(\r\n\t// \t'textureSuits', \r\n\t// \ttypeof a.theme == 'object' \r\n\t// \t\t? a       .theme.textureSuits \r\n\t// \t\t: defaults.theme.textureSuits\r\n\t// );\r\n\r\n\tthis.homeGroups = a.homeGroups ? a.homeGroups : [];\r\n\t\r\n\tshare.set(\r\n\t\t'debugLog', \r\n\t\ta.debugLog && typeof a.debugLog == 'boolean' \r\n\t\t\t? a.debugLog \r\n\t\t\t: defaults.debugLog\r\n\t);\r\n\r\n\t// Tips\r\n\r\n\tif(typeof a.showTips == 'boolean' && a.showTips) {\r\n\t\tTips.showTips({init : true});\r\n\t} else {\r\n\t\tTips.hideTips({init : true});\r\n\t}\r\n\r\n\t// console.log('SHOW TIPS:', share.get('showTips'));\r\n\r\n\tshare.set(\r\n\t\t'showTipsDestination', \r\n\t\ttypeof a.showTipsDestination == 'boolean' \r\n\t\t\t? a       .showTipsDestination \r\n\t\t\t: defaults.showTipsDestination\r\n\t);\r\n\tshare.set(\r\n\t\t'showTipPriority', \r\n\t\ttypeof a.showTipPriority == 'boolean' \r\n\t\t\t? a       .showTipPriority \r\n\t\t\t: defaults.showTipPriority\r\n\t);\r\n\r\n\tvar _autoTips = a.autoTips\r\n\t\t? typeof a.autoTips == 'string'\r\n\t\t\t? tipsRules[a.autoTips]\r\n\t\t\t\t? a.autoTips       // tipsRules[a.autoTips]\r\n\t\t\t\t: defaults.tipRule // tipsRules[defaults.tipRule]\r\n\t\t\t: defaults.tipRule     // a.autoTips //function OR object\r\n\t\t: defaults.tipRule         //tipsRules[defaults.tipRule]\r\n\t\r\n\tshare.set('autoTips', _autoTips);\r\n\t\r\n\t// console.log('set autoTips', _autoTips)\r\n\r\n\tshare.set(\r\n\t\t'moveDistance', \r\n\t\ta.moveDistance && typeof a.moveDistance == 'number' \r\n\t\t\t? a.moveDistance \r\n\t\t\t: defaults.moveDistance\r\n\t);\r\n\r\n\t// check Win\r\n\r\n\tshare.set('winCheck', a.winCheck);\r\n\r\n\tif(a.winCheck && a.winCheck.callback && typeof a.winCheck.callback == 'function') {\r\n\t\twinCheckCallback = a.winCheck.callback;\r\n\t}\r\n\r\n\t// extension: winCheckMethods\r\n\r\n\tif(a.saveStep && typeof a.saveStep == 'function') {\r\n\t\t// console.log('a.saveStep', a.saveStep);\r\n\t\tsaveStepCallback = a.saveStep;\r\n\t}\r\n\r\n\t// parameters and values\r\n\r\n\tshare.set(\r\n\t\t'zoom', \r\n\t\t(a.zoom && typeof a.zoom == 'number') \r\n\t\t\t? a.zoom \r\n\t\t\t: defaults.zoom\r\n\t);\r\n\r\n\tthis.tipsParams = {};\r\n\t\r\n\tfor(var tipParamName in defaults.tipsParams) {\r\n\t\tthis.tipsParams[tipParamName] = (a.tipsParams && typeof a.tipsParams[tipParamName] != \"undefined\")\r\n\t\t\t? a.tipsParams[tipParamName]\r\n\t\t\t: defaults.tipsParams[tipParamName]\r\n\t}\r\n\r\n\tthis.inputParams = {};\r\n\tfor(var inputParamName in defaults.inputParams) {\r\n\t\tthis.inputParams[inputParamName] = (a.inputParams && typeof a.inputParams[inputParamName] != \"undefined\")\r\n\t\t\t? a.inputParams[inputParamName]\r\n\t\t\t: defaults.inputParams[inputParamName]\r\n\t}\r\n\r\n\t// var _animation = typeof a.animation == 'boolean' \r\n\t// \t? a.animation \r\n\t// \t: defaults.animation;\r\n\t// this.animation = _animation;\r\n\t// share.set('animation', _animation);\r\n\r\n\tvar _can_move_flip = a.can_move_flip && typeof a.can_move_flip == 'boolean' \r\n\t\t? a.can_move_flip \r\n\t\t: defaults.canMoveFlip\r\n\tshare.set('can_move_flip', _can_move_flip);\r\n\r\n\tshare.set(\r\n\t\t'debugLabels', \r\n\t\t(a.debugLabels && typeof a.debugLabels == 'boolean')\r\n\t\t\t? a.debugLabels\r\n\t\t\t: defaults.debugLabels\r\n\t);\r\n\r\n\tthis.Draw = function(data) {\r\n\r\n\t\tshare.set('noRedraw',  true);\r\n\r\n\t\tif(data) {\r\n\t\t\ta = Object['assign'] \r\n\t\t\t\t? Object['assign']({}, data)\r\n\t\t\t\t: JSON.parse(JSON.stringify(data));\r\n\t\t} \r\n\r\n\t\tif(!a) return;\r\n\t\t\r\n\t\t// console.log('draw all');\t\t\r\n\t\t\r\n\t\tif(a.groups) {\r\n\t\t\tfor(var groupName in a.groups) {\r\n\t\t\t\ta.groups[groupName].name = groupName;\r\n\t\t\t\tGroup.addGroup(a.groups[groupName]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(a.decks) {\r\n\t\t\tfor(var e in a.decks) {\r\n\t\t\t\tDeck.addDeck(a.decks[e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// fill elements in field\r\n\t\tif(a.fill) {\r\n\t\t\t\r\n\t\t\tvar _decks = Deck.getDecks(),\r\n\t\t\t\t_fill  = Object['assign'] \r\n\t\t\t\t\t? Object['assign']([], a.fill) \r\n\t\t\t\t\t: JSON.parse(JSON.stringify(a.fill));\r\n\r\n\t\t\tfor(;_fill.length;) {\r\n\t\t\t\tfor(var deckId in _decks) {\r\n\t\t\t\t\tif(_fill.length) {\r\n\t\t\t\t\t\tvar _card = _fill.shift();\r\n\t\t\t\t\t\t_decks[deckId].Fill([_card]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tshare.set('noRedraw',  false);\r\n\t\tthis.Redraw();\r\n\t\t\r\n\t\tTips.checkTips();\r\n\r\n\t\tevent.dispatch('newGame');\r\n\t\tcommon.unlock();\r\n\r\n\t}\r\n\r\n\t// checkTips()\r\n\r\n\tif(a.startZIndex && typeof a.startZIndex == 'number') {\r\n\t\tshare.set('start_z_index', a.startZIndex);\r\n\t}\r\n\r\n\r\n\r\n};\r\n\r\nField.prototype.clear = function() {\r\n\t\r\n\t// console.log('clear field', share);\r\n\t\r\n\tvar _elements = share.get('elements');\r\n\tfor(var i in _elements) {\r\n\t\t// console.log(elements[i]);\r\n\t\tif(_elements[i].type == 'deck') {\r\n\t\t\t_elements[i].clear();\r\n\t\t\t_elements[i] = null;\r\n\t\t} else if(_elements[i].type == 'group') {\r\n\t\t\t_elements[i] = null;\r\n\t\t}\r\n\t}\r\n\tshare.set('elements', {});\r\n};\r\n\r\nField.prototype.Redraw = function(data) {\r\n\t\t\r\n\t// console.log('redraw field', data);\r\n\r\n\tvar a = null;\r\n\r\n\tif(data) {\r\n\r\n\t\ttry {\r\n\t\t\t// BABEL BUG\r\n\t\t\t// a = JSON.parse(JSON.stringify(data));\r\n\t\t\ta = Object['assign'] ? Object['assign']({}, data) : JSON.parse(JSON.stringify(data));\r\n\t\t\t// a = _.clone(data);\r\n\t\t\t// var g =  Object.assign({}, {});\r\n\t\t} catch(e) {\r\n\t\t\ta = data;\r\n\t\t\tconsole.warn('Field.Redraw input params is not JSON, can\\'t clone');\r\n\t\t}\r\n\r\n\t\tfor(var _groupName in a.groups) {\r\n\r\n\t\t\t// console.log('redraw group:', _groupName);\r\n\r\n\t\t\tvar _group = Group.Group(_groupName);\r\n\t\t\tif(_group) {\r\n\t\t\t\t_group.Redraw(a.groups[_groupName]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i in a.decks) {\r\n\t\t\t\r\n\t\t\t// console.log('redraw deck:', a.decks[i].name);\r\n\t\t\t\r\n\t\t\tvar _deck = Deck.Deck(a.decks[i].name);\r\n\t\t\tif(_deck) {\r\n\t\t\t\t_deck.Redraw(a.decks[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t} else {\r\n\t\tvar _decks = Deck.getDecks();\r\n\t\tfor(var i in _decks) {\r\n\t\t\t_decks[i].Redraw();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar _fieldExport = function(data) {\r\n\r\n\tif(data && _field) {// TODO THIS\r\n\t\t\r\n\t\t_field.clear();\r\n\t\t_field.Draw(data);\r\n\t}\r\n\r\n\tif(data && !_field) {\r\n\r\n\t\t_field = new Field(data);\r\n\t\tevent.dispatch('initField', {a : data});\r\n\t\t_field.Draw();\r\n\t};\r\n\t\r\n\t// this = _field\r\n\treturn _field;\r\n};\r\n\r\n// _fieldExport.prototype.Redraw = function() {\r\n// \t_field.Redraw();\r\n// };\r\n\r\nexport default _fieldExport;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/field.js\n **/","'use strict';\r\n\r\nimport event          from 'event';\r\nimport share          from 'share';\r\nimport defaults       from 'defaults';\r\nimport common         from 'common';\r\n\r\nimport Deck           from 'addDeck';\r\nimport groupFill      from 'groupFill';\r\nimport groupRedraw    from 'groupRedraw';\r\nimport decksGenerator from 'groupGenerator';\r\n\r\n\r\nvar groupConstructor = function(a, _id) {\r\n\t\r\n\tthis.type = 'group';\r\n\t\r\n\tvar id = _id;\r\n\t\r\n\tthis.getId = function() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tthis.name = a.name && typeof a.name == 'string' \r\n\t\t? a.name \r\n\t\t: ('name_' + id);\r\n\t\r\n\tthis.position = {\r\n\t\tx : a.position && a.position.x && typeof a.position.x == 'number' \r\n\t\t\t? a.position.x \r\n\t\t\t: 0,\r\n\t\ty : a.position && a.position.y && typeof a.position.y == 'number' \r\n\t\t\t? a.position.y \r\n\t\t\t: 0,\r\n\t};\r\n\r\n\tthis.placement = a.placement \r\n\t\t? {\r\n\t\t\tx : a.placement.x \r\n\t\t\t\t? a.placement.x \r\n\t\t\t\t: 0, \r\n\t\t\ty : a.placement.y \r\n\t\t\t\t? a.placement.y \r\n\t\t\t\t: 0\r\n\t\t} \r\n\t\t: null\r\n\r\n\tthis.decks = {};\r\n\t\r\n\t// сохраняем атрибуты чтобы прокинуть их колодам\r\n\tthis.parameters = {\r\n\t\tpaddingType  : a.paddingType  ? a.paddingType  : defaults.paddingType  ,\r\n\t\tflip         : a.flip         ? a.flip         : null                  ,\r\n\t\t// take         : a.take         ? a.take         : null               ,// ???\r\n\t\tshowSlot     : a.showSlot     ? a.showSlot     : defaults.showSlot     ,\r\n\t\ttakeRules    : a.takeRules    ? a.takeRules    : defaults.takeRules    ,\r\n\t\tputRules     : a.putRules     ? a.putRules     : defaults.putRules     ,\r\n\t\tfillRule     : a.fillRule     ? a.fillRule     : defaults.fillRule     ,\r\n\t\tautoHide     : a.autoHide     ? a.autoHide     : defaults.autoHide     ,\r\n\t\t\r\n\t\tpaddingX     : a.paddingX     ? a.paddingX     : defaults.paddingX     ,\r\n\t\tpaddingY     : a.paddingY     ? a.paddingY     : defaults.paddingY     ,\r\n\t\tflipPaddingX : a.flipPaddingX ? a.flipPaddingX : defaults.flipPaddingX ,\r\n\t\tflipPaddingY : a.flipPaddingY ? a.flipPaddingY : defaults.flipPaddingY ,\r\n\t\t\r\n\t\tactions      : a.actions      ? a.actions      : null                  ,\r\n\t\t\r\n\t\tafterStep    : (typeof a.afterStep == \"boolean\" ? a.afterStep : defaults.afterStep)\r\n\t};\r\n\t\r\n\t// console.log('AFTERSTEP#1', this.name, typeof a.afterStep, a.afterStep, defaults.afterStep, this.parameters.afterStep)\r\n\r\n\tthis.deckIndex = [];\r\n\r\n};\r\n\r\n// --------------------------------------------------------------------\r\n\r\n// Add deck to group\r\ngroupConstructor.prototype.addDeck = function(a) {\r\n\r\n\tif(!a) return;\r\n\tif(!a.position) {\r\n\t\ta.position = {\r\n\t\t\t'x' : 0, \r\n\t\t\t'y' : 0\r\n\t\t};\r\n\t}\r\n\r\n\t// сортировка элементов в группе по заданному индексу и порядку добавления\r\n\r\n\t\r\n\t// if(!a.position.x) { a.position.x = 0; }\r\n\t// if(!a.position.y) { a.position.y = 0; }\r\n\r\n\tif(!a.parent) a.parent = this.name;\r\n\t\r\n\ta.parentPosition = {\r\n\t\tx : this.position.x, \r\n\t\ty : this.position.y\r\n\t};\r\n\t\r\n\t// расставляем колоды в группе\r\n\t// 1 приоретет отдаётся параметру groupIndex\r\n\t// остальные вставляются в промежутки или добавляются в конец\r\n\tvar _index = 0;\r\n\t\r\n\tif( a.groupIndex \r\n\t && typeof a.groupIndex == 'number' \r\n\t && this.deckIndex[a.groupIndex - 1] \r\n\t && decks[ this.deckIndex[a.groupIndex - 1] ].this.deckIndex == a.this.deckIndex\r\n\t) {\r\n\t\tconsole.warn('Warning: duplicate groupIndex', a.groupIndex, 'changed to null');\r\n\t\ta.groupIndex = null;\r\n\t}\r\n\r\n\tif(a.groupIndex && typeof a.groupIndex == 'number') {\r\n\r\n\t\tif(this.deckIndex[a.groupIndex - 1]) {\r\n\t\t\t\r\n\t\t\tfor(;typeof this.deckIndex[_index] != 'undefined';_index += 1) {}\r\n\t\t\t\r\n\t\t\tif(placement) {\r\n\t\t\t\tvar _index    = this.deckIndex[a.groupIndex - 1];\r\n\t\t\t\tvar _elements = share.get('elements');\r\n\t\t\t\tif(placement.x) {\r\n\t\t\t\t\t_elements[_index].x( this.position.x + (placement.x + defaults.card.width) * _index );\r\n\t\t\t\t}\r\n\t\t\t\tif(placement.y) {\r\n\t\t\t\t\t_elements[_index].y( this.position.y + (placement.y + defaults.card.width) * _index );\r\n\t\t\t\t}\r\n\t\t\t\tshare.set('elements', _elements);\r\n\t\t\t}\r\n\r\n\t\t\tthis.deckIndex[_index] = this.deckIndex[a.groupIndex - 1];\r\n\t\t\tthis.deckIndex[a.groupIndex - 1] = true;\r\n\t\t\t_index = a.groupIndex - 1\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tthis.deckIndex[a.groupIndex - 1] = true;\r\n\t\t\t_index = a.groupIndex - 1\r\n\t\t}\r\n\r\n\t} else {\r\n\t\t// console.log('РАССТАВКА КОЛОД', this.deckIndex);\r\n\t\tfor(;typeof this.deckIndex[_index] != 'undefined';_index += 1) {};\r\n\t\tthis.deckIndex[_index] = true;\r\n\t}\r\n\t\r\n\t// смещаем координаты колод относиткльно координад группы\r\n\tif(this.placement) {\r\n\r\n\r\n\t\tif(this.placement.x) {\r\n\t\t\ta.position.x = (this.placement.x + defaults.card.width)  * (_index);\r\n\t\t}\r\n\t\tif(this.placement.y) {\r\n\t\t\ta.position.y = (this.placement.y + defaults.card.height) * (_index);\r\n\t\t}\r\n\t}\r\n\r\n\t// прокидываем некоторые атрибуты всем колодам группы (у атрибутов заданных колоде приоритет выше)\r\n\tif( this.parameters.paddingType  && typeof a.paddingType  == \"undefined\" ) { a.paddingType  = this.parameters.paddingType;  };\r\n\tif( this.parameters.flip         && typeof a.flip         == \"undefined\" ) { a.flip         = this.parameters.flip;         };\r\n\t// if( this.parameters.take      && typeof a.take         == \"undefined\" ) { a.take         = this.parameters.take;         };\r\n\tif( this.parameters.showSlot     && typeof a.showSlot     == \"undefined\" ) { a.showSlot     = this.parameters.showSlot;     };\r\n\tif( this.parameters.takeRules    && typeof a.takeRules    == \"undefined\" ) { a.takeRules    = this.parameters.takeRules;    };\r\n\tif( this.parameters.putRules     && typeof a.putRules     == \"undefined\" ) { a.putRules     = this.parameters.putRules;     };\r\n\tif( this.parameters.fillRule     && typeof a.fillRule     == \"undefined\" ) { a.fillRule     = this.parameters.fillRule;     };\r\n\tif( this.parameters.autoHide     && typeof a.autoHide     == \"undefined\" ) { a.autoHide     = this.parameters.autoHide;     };\r\n\t// changed\r\n\tif( this.parameters.paddingX     && typeof a.paddingX     == \"undefined\" ) { a.paddingX     = this.parameters.paddingX;     };\r\n\tif( this.parameters.paddingY     && typeof a.paddingY     == \"undefined\" ) { a.paddingY     = this.parameters.paddingY;     };\r\n\tif( this.parameters.flipPaddingX && typeof a.flipPaddingX == \"undefined\" ) { a.flipPaddingX = this.parameters.flipPaddingX; };\r\n\tif( this.parameters.flipPaddingY && typeof a.flipPaddingY == \"undefined\" ) { a.flipPaddingY = this.parameters.flipPaddingY; };\r\n\t\r\n\tif( this.parameters.actions      && typeof a.actions      == \"undefined\" ) { a.actions      = this.parameters.actions;      };\r\n\t\r\n\tif( typeof a.afterStep == \"undefined\" ) {\r\n\t\ta.afterStep = this.parameters.afterStep;\r\n\t};\r\n\r\n\t// console.log('AFTERSTEP#2', this.name, a.afterStep, this.parameters.afterStep)\r\n\t\r\n\t// console.log('%cGroup:addDeck->', 'background : red', this.name, a);\r\n\r\n\tvar _el = Deck.addDeck(a);\r\n\t\r\n\tthis.deckIndex[_index]  = _el.getId();\r\n\tthis.decks[_el.getId()] = _el;\r\n}\r\n\r\n// Fill group\r\ngroupConstructor.prototype.Fill = function(cardNames) {\r\n\tgroupFill.call(this, cardNames);\r\n}\r\n\r\ngroupConstructor.prototype.getDeckById = function(id) {\r\n\treturn this.decks[id];\r\n}\r\n\r\ngroupConstructor.prototype.getDecksByName = function(name) {\r\n\tvar _decks = {};\r\n\tfor(var d in this.decks) {\r\n\t\tif(this.decks[d].name == name) {\r\n\t\t\t_decks[d] = decks[d];\r\n\t\t}\r\n\t}\r\n\treturn _decks;\r\n}\r\n\r\n// Get decks from group\r\ngroupConstructor.prototype.getDecks = function(a) {\r\n\tvar _decks = [];\r\n\tfor(var i in this.decks) {\r\n\t\tif(a && a.visible) {\r\n\t\t\tif(this.decks[i].visible) {\r\n\t\t\t\t_decks.push(this.decks[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_decks.push(this.decks[i]);\r\n\t\t}\r\n\t}\r\n\treturn _decks;\r\n}\r\n\r\n// Redraw group\r\ngroupConstructor.prototype.Redraw = function(_a) {\r\n\tgroupRedraw.call(this, _a);\r\n}\r\n\r\n// -----------------------------------------------------------------------------------------------------------------------\r\n\r\nvar addGroup = function(a) {\r\n\r\n\tif(!a) return false;\r\n\tvar _id = 'group_' + common.genId();\r\n\t\r\n\tvar _el_group = new groupConstructor(a, _id);\r\n\r\n\tif(a.decks) {\r\n\r\n\t\t\r\n\t\tif(typeof a.decks == 'number') {\r\n\t\t\ta.decks = {\r\n\t\t\t\t\"generator\" : {\r\n\t\t\t\t\t\"type\"  : \"count\",\r\n\t\t\t\t\t\"count\" : a.decks\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\t\t\r\n\t\tif(a.decks.generator) {\r\n\t\t\t\r\n\t\t\tif(a.decks.generator.type) {\r\n\t\t\t\tif(decksGenerator[a.decks.generator.type]) {\r\n\t\t\t\t\ta.decks = decksGenerator[a.decks.generator.type].call(_el_group, a.decks.generator);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.warn('Deck generator type \"' + a.decks.generator.type + '\" not found.');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn('Deck generator type is null.');\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\r\n\t\t\ta.placement = null;\r\n\r\n\t\t};\r\n\r\n\t\t// TODO ADD RELATIONS\r\n\t\tconsole.log('BEFORE ADD RELATIONS', a.decks, a.decks.length)\r\n\r\n\t\tfor(var d in a.decks) {\r\n\t\t\t_el_group.addDeck(a.decks[d]);\r\n\t\t};\r\n\t};\r\n\r\n\tif(a.decksRelations) {\r\n\t\t\r\n\t\tfor(var i in a.decksRelations) {\r\n\t\t\t// TODO\r\n\t\t\tconsole.log('Relation', a.decksRelations[i]);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar _elements = share.get('elements');\r\n\t_elements[_id] = _el_group;\r\n\tshare.set('elements', _elements);\r\n\t\r\n\t// fill group\r\n\tif(a && a.fill) {\r\n\t\tvar _checkFillDeck = a.fill.length;\r\n\t\tif(_checkFillDeck) {\r\n\t\t\t_el_group.Fill(a.fill);\r\n\t\t}\r\n\t}\r\n\r\n\treturn _el_group;\r\n};\r\n\r\nvar Group = function(name) {\r\n\treturn common.getElementsByName(name, 'group')[0];\r\n};\r\n\t\r\nexport default {\r\n\taddGroup,\r\n\tGroup\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/group/addGroup.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport share    from 'share';\r\nimport defaults from 'defaults';\r\nimport common   from 'common';\r\n\r\nimport flipTypes      from 'flipTypes';\r\nimport readyPutRules  from 'readyPutRules';\r\nimport readyTakeRules from 'readyTakeRules';\r\nimport fillRules      from 'fillRules';\r\nimport paddingTypes   from 'paddingTypes';\r\nimport deckActions    from 'deckActions';\r\nimport Take           from 'deckTake';\r\nimport Put            from 'deckPut';\r\nimport genCardByName  from 'genCardByName';\r\nimport Group          from 'addGroup';\r\nimport History        from 'history';\r\n\r\nimport getDecks      from 'getDecks';\r\nimport getDeckById   from 'getDeckById';\r\nimport deckCardNames from 'deckCardNames';\r\nimport Deck          from 'getDeck';\r\n\r\nvar deckConstructor = function(a, _id) {\r\n\r\n\t// console.log(\"Deck:addDeck\", a);\r\n\r\n\tif(!a) return false;\r\n\r\n\tthis.cards = [];\r\n\t\r\n\tthis.getTopCard = function() {\r\n\r\n\t\tif(this.cards.length == 0) { return false; };\r\n\t\treturn this.cards[this.cards.length - 1];\r\n\t}\r\n\t\r\n\t// parameters\r\n\tthis.type = 'deck';\r\n\tthis.fill = false;\r\n\tvar id = _id;\r\n\r\n\tthis.getId = function() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tthis.locked = a.locked ? true : false;\r\n\r\n\tvar _parent_el   = Group.Group(a.parent),\r\n\t\t_parent_name = _parent_el ? _parent_el.name : 'xname',// ???\r\n\t\t_new_id      = _parent_el ? _parent_el.getDecks().length : id;\r\n\t\r\n\tthis.name = a.name && typeof a.name == 'string' \r\n\t\t? a.name \r\n\t\t: (_parent_name + '_' + _new_id);\r\n\r\n\tthis.visible= a.visible && typeof a.visible == 'boolean' ? a.visible : true;// default true\r\n\t\r\n\tthis.groupIndex = a.groupIndex && typeof a.groupIndex == 'number' ? a.groupIndex : null;\r\n\r\n\tthis.parent= a.parent && typeof a.parent == 'string'  ? a.parent : 'field';\r\n\t\r\n\tthis.autoHide = a.autoHide && typeof a.autoHide == 'boolean' ? a.autoHide : defaults.autohide;\r\n\t\r\n\t// changed parameters\r\n\tif(typeof a.showSlot == \"undefined\") {\r\n\t\ta.showSlot = defaults.showSlot;\r\n\t}\r\n\t\r\n\t// DOM\r\n\tvar params = {};\r\n\tparams.x              = 0; \r\n\tparams.y              = 0; \r\n\tparams.rotate         = this.rotate = 0; \r\n\tparams.padding_y      = ( a.paddingY     && typeof a.paddingY     == 'number' ) ? a.paddingY     : defaults.padding_y;\r\n\tparams.flip_padding_y = ( a.flipPaddingY && typeof a.flipPaddingY == 'number' ) ? a.flipPaddingY : defaults.flip_padding_y;\r\n\tparams.padding_x      = ( a.paddingX     && typeof a.paddingX     == 'number' ) ? a.paddingX     : defaults.padding_x;\r\n\tparams.flip_padding_x = ( a.flipPaddingX && typeof a.flipPaddingX == 'number' ) ? a.flipPaddingX : defaults.flip_padding_x;\r\n\tparams.startZIndex    = ( a.startZIndex  && typeof a.startZIndex  == 'number' ) ? a.startZIndex  : defaults.startZIndex;\r\n\t\r\n\t// ------------- FLIP -------------\r\n\t\r\n\tvar flipType = a.flip && typeof a.flip == 'string' \r\n\t\t? a.flip \r\n\t\t: defaults.flip_type,\r\n\t\tcheckFlip = flipTypes[flipType];\r\n\r\n\tthis.flipCheck = function() {\r\n\t\t// console.log('flipCheck', flipType, this.name);\r\n\t\tfor(var i in this.cards) {\r\n\t\t\tcheckFlip(this.cards[i], i|0, this.cards.length);\r\n\t\t}\r\n\t\tevent.dispatch('redrawDeckFlip', this);\r\n\t}\r\n\t\r\n\t// ------------- PUT -------------\r\n\r\n\tthis.putRules = a.putRules \r\n\t\t? typeof a.putRules == 'function' \r\n\t\t\t? a.putRules\r\n\t\t\t: typeof a.putRules == 'string' \r\n\t\t\t\t? readyPutRules[a.putRules] \r\n\t\t\t\t\t? readyPutRules[a.putRules]\r\n\t\t\t\t\t: readyPutRules[defaults.putName]\r\n\t\t\t\t// : typeof a.putRules === 'object' \r\n\t\t\t\t: a.putRules.constructor == Array \r\n\t\t\t\t\t? a.putRules\r\n\t\t\t\t\t: readyPutRules[defaults.putName]\r\n\t\t: readyPutRules[defaults.putName];\r\n\r\n\t// ------------- TAKE -------------\r\n\t\r\n\t// можно ли взять карту/стопку\r\n\tthis.takeRules = a.takeRules;\r\n\r\n\t// ------------- FILL -------------\r\n\t\r\n\tvar fillRule = (\r\n\t\ta.fillRule \r\n\t && typeof a.fillRule == \"string\" \r\n\t && typeof fillRules[a.fillRule] == \"function\"\r\n\t) ? fillRules[a.fillRule]\r\n\t  : fillRules['not'];\r\n\t\r\n\t// ------------- PADDING -------------\r\n\t\r\n\t// порядок карт в колоде\r\n\tvar padding = a.paddingX || a.paddingY\r\n\t\t? paddingTypes['special'] \r\n\t\t: a.paddingType \r\n\t\t\t? (typeof a.paddingType == 'string' && paddingTypes[a.paddingType]) \r\n\t\t\t\t? paddingTypes[a.paddingType] \r\n\t\t\t\t: paddingTypes['none']\r\n\t\t\t: paddingTypes[defaults.paddingType];\r\n\r\n\tthis.padding = function(index) {\r\n\t\tvar _padding = padding(params, this.cards[index], index, this.cards.length, this.cards);\r\n\t\treturn _padding;\r\n\t}\r\n\t\r\n\tthis.actions = [];\r\n\r\n\tif(a.actions) {\r\n\t\tthis.actions = a.actions;\r\n\t\tdeckActions.addActions.call(this);\r\n\t};\r\n\r\n\tthis.afterStep = a.afterStep;\r\n\r\n\t// TODO\r\n\tthis.relations = [];\r\n\t\r\n\tevent.dispatch('addDeckEl', {\r\n\t\ta     : a, \r\n\t\tdeck  : this,\r\n\t\tparams: params\r\n\t});\r\n\r\n\tevent.listen('moveDragDeck', function(data) {\r\n\t\t\r\n\t\tif(data.destination.name != this.deck.name) { return; }\r\n\t\t\r\n\t\tvar _deck = data.destination;\r\n\t\t\r\n\t\tif(_deck && !this.fill && this.callback({deck : _deck})) {\r\n\t\t\tthis.deck.fill = true;\r\n\t\t\tHistory.add({fill : {\r\n\t\t\t\tdeck : this.deck.name\r\n\t\t\t}});\r\n\t\t\t// event.dispatch('fillDeck', {deck : this.deck});\r\n\t\t}\r\n\t}.bind({\r\n\t\tdeck     : this, \r\n\t\tcallback : fillRule\r\n\t}));\r\n\r\n\tthis.Redraw = function(data) {\r\n\t\t\r\n\t\tevent.dispatch('redrawDeck', {\r\n\t\t\tdeck   : this,\r\n\t\t\tdata   : data,\r\n\t\t\tparams : params,\r\n\t\t\tcards  : this.cards\r\n\t\t});\r\n\t};\r\n\r\n};\r\n\r\n// -------------------------------------------------------------------------------------------------\r\n\r\ndeckConstructor.prototype.Fill = function(cardNames) {\r\n\r\n\tfor(var i in cardNames) {\r\n\t\tthis.genCardByName(cardNames[i]);\r\n\t}\r\n};\r\n\r\ndeckConstructor.prototype.clear = function() {\r\n\tfor(var i in this.cards) {\r\n\t\tevent.dispatch('removeEl', this.cards[i]);\r\n\t\tthis.cards[i] = null;\r\n\t}\r\n\tthis.cards = [];\r\n\tevent.dispatch('removeEl', this);\r\n};\r\n\r\ndeckConstructor.prototype.Push = function(deck) {// , parentName) {\r\n\tfor(var i in deck) {\r\n\t\tdeck[i].parent = this.getId();\r\n\t\tthis.cards.push(deck[i]);\r\n\t}\r\n};\r\n\r\ndeckConstructor.prototype.Pop = function(count, clearParent) {\r\n\t\t\r\n\tif(this.cards.length < count) return false;\r\n\r\n\tvar _deck = [];\r\n\tfor(;count;count -= 1) {\r\n\t\tvar _pop = this.cards.pop();\r\n\t\tif(clearParent) _pop.parent = null;\r\n\t\t// console.log('POP:', _pop)\r\n\t\t_deck.push(_pop);\r\n\t\t_deck[_deck.length - 1].parent = null;\r\n\t}\r\n\t_deck.reverse();\r\n\r\n\t// что делать если вынули все карты\r\n\tif(this.autoHide && this.cards.length == 0) {\r\n\t\tthis.hide();\r\n\t}\r\n\t\r\n\tthis.Redraw();\r\n\r\n\treturn _deck;\r\n};\r\n\r\ndeckConstructor.prototype.Take = function(cardId) {\r\n\treturn Take.call(this, cardId);// ??? .call(this, attributes);\r\n};\r\n\r\n// проверяем, можем ли положить стопку/карту\r\n// возвращает true, если согласно правилам сюда можно положить карту\r\ndeckConstructor.prototype.Put = function(putDeck) {\r\n\treturn Put.call(this, putDeck);//(deckConstructor);\r\n};\r\n\r\n// создать карту\r\ndeckConstructor.prototype.genCardByName = function(name) {\r\n\treturn genCardByName.call(this, name);\r\n};\r\n\r\ndeckConstructor.prototype.hide = function() {\r\n\tthis.visible = false;\r\n\tHistory.add({hideDeck : this.name});\r\n\tthis.Redraw();\r\n};\r\n\r\ndeckConstructor.prototype.show = function() {\r\n\tthis.visible = false;\r\n\tHistory.add({showDeck : this.name});\r\n\tthis.Redraw();\r\n};\r\n\r\n// deckConstructor.prototype.getCards = function() {\r\n// \treturn this.cards;\r\n// }\r\n\r\ndeckConstructor.prototype.getCardsByName = function(cardName) {\r\n\tvar _cards = [];\r\n\tfor(var i in this.cards) {\r\n\t\tif(this.cards[i].name == cardName) {\r\n\t\t\t_cards.push(this.cards[i]);\r\n\t\t}\r\n\t}\r\n\treturn _cards;\r\n};\r\n\r\ndeckConstructor.prototype.Card = function(cardName) {\r\n\treturn this.getCardsByName(cardName)[0];\r\n};\r\n\r\ndeckConstructor.prototype.hideCards = function() {\r\n\tfor(var i in this.cards) {\r\n\t\tthis.cards[i].visible = false;\r\n\t\tevent.dispatch('hideCard', this.cards[i]);\r\n\t}\r\n};\r\n\r\ndeckConstructor.prototype.showCards = function() {\r\n\tfor(var i in this.cards) {\r\n\t\tthis.cards[i].visible = true;\r\n\t\tevent.dispatch('showCard', this.cards[i]);\r\n\t}\r\n};\r\n\r\ndeckConstructor.prototype.getCardsNames = function() {\r\n\tvar _cardsNames = [];\r\n\tfor(var i in this.cards) {\r\n\t\t_cardsNames.push(this.cards[i].name);\r\n\t};\r\n\treturn _cardsNames;\r\n};\r\n\r\n// deckConstructor.prototype.parent = function(a) {\r\n// \tif(typeof a == 'string') parent = a;\r\n// \treturn parent;\r\n// }\r\n\r\n// ------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nvar addDeck = function(a) {\r\n\r\n\t// console.log('addDeck', a);\r\n\r\n\tif(!a) return false;\r\n\t\r\n\tvar _id = 'deck_' + common.genId();\r\n\t\r\n\tvar _a = Object['assign'] \r\n\t\t? Object['assign']({}, a) \r\n\t\t: JSON.parse(JSON.stringify(a));\r\n\t\r\n\tvar _el_deck = new deckConstructor(_a, _id);\r\n\r\n\t// fill deck\r\n\tif(a.fill) {\r\n\t\tfor(var i in a.fill) {\r\n\t\t\tif(typeof a.fill[i] == 'string') {\r\n\t\t\t\t_el_deck.genCardByName(a.fill[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar _elements = share.get('elements');\r\n\r\n\t_elements[_id] = _el_deck;\r\n\t\r\n\tshare.set('elements', _elements);\r\n\r\n\treturn _el_deck;\r\n};\r\n\r\nexport default {\r\n\taddDeck       ,\r\n\tDeck          ,\r\n\tgetDecks      ,\r\n\tgetDeckById   ,\r\n\tdeckCardNames\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/addDeck.js\n **/","'use strict';\r\n\r\nexport default {\r\n\tnone    : function(card, i, length) {\r\n\t\tcard.flip = false;\r\n\t},\r\n\tall     : function(card, i, length) {\r\n\t\tcard.flip = true;\r\n\t},\r\n\tnotlast : function(card, i, length) {\r\n\t\tcard.flip = (i < length - 1) ? true : false;\r\n\t},\r\n\tfirst_1 : function(card, i, length) {\r\n\t\tcard.flip = (i < 1) ? true : false;\r\n\t},\r\n\tfirst_2 : function(card, i, length) {\r\n\t\tcard.flip = (i < 2) ? true : false;\r\n\t},\r\n\tfirst_3 : function(card, i, length) {\r\n\t\tcard.flip = (i < 3) ? true : false;\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/flipTypes.js\n **/","'use strict';\r\n\r\nimport common   from 'common';\r\nimport defaults from 'defaults';\r\n\r\nvar rpr = {\r\n\t\t\t\r\n\t// Internal use\r\n\t_downupcards : function(a) {\r\n\r\n\t\tif(a.cards.length == 0) return false;\r\n\t\t\r\n\t\tvar down = common.validateCardName(a.cards[a.cards.length  - 1].name);\r\n\t\tvar up   = common.validateCardName(a.putDeck[0].card.name);\r\n\t\tif(!down || !up) return false;\r\n\t\treturn {\r\n\t\t\tup   : up,\r\n\t\t\tdown : down\r\n\t\t}\r\n\t},\r\n\r\n\t_downupranknum : function(a) {\r\n\r\n\t\tvar du = rpr._downupcards(a);\r\n\t\treturn du ? {\r\n\t\t\tdown : defaults.card.ranks.indexOf(du.down.rank),\r\n\t\t\tup   : defaults.card.ranks.indexOf(du.up.rank)\r\n\t\t} : false;\r\n\t},\r\n\r\n\t_isFirst : function(a, _name) {\r\n\t\tif(a.cards.length == 0) {\r\n\t\t\tvar _validate = null;\r\n\t\t\treturn (\r\n\t\t\t\t(_validate = common.validateCardName(a.putDeck[0].card.name))\r\n\t\t\t && _validate.rank == _name\r\n\t\t\t);\r\n\t\t}\r\n\t \treturn true;\r\n\t},\r\n\r\n\t// Rules\r\n\r\n\tstriped : function(a) {\r\n\t\tif(a.cards.length == 0) return true;\r\n\r\n\t\tvar color_A = common.validateCardName(a.cards[a.cards.length - 1].name).color,\r\n\t\t\tcolor_B = null;\r\n\r\n\t\tvar _validate = null;\r\n\t\tif(_validate = common.validateCardName(a.putDeck[0].card.name)) {\r\n\t\t\tcolor_B = _validate.color;\r\n\t\t}\r\n\t\t\r\n\t\treturn color_A != color_B;\r\n\t},\r\n\r\n\tfirstAce : function(a) {\t\t\t\r\n\t\treturn rpr._isFirst(a, \"1\");\r\n\t},\r\n\r\n\tfirstKing : function(a) {\r\n\t\treturn rpr._isFirst(a, \"k\");\r\n\t},\r\n\r\n\tnotForEmpty : function(a) {\r\n\t\treturn a.cards.length;\r\n\t},\r\n\r\n\toneRank : function(a) {\r\n\r\n\t\tif(a.cards.length == 0) return true;\r\n\t\tvar du = rpr._downupcards(a);\r\n\t\treturn du && du.up.rank == du.down.rank;\r\n\t},\r\n\t\r\n\toneSuit : function(a) {\r\n\t\tif(a.cards.length == 0) return true;\r\n\t\tvar du = rpr._downupcards(a);\r\n\t\treturn du && du.up.suit == du.down.suit;\r\n\t},\r\n\r\n\tany : function(a) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tnot : function(a) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tascendDeck : function(a) {//ascend deck by step\r\n\t\t\r\n\t\tif(a.putDeck.length == 1) return true;\r\n\t\t\r\n\t\tvar ruleCorrect = true;\r\n\t\tfor(var i in a.putDeck) {\r\n\t\t\tif(i > 0) {\r\n\t\t\t\tvar down = defaults.card.ranks.indexOf(\r\n\t\t\t\t\t\tcommon.validateCardName(a.putDeck[i - 1].card.name).rank\r\n\t\t\t\t\t),\r\n\t\t\t\t\tup   = defaults.card.ranks.indexOf(\r\n\t\t\t\t\t\tcommon.validateCardName(a.putDeck[i].card.name).rank\r\n\t\t\t\t\t);\r\n\t\t\t\t\r\n\t\t\t\truleCorrect = ruleCorrect && 1 + down == up;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ruleCorrect;\r\n\t},\r\n\r\n\tdescendDeck : function(a) {//ascend deck by step\r\n\t\t\r\n\t\tif(a.putDeck.length == 1) return true;\r\n\t\t\r\n\t\tvar ruleCorrect = true;\r\n\t\tfor(var i in a.putDeck) {\r\n\t\t\tif(i > 0) {\r\n\t\t\t\tvar down = defaults.card.ranks.indexOf(\r\n\t\t\t\t\t\tcommon.validateCardName(a.putDeck[i - 1].card.name).rank\r\n\t\t\t\t\t),\r\n\t\t\t\t\tup   = defaults.card.ranks.indexOf(\r\n\t\t\t\t\t\tcommon.validateCardName(a.putDeck[i].card.name).rank\r\n\t\t\t\t\t);\r\n\t\t\t\t\r\n\t\t\t\truleCorrect = ruleCorrect && down == 1 + up;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ruleCorrect;\r\n\t},\r\n\t\r\n\toneRankDeck : function(a) {\r\n\t\t\r\n\t\tif(a.putDeck.length == 1) return true;\r\n\t\t\r\n\t\tvar ruleCorrect = true;\r\n\t\tfor(var i in a.putDeck) {\r\n\t\t\tif(i > 0) {\r\n\t\t\t\tvar down = common.validateCardName(a.putDeck[i - 1].card.name).suit,\r\n\t\t\t\t\tup   = common.validateCardName(a.putDeck[i].card.name).suit\r\n\t\t\t\t\r\n\t\t\t\truleCorrect = ruleCorrect && down == up;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ruleCorrect;\r\n\t},\r\n\r\n\tascend : function(a) {\r\n\t\t\r\n\t\tif(a.cards.length == 0) return true;\r\n\r\n\t\tvar da = rpr._downupranknum(a);\r\n\t\treturn da && da.down < da.up;\r\n\t},\r\n\r\n\tdescent : function(a) {\r\n\t\t\r\n\t\tif(a.cards.length == 0) return true;\r\n\r\n\t\tvar da = rpr._downupranknum(a);\r\n\t\treturn da && da.down > da.up;\r\n\t},\r\n\r\n\tdescentOne : function(a) {// one step\r\n\t\t\r\n\t\tif(a.cards.length == 0) return true;\r\n\r\n\t\tvar da = rpr._downupranknum(a);\r\n\t\treturn da && da.down == 1 + da.up;\r\n\t},\r\n\r\n\tascendOne : function(a) {// one step\r\n\t\t\r\n\t\tif(a.cards.length == 0) return true;\r\n\r\n\t\tvar da = rpr._downupranknum(a);\r\n\t\treturn da && 1 + da.down == da.up;\r\n\t},\r\n\r\n\tascdescOne : function(a) {\r\n\t\t\r\n\t\tif(a.cards.length == 0) return true;\r\n\r\n\t\tvar da = rpr._downupranknum(a);\r\n\t\treturn da && Math.abs(da.down - da.up) == 1;\r\n\t},\r\n\r\n\tsumm14     : function(a) {\r\n\r\n\t\tif(a.cards.length == 0) return true;\r\n\r\n\t\tvar du = rpr._downupcards(a);\r\n\t\treturn du.down.value + du.up.value == 14;\r\n\t}\r\n\r\n};\r\n\r\nexport default rpr;\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/readyPutRules.js\n **/","'use strict';\r\n\r\nexport default {\r\n\t\t\t\t\r\n\t// SimpleRules\r\n\tnot      : function(a) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tnotFirst : function(a) {\r\n\t\treturn a.cardIndex > 0;\r\n\t},\r\n\r\n\tany      : function(a) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tonlytop  : function(a) {\r\n\r\n\t\treturn a.cardIndex == a.deckLength - 1;\r\n\t},\r\n\t\r\n\t// TODO rules\r\n\t\r\n\task : function(a) {\r\n\t\tconsole.log(a);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tdesc : function(a) {\r\n\t\tconsole.log(a);\r\n\t\treturn true;\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/readyTakeRules.js\n **/","'use strict';\r\n\r\nimport defaults from 'defaults';\r\n\r\nexport default {\r\n\t\r\n\tdeckLength : function(a) {\r\n\t\treturn defaults.card.ranks.length <= a.deck.cards.length;\r\n\t},\r\n\t\r\n\tnot : function() {\r\n\t\treturn false;\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/fillRules.js\n **/","'use strict';\r\n\r\nexport default {\r\n\t\r\n\tnone : function(params, card, index, length, deck) {\r\n\t\treturn {x : params.x, y : params.y};\r\n\t},\r\n\tlast_three_min : function(params, card, index, length, deck) {\r\n\t\tif(index > length - 3) {\r\n\t\t\tif(length > 3) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx : params.x - (length - 3 - index) * 2,\r\n\t\t\t\t\ty : params.y - (length - 3 - index)\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx : params.x + (index * 2),\r\n\t\t\t\t\ty : params.y + (index|0)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn {x : x, y : y};\r\n\t\t}\r\n\t},\r\n\ttwindeck_typeA : function(params, card, index, length, deck) {\r\n\r\n\t\tvar twindeck_max_cards       = 24,\r\n\t\t\ttwindeck_deck_length     = 3;\r\n\t\t\r\n\t\tvar _padding = {\r\n\t\t\tx : 2,\r\n\t\t\ty : 1\r\n\t\t}\r\n\r\n\t\tvar _depth = (length / twindeck_max_cards * twindeck_deck_length)|0;\r\n\t\tif(_depth >= twindeck_deck_length) _depth = twindeck_deck_length - 1;\r\n\r\n\t\tvar _plus = index - (length - _depth - 1);\r\n\t\tif(_plus < 0) _plus = 0;\r\n\r\n\t\treturn {\r\n\t\t\tx : params.x + _padding.x * _plus, \r\n\t\t\ty : params.y + _padding.y * _plus\r\n\t\t};\r\n\t},\r\n\tradial : function(params, card, index, length, deck) {\r\n\r\n        //              b\r\n        //       C  ..`:   A = sin(b) * C\r\n        //     ...``   :B  B = cos(b) * C\r\n        // a.``.......+:\r\n        //        A     y 90deg\r\n        var _depth  = 1,\r\n        \t_radius = index * _depth,\r\n        \t// _step   = 180 / 16,\r\n        \t// _card   = defaults.card,\r\n        \t_angle  = params.rotate,//_step / 2 + 270;\r\n        \t_deg    = Math.PI / 180,\r\n        \t_a      = Math.sin(_angle * _deg) * _radius,\r\n        \t_b      = Math.cos(_angle * _deg) * _radius;\r\n        // if(_angle > 360) _angle -= 360;\r\n\t\treturn {\r\n            x : params.x + _a,// - _card.width  / 2,\r\n            y : params.y - _b// - _card.height / 2\r\n\t\t};\r\n        // console.log('radial:', params, card, index, length, deck);\r\n\t},\r\n\tspecial : function(params, card, index, length, deck) {\r\n\t\t\r\n\t\tvar _y = params.y, _x = params.x;\r\n\t\t\r\n\t\tfor(var i = 0; i < index; i += 1) {\r\n\t\t\t_y += deck[i] && deck[i].flip ? params.flip_padding_y : params.padding_y;\r\n\t\t\t_x += deck[i] && deck[i].flip ? params.flip_padding_x : params.padding_x;\r\n\t\t}\r\n\t\treturn {x : _x, y : _y};\r\n\t},\r\n\tvertical: function(params, card, index, length, deck) {\r\n\t\tvar _y = params.y;\r\n\t\tfor(var i = 0; i < index; i += 1) _y += deck[i] && deck[i].flip ? params.flip_padding_y : params.padding_y;\r\n\t\tvar _return = {\r\n\t\t\tx : params.x,\r\n\t\t\ty : _y\r\n\t\t};\r\n\t\t// console.log('vertical:', deck.length, index, _return);\r\n\t\treturn _return;\r\n\t},\r\n\thorizontal: function(params, card, index, length, deck) {\r\n\t\tvar _x = params.x;\r\n\t\tfor(var i = 0; i < index; i += 1) _x += deck[i] && deck[i].flip ? params.flip_padding_x : params.padding_x;\r\n\t\tvar _return = {\r\n\t\t\tx : _x,\r\n\t\t\ty : params.y\r\n\t\t};\r\n\t\t// console.log('horizontal:', deck.length, index, _return);\r\n\t\treturn _return;\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/paddingTypes.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport share    from 'share';\r\nimport defaults from 'defaults';\r\nimport common   from 'common';\r\n\r\n// Actions\r\nimport twindeckAction   from 'twindeckAction';\r\nimport dealerdeckAction from 'dealerdeckAction';\r\nimport kickAction       from 'kickAction';\r\n\r\nvar _actions = {\r\n\t\"twindeck\"   : twindeckAction  ,\r\n\t\"dealerdeck\" : dealerdeckAction,\r\n\t\"kick\"       : kickAction      ,\r\n\t\"avalanche\"  : function(e) {// \r\n\t\t// listen avalanche\r\n\t}\r\n};\r\n\r\n// ------------------------------------------------------------------------------------------\r\n\r\n// History extension\r\n// History.addUndoMethods({twindeck : function(a) {\r\n// \tif(a.twindeck) {\r\n\t\t\r\n// \t\tvar _deck_from = Deck.Deck(a.twindeck.from),\r\n// \t\t\t_deck_to   = Deck.Deck(a.twindeck.to);\r\n\t\t\r\n// \t\t// TODO\r\n// \t\t// deck_to cards [moveCards] -> deck_from\r\n// \t\tvar _moveDeck = _deck_to.Pop(a.twindeck.moveCards.length);\r\n// \t\tif(_moveDeck.length) {\r\n// \t\t\t_deck_from.Push(_moveDeck);\r\n// \t\t}\r\n\r\n// \t\tvar _twindeck = [];\r\n// \t\tfor(var i in a.twindeck.toHide) {\r\n// \t\t\tif(_deck_from.twindeck.length) {\r\n// \t\t\t\t_twindeck.push(\r\n// \t\t\t\t\t_deck_from.twindeck.pop()\r\n// \t\t\t\t);\r\n// \t\t\t}\r\n// \t\t}\r\n// \t\t_twindeck.reverse();\r\n\t\t\r\n// \t\tif(_twindeck.length) {\r\n// \t\t\t_deck_to.Push(_twindeck);\r\n// \t\t}\r\n\r\n// \t\t_deck_from.flipCheck();\r\n// \t\t_deck_to  .showCards();\r\n// \t\t_deck_from.Redraw();\r\n// \t\t_deck_to  .Redraw();\r\n\t\t\r\n// \t\t// console.log('twindeck undo:', a.twindeck, share.deckCardNames(_deck_from.twindeck));\r\n// \t}\r\n// }});\r\n\r\n// History.addRedoMethods({twindeck : function(a) {\r\n// \tif(a.twindeck) {\r\n// \t\t// TODO\r\n// \t\tconsole.log('twindeck redo:', a.twindeck);\r\n// \t}\r\n// }});\r\n\r\nvar _decksActions  = [],\r\n\t_events = [];\r\n\r\nvar addActionEvent = function(_event) {\r\n\t\r\n\t// console.log('addActionEvent#1', _event);\r\n\t\r\n\tevent.listen(_event, function(data) {\r\n\r\n\t\t// console.log(_event, data, _decks);\r\n\r\n\t\tfor(var i in _decksActions) {\r\n\t\t\tif(_decksActions[i].event == _event) {\r\n\t\t\t\t\r\n\t\t\t\tvar _actionName = _decksActions[i].action;\r\n\t\t\t\t\r\n\r\n\t\t\t\tvar _canRun = _event == 'click'\r\n\t\t\t\t\t? data.name == _decksActions[i].deck.name\r\n\t\t\t\t\t: true;\r\n\t\t\t\t\r\n\t\t\t\tif(_canRun) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// console.log('RUN', _actionName, 'for', _decksActions[i].deck.name, 'on', _event);\r\n\t\t\t\t\t\r\n\t\t\t\t\t_actions[_actionName].call(\r\n\t\t\t\t\t\t_decksActions[i].deck, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tactionData : _decksActions[i].deck.actions[_actionName],\r\n\t\t\t\t\t\t\teventData  : data,\r\n\t\t\t\t\t\t\teventName  : _event\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// for(var actionName in _decksActions[i].deck.actions) {\r\n\t\t\t\t// if(_decksActions[i].actions[actionName].event == _event) {\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t// if(_actions[actionName]) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// _actions[actionName].call(_decks[i], _decks[i].actions[actionName], e);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// }\r\n\t\t\t\t// }\r\n\t\t\t// }\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\n// addActionEvent('click');\r\n\r\nvar addActions = function() {\r\n\r\n\t// console.log(this.name, 'add actions:', this);\r\n\r\n\tfor(var actionName in this.actions) {\r\n\r\n\t\tif(!this.actions[actionName].event) {\r\n\t\t\tthis.actions[actionName].event = 'click';\r\n\t\t}\r\n\r\n\t\tif(_actions[actionName]) {\r\n\t\t\t\r\n\t\t\t_decksActions.push({\r\n\t\t\t\tdeck   : this, \r\n\t\t\t\tevent  : this.actions[actionName].event,\r\n\t\t\t\taction : actionName\r\n\t\t\t});\r\n\r\n\t\t\t// console.log('add action:', actionName, this.actions[actionName].event, _events.indexOf(this.actions[actionName].event) < 0, _events);\r\n\t\t\tif(_events.indexOf(this.actions[actionName].event) < 0) {\r\n\t\t\t\t_events.push(this.actions[actionName].event);\r\n\t\t\t\taddActionEvent(this.actions[actionName].event);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.warn('Action', actionName, 'for', this.name, 'not found.');\r\n\t\t};\r\n\r\n\t}\r\n\tautoRunActions(this.actions);\r\n};\r\n\r\n/*var runActions = function(e) {// bind this deck\r\n\r\n\tcommon.animationDefault()\r\n\r\n\tfor(var actionName in this.actions) {\r\n\t\tif(\r\n\t\t\ttypeof this.actions[actionName].type == \"undefined\"\r\n\t\t || this.actions[actionName].type && this.actions[actionName].listen == \"click\" // default action event - click\r\n\t\t) {\r\n\t\t\tif(_actions[actionName]) {\r\n\t\t\t\t// console.log('run action', this, actionName, this.actions[actionName]);\r\n\t\t\t\t_actions[actionName].call(this, this.actions[actionName]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// Tips.checkTips();\r\n}*/\r\n\r\nvar autoRunActions = function(data) {// bind this deck\r\n\r\n\tcommon.animationDefault();\r\n\r\n\tfor(var actionName in data.actions) {\r\n\t\tif(data.actions[actionName].autorun) {\r\n\t\t\tif(_actions[actionName]) {\r\n\t\t\t\t_actions[actionName].call(\r\n\t\t\t\t\tdata, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tactionData : data.actions[actionName],\r\n\t\t\t\t\t\teventData  : null,\r\n\t\t\t\t\t\teventName  : data.actions[actionName].event\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// Tips.checkTips();\r\n}\r\n\r\nexport default {\r\n\t// autoRunActions,\r\n\t// runActions,\r\n\taddActions\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/deckActions.js\n **/","'use strict';\r\n\r\n// import event    from 'event';\r\n// import defaults from 'defaults';\r\n\r\nexport default function(e) {\r\n// TODO переделать\r\n\t\t\r\n\tconsole.log('TWINDECK', e);\r\n\r\n/*\r\n\t\r\n\t// console.log(\"twindeck action:\", e);\r\n\tif(e.deck_from.iteration == 0) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar deck_to = Deck.Deck(e.data.to);\r\n\t\r\n\tvar moveCardsCount = e.data.count && typeof e.data.count == 'number' \r\n\t\t? e.data.count \r\n\t\t: defaults.actions.twindeck.CardsCount;\r\n\t\r\n\t// количество оставшихся карт в первой колоде\r\n\tvar deckFromCardsCount = e.deck_from.cards.length;\r\n\t\r\n\tif(deckFromCardsCount < moveCardsCount) {\r\n\t\tmoveCardsCount = deckFromCardsCount;\r\n\t}\r\n\t\r\n\t// инициализация\r\n\tif(typeof e.deck_from.iteration == 'undefined') {\r\n\t\t// \"-1\" - infinity\r\n\t\te.deck_from.iteration = -1;\r\n\t\te.deck_from.twindeck = [];\r\n\t}\r\n\r\n\t// количество циклов перелистываний сначало до конца\r\n\tif(e.iterations && e.deck_from.iteration < 0) {\r\n\t\te.deck_from.iteration = e.iterations\r\n\t}\r\n\r\n\tdeck_to.hideCards();\r\n\r\n\tvar _deck = deck_to.Pop(deck_to.cards.length);\r\n\r\n\t// oneStepWay.add('toHide') = Deck.deckCardNames(_deck);\r\n\t\r\n\t_deck.reverse();\r\n\tfor(var i in _deck) {\r\n\t\te.deck_from.twindeck.unshift(_deck[i]);\r\n\t}\r\n\t\r\n\t// первая колода пуста\r\n\tif(e.deck_from.twindeck && e.deck_from.twindeck.length && deckFromCardsCount == 0 && e.deck_from.iteration != 0) {\r\n\t\t// e.deck_from.twindeck.reverse();\r\n\t\te.deck_from.Push(e.deck_from.twindeck);\r\n\t\te.deck_from.twindeck = [];// unshift\r\n\t// перелистывание\r\n\t} else {\r\n\t\tvar _deck = e.deck_from.Pop(moveCardsCount);\r\n\t\tdeck_to.Push(_deck);\r\n\t}\r\n\t\r\n\te.deck_from.showCards();\r\n\t\r\n\t// ------------ FLIP ------------\r\n\t// var _deck_from = e.deck_from.cards;\r\n\t// var _deck_to = deck_to.cards;\r\n\t\r\n\te.deck_from.flipCheck();\r\n\tdeck_to    .flipCheck();\r\n\t\r\n\te.deck_from.Redraw();\r\n\tdeck_to    .Redraw();\r\n\t\r\n\t// ------------ STEP ------------\r\n\t// Step\r\n\tvar _twindeckStep = {\r\n\t\tfrom      : e.deck_from.name,\r\n\t\tto        : deck_to    .name,\r\n\t\tmoveCards : share.deckCardNames(_deck),\r\n\t\titeration : (e.deck_from.iteration|0)\r\n\t};\r\n\t\r\n\t// hiddenCards : share.deckCardNames(e.deck_from.twindeck), \r\n\t// cards       : share.deckCardNames(e.deck_from.cards),\r\n\r\n\tHistory.add(_twindeckStep);\r\n\t\r\n\tevent.dispatch('makeStep', History.get());\r\n\t\r\n\t// ------------------------------\r\n\r\n\t// share.checkTips();\r\n\r\n\te.deck_from.iteration -= 1;\r\n\r\n*/\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/actions/twindeckAction.js\n **/","'use strict';\r\n\r\nimport event     from 'event';\r\nimport share     from 'share';\r\nimport defaults  from 'defaults';\r\nimport common    from 'common';\r\n\r\nimport forceMove from 'forceMove';\r\nimport History   from 'history';\r\n\r\nexport default function(data) {// data.actionData, e\r\n\r\n\t// listen click\r\n\t// click is for me (default)\r\n\t// if(this.name != data.actionData.name) { return; };\r\n\t\r\n\t// console.log(\"dealerdeck\", this, data.actionData, data.actionData);\r\n\r\n\tif(this.cards.length == 0) { return; }\r\n\r\n\tvar _decks = [];\r\n\r\n\tif(data.actionData.toGroup && !data.actionData.to) {\r\n\t\t\r\n\t\tdata.actionData.to = data.actionData.toGroup;\r\n\t\t\r\n\t\t// _decks = _decks.concat(Group.Group(e.toGroup).decks);\r\n\t\t\r\n\t\t// var __decks = Group.Group(data.actionData.toGroup).decks;\r\n\t\t// for(var deckIndex in __decks) {\r\n\t\t// \t_decks.push(__decks[deckIndex]);\r\n\t\t// }\r\n\t};\r\n\r\n\tif(data.actionData.to) {\r\n\t\tif(typeof data.actionData.to == \"string\") {\r\n\t\t\t\r\n\t\t\tvar _elements = common.getElementsByName(data.actionData.to);\r\n\t\t\t// console.log('>>>', _elements);\r\n\t\t\tfor(var i in _elements) {\r\n\r\n\t\t\t\tif(_elements[i].type == \"group\") {\r\n\t\t\t\t\t// _decks = _decks.concat(Group.Group(data.actionData.to).decks);\r\n\t\t\t\t\t// var __decks = Group.Group(data.actionData.to).decks;\r\n\t\t\t\t\tfor(var deckIndex in _elements[i].decks) {\r\n\t\t\t\t\t\t_decks.push(_elements[i].decks[deckIndex]);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(_elements[i].type == \"deck\") {\r\n\t\t\t\t\t_decks.push(_el);\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tfor(var i in data.actionData.to) {\r\n\t\t\t\t\r\n\t\t\t\tvar _elements = common.getElementsByName(data.actionData.to[i]);\r\n\t\t\t\t\r\n\t\t\t\tfor(var elIndex in _elements) {\r\n\r\n\t\t\t\t\tif(_elements[elIndex].type == \"group\") {\r\n\t\t\t\t\t\t// _decks = _decks.concat(Group.Group(data.actionData.to[i]).decks);\r\n\t\t\t\t\t\t// var __decks = Group.Group(data.actionData.to[i]).decks;\r\n\t\t\t\t\t\tfor(var deckIndex in _elements[elIndex].decks) {\r\n\t\t\t\t\t\t\t_decks.push(_elements[elIndex].decks[deckIndex]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif(_elements[elIndex].type == \"deck\") {\r\n\t\t\t\t\t\t_decks.push(_elements[elIndex]);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tcommon.animationDefault();\r\n\r\n\tvar _makeStep = false;\r\n\r\n\tfor(var deckId in _decks) {\r\n\t\t\r\n\t\tvar _card = this.getTopCard();\r\n\r\n\t\t_decks[deckId].cards.length == 0 && data.actionData.onlyEmpty\r\n\r\n\t\tvar _canStep = data.actionData.onlyEmpty\r\n\t\t\t? _decks[deckId].cards.length == 0\r\n\t\t\t: true;\r\n\t\t\r\n\t\tif(_canStep && _card) {\r\n\r\n\t\t\t_makeStep = true;\r\n\r\n\t\t\tvar _cardName = _card.name\r\n\t\t\t\r\n\t\t\tforceMove({\r\n\t\t\t\tfrom : this.name,\r\n\t\t\t\tto   : _decks[deckId].name,\r\n\t\t\t\tdeck : [_cardName],\r\n\t\t\t\tflip : true\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\t_decks[deckId].flipCheck();\r\n\t\t\t// _decks[deckId].Redraw();\r\n\r\n\t\t\tHistory.add({move : {\r\n\t\t\t\tfrom : this.name,\r\n\t\t\t\tto   : _decks[deckId].name,\r\n\t\t\t\tdeck : [_cardName],\r\n\t\t\t\tflip : true\r\n\t\t\t}});\r\n\r\n\t\t};\r\n\r\n\t};\r\n\t\r\n\t// History.add({\r\n\t// \t\"action\" : {\r\n\t// \t\tname     : \"dealerdeck\",\r\n\t// \t\tdeckName : this.name,\r\n\t// \t\tparams   : data.actionData\r\n\t// \t}\r\n\t// });\r\n\t\r\n\tif(_makeStep) {\r\n\t\tevent.dispatch('makeStep', History.get());\r\n\t};\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/actions/dealerdeckAction.js\n **/","'use strict';\r\n\r\nimport event  from 'event';\r\nimport share  from 'share';\r\nimport common from 'common';\r\n\r\nimport Deck     from 'addDeck';\r\nimport Tips     from 'tips';\r\nimport elRender from 'elRender';\r\n\r\nexport default function(a) {\r\n\r\n\tvar _animation = share.get('animation');\r\n\r\n\tif(!a.from || !a.to || !a.deck) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(!a.deck.length) return;\r\n\t\r\n\tvar _from = typeof a.from == \"string\"\r\n\t\t? Deck.Deck(a.from)\r\n\t\t: a.from;\r\n\tvar _to   = typeof a.to   == \"string\"\r\n\t\t? Deck.Deck(a.to)\r\n\t\t: a.to;\r\n\r\n\r\n\tif(!_from || !_to || _from.type != \"deck\" || _to.type != \"deck\") {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// console.log('FORCEMOVE from:', _from.name, 'to:', _to.name, a.deck);\r\n\t\r\n\tvar _check     = true;\r\n\tvar _from_deck = _from.cards;\r\n\t\r\n\r\n\tfor(var i in _from_deck) {\r\n\t\t\r\n\t\tif(i >= _from_deck.length - a.deck.length) {\r\n\t\t\tvar _id = i - (_from_deck.length|0) + (a.deck.length|0);\r\n\t\t\tif(a.deck[_id] && _from_deck[i].name != a.deck[_id]) {\r\n\t\t\t\t_check = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif(_check) {\r\n\r\n\t\tvar _pop = _from.Pop(a.deck.length);\r\n\r\n\t\t// перевернуть карты во время хода\r\n\t\tif(a.flip) {\r\n\t\t\tfor(var i in _pop) {\r\n\t\t\t\t_pop[i].flip = !_pop[i].flip;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_to.Push(_pop);\r\n\t\t\r\n\t\tif(_animation) {\r\n\r\n\t\t\tvar __pop = [];\r\n\t\t\tfor(var i in _pop) {\r\n\t\t\t\t__pop.push({\r\n\t\t\t\t\tcard : _pop[i]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tevent.dispatch('moveDragDeck', {\r\n\t\t\t\tdeparture   : _from,\r\n\t\t\t\tdestination : _to,\r\n\t\t\t\tmoveDeck    : __pop,\r\n\t\t\t\t// callback : function() {}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t_from.Redraw();\r\n\t\t\t_to  .Redraw();\r\n\t\t}\r\n\r\n\r\n\r\n\t} else {\r\n\t\t// _warn(4);\r\n\t\tconsole.log(\"forceMove:Ход невозможен\", a);\r\n\t}\r\n\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/history/forceMove.js\n **/","'use strict';\r\n\r\n// let jquery = require(\"script!../../../frontend/js/jquery-2.2.4.min.js\");\r\n\r\n// export default jquery;\r\n\r\nimport defaults from 'defaults';\r\nimport share    from 'share';\r\n\r\nimport elClass    from 'elClass';\r\nimport allElClass from 'allElClass';\r\n\r\nshare.set('animatedElements',      0);\r\nshare.set('animatedElementsStack', []);\r\nshare.set('animatedCallback',      ()=>{});\r\n\r\nvar _allEl = (e)=>{\r\n\r\n\tif(!e) {\r\n\t\tthrow new Error(\"elRender:empty arguments\");\r\n\t};\r\n\r\n\tif(typeof e == \"string\") {\r\n\t\t\r\n\t\tif(e[0] == \"#\") {\r\n\t\t\tvar _element = document.getElementById(e.slice(1, Infinity));\r\n\t\t\treturn new elClass(_element);\r\n\t\t} else if(e[0] == \".\") {\r\n\t\t\tvar _elements = document.getElementsByClassName(e.slice(1, Infinity));\r\n\t\t\treturn new allElClass(_elements);\r\n\t\t} else if(e[0] == \"<\") {\r\n\t\t\tvar _temp = document.createElement('temp');\r\n\t\t\t_temp.innerHTML = e;\r\n\t\t\tvar _element = _temp.children[0];\r\n\t\t\treturn new elClass(_element);\r\n\t\t}\r\n\t} else if(e.el || e.elements) {\r\n\t\treturn e;\r\n\t} else {\r\n\t\treturn new elClass(e);\r\n\t};\r\n};\r\n\r\n_allEl.stopAnimations = (callback)=>{\r\n\r\n\t_allEl(\".animated\")\r\n\t\t.css({transition: '0s'})\r\n\t\t.removeClass(\"animated\");\r\n\r\n\t// console.log('end all animations.', _animatedElementsStack);\r\n\r\n\t/*var _animatedElementsStack = share.get('animatedElementsStack');\r\n\r\n\tfor(var i in _animatedElementsStack) {\r\n\t\t_animatedElementsStack[i].el.style.transition = null;\r\n\t};\r\n\tshare.set('animatedElementsStack', []);\r\n\r\n\tshare.set('animatedElements', 0);\r\n\tvar _animatedCallback = share.get('animatedCallback');\r\n\t_animatedCallback.call(this);\r\n\tshare.set('animatedCallback', ()=>{});*/\r\n};\r\n\r\nexport default _allEl;\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/render/elRender.js\n **/","'use strict';\r\n\r\nimport share    from 'share';\r\nimport defaults from 'defaults';\r\n\r\nexport default class elClass {\r\n\t\r\n\tconstructor(e) {\r\n\t\r\n\t\tthis.el = e;\r\n\t\t\r\n\t\tif(!e) {\r\n\t\t\t// if(window._debug) throw new Error(\"test\");\r\n\t\t\t// console.warn(\"elClass: empty arrtibutes;\");\r\n\t\t\tthis.el = null;\r\n\t\t}\r\n\t}\r\n// --\r\n\tattr(attributes) {\r\n\t\ttry {\r\n\t\t\tfor(var attrName in attributes) {\r\n\t\t\t\tthis.el[attrName] = attributes[attrName];\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\thasClass(className) {\r\n\t\ttry {\r\n\t\r\n\t\t\tvar _classes = this.el.className.split(' ');\r\n\t\t\treturn _classes.indexOf(className) >= 0;\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\ttoggleClass(className) {\r\n\t\ttry {\r\n\t\r\n\t\t\tif(this.hasClass(className)) {\r\n\t\t\t\tthis.removeClass(className);\r\n\t\t\t} else {\r\n\t\t\t\tthis.addClass(className);\r\n\t\t\t}\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\taddClass(className) {\r\n\t\ttry {\r\n\t\r\n\t\t\tvar _classes = this.el.className.split(' ');\r\n\t\t\tif(!this.hasClass(className)) {\r\n\t\t\t\t_classes.push(className);\r\n\t\t\t\tthis.el.className = _classes.join(' ');\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\tremoveClass(className) {\r\n\t\ttry {\r\n\t\t\tvar _classes = this.el.className.split(' ');\r\n\t\t\t\r\n\t\t\tif(this.hasClass(className)) {\r\n\t\r\n\t\t\t\tvar _clone = [];\r\n\t\t\t\tfor(var i in _classes) {\r\n\t\t\t\t\tif(_classes[i] != className) {\r\n\t\t\t\t\t\t_clone.push(_classes[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t_classes = _clone;\r\n\t\t\t\tthis.el.className = _classes.join(' ');\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\tcss(a) {\r\n\t\ttry {\r\n\t\r\n\t\t\t// console.log('CSS', this.el ? true : false, a);\r\n\t\r\n\t\t\tfor(var attrName in a) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.el.style[attrName] = a[attrName];\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\t// S.log('>>>>>', this.el, e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\thide() {\r\n\t\ttry {\r\n\t\r\n\t\t\treturn this.css({'display' : 'none'});\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\tshow() {\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\treturn this.css({'display' : 'block'});\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\tappend(el) {\r\n\t\ttry {\r\n\t\r\n\t\t\tif(el.el) {\r\n\t\t\t\tel = el.el;\r\n\t\t\t};\r\n\t\t\tthis.el.appendChild(el);\r\n\t\t\treturn this;\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\t\r\n\thtml(el) {\r\n\t\ttry {\r\n\t\r\n\t\t\tif(typeof el == \"undefined\") {\r\n\t\t\t\treturn this.el.innerHTML;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif(el.el) {\r\n\t\t\t\tel = el.el;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tthis.el.innerHTML = el;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t} catch(e) {}\r\n\t}\r\n// --\r\n\tanimate(params, animationTime = defaults.animationTime, callback) {\r\n\t\ttypeof animationTime == \"function\" && (callback = animationTime, animationTime = defaults.animationTime);\r\n\t\tsetTimeout(()=>{\r\n\r\n\t\t\tthis.css({transition: (animationTime / 1000) + 's'});\r\n\t\t\tlet counter = 0;\r\n\t\t\tfor(var attrName in params) {\r\n\t\t\t\tif(this.el.style[attrName] != params[attrName]) {\r\n\t\t\t\t\tcounter += 1;\r\n\t\t\t\t}\r\n\t\t\t\tthis.el.style[attrName] = params[attrName];\r\n\t\t\t}\r\n\t\t\tthis.addClass(\"animated\");\r\n\t\t\t\r\n\t\t\tthis.el.addEventListener(\"transitionend\", ()=>{\r\n\t\t\t\tcounter -= 1;\r\n\r\n\t\t\t\tif(!counter) {\r\n\t\t\t\t\tthis.removeClass(\"animated\");\r\n\t\t\t\t\tthis.css({transition: null});\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\r\n\t\t}, 0);\r\n\t}\r\n\t/*animate(params, animationTime, callback) {\r\n\r\n\t\tif(typeof animationTime == \"undefined\") {\r\n\t\t\tanimationTime = defaults.animationTime;\r\n\t\t}\r\n\r\n\t\tif(\r\n\t\t\ttypeof callback      == \"undefined\" \r\n\t\t && typeof animationTime == \"function\"\r\n\t\t) {\r\n\t\t\tcallback = animationTime;\r\n\t\t\tanimationTime = defaults.animationTime;\r\n\t\t}\r\n\r\n\t\tthis.done(callback);\r\n\r\n\t\tvar _animatedElements = share.get('animatedElements');\r\n\t\tvar _animatedElementsStack = share.get('animatedElementsStack');\r\n\t\t_animatedElements += 1;\r\n\t\t_animatedElementsStack.push(this);\r\n\t\tshare.set('animatedElements', _animatedElements);\r\n\t\tshare.set('animatedElementsStack', _animatedElementsStack);\r\n\r\n\t\tvar _animateThread = function(params) {\r\n\t\t\tthis.el.style.transition = '0.5s';\r\n\t\t\tthis.css(params);\r\n\t\t\tthis.el.addEventListener(\"transitionend\", function() {\r\n\t\t\t\tif(this.el.style.transition) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar _animatedElements = share.get('animatedElements');\r\n\t\t\t\t\t_animatedElements -= 1;\r\n\t\t\t\t\tshare.set('animatedElements', _animatedElements);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar _animatedCallback = share.get('animatedCallback');\r\n\t\t\t\t\tvar _cloneCallback = _animatedCallback;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(share.get('animatedElements') == 0) {\r\n\t\t\t\t\t\t_animatedCallback.call(this);\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(\r\n\t\t\t\t\t\tshare.get('animatedElements') == 0\r\n\t\t\t\t\t || _cloneCallback == share.get('animatedCallback')\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\t_animatedCallback = function() {};\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\tthis.el.style.transition = null;\r\n\t\t\t}.bind(this), false);\r\n\t\t}\r\n\t\t\r\n\t\t// Thread\r\n\t\tsetTimeout(_animateThread.bind(this, params), 0);\r\n\r\n\t\treturn this;\r\n\t}*/\r\n\r\n\t/*done(callback) {\r\n\r\n\t\tif(typeof callback == \"function\") {\r\n\t\t\tshare.set('animatedCallback', callback);\r\n\t\t};\r\n\t\t\r\n\t\treturn this;\r\n\t}*/\r\n// --\t\r\n\tremove() {\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tthis.el.remove();\r\n\t\t} catch(e) {}\r\n\t}\r\n\r\n\t/*getEl() {\r\n\t\t\r\n\t\treturn this.el;\r\n\t}*/\r\n\r\n\tparent() {\r\n\t\treturn new elClass(this.el.parentNode);\r\n\t}\r\n\t\r\n\tafter(html) {\r\n\t\ttry {\r\n\t\t\tthis.el.parentNode.insertBefore(html, this.el.nextElementSibling);\r\n\t\t\t/*if(html.el) html = html.el;\r\n\r\n\t\t\tvar _parentElements = this.el.parentNode.children;\r\n\t\t\tvar _newChildren = [];\r\n\t\t\t\r\n\t\t\tfor(var i in _parentElements) {\r\n\t\t\t\t_newChildren.push(_parentElements[i]);\r\n\t\t\t\tif(_parentElements[i] == this.el) {\r\n\t\t\t\t\t_newChildren.push(html);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.el.parentNode.children = _newChildren;*/\r\n\t\t} catch(e) {}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tbefore(html) {\r\n\t\ttry {\r\n\t\t\tthis.el.parentNode.insertBefore(html, this.el);\r\n\t\t\t/*if(html.el) html = html.el;\r\n\r\n\t\t\tvar _parentElements = this.el.parentNode.children;\r\n\t\t\tvar _newChildren = [];\r\n\t\t\t\r\n\t\t\tfor(var i in _parentElements) {\r\n\t\t\t\tif(_parentElements[i] == this.el) {\r\n\t\t\t\t\t_newChildren.push(html);\r\n\t\t\t\t}\r\n\t\t\t\t_newChildren.push(_parentElements[i]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.el.parentNode.children = _newChildren;*/\r\n\t\t} catch(e) {}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tevent(eventName, callback) {\r\n\t\tthis.el.addEventListener(eventName, callback);\r\n\t}\r\n\r\n\tclick(callback) {\r\n\t\tthis.event(callback);\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/render/elClass.js\n **/","'use strict';\r\n\r\nimport elClass  from 'elClass';\r\n\r\nexport default class allElClass {\r\n\t\r\n\tconstructor(elements) {\r\n\t\t\r\n\t\tthis.elements = [];\r\n\r\n\t\tfor(var i in elements) {\r\n\t\t\tthis.elements.push(new elClass(elements[i]));\r\n\t\t}\r\n\t}\r\n// --\r\n\tattr(attributes) {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].attr(attributes)\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\ttoggleClass(className) {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].toggleClass(className);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\taddClass(className) {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].addClass(className);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\tremoveClass(className) {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].removeClass(className);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\tcss(a) {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].css(a);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\thide() {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].hide();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\tshow() {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].show();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\tanimate(params, animationTime, callback) {\r\n\t\tlet counter = 0;\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tcounter += 1;\r\n\t\t\tthis.elements[i].animate(params, animationTime, ()=>{\r\n\t\t\t\tcounter -= 1;\r\n\t\t\t\tif(!counter) callback();\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n// --\r\n\tremove() {\r\n\t\tfor(var i in this.elements) {\r\n\t\t\tthis.elements[i].remove();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/render/allElClass.js\n **/","'use strict';\r\n\r\nimport event     from 'event';\r\nimport share     from 'share';\r\n\r\nimport forceMove from 'forceMove';\r\nimport Deck      from 'addDeck';\r\nimport Tips      from 'tips';\r\n// import elRender  from 'elRender';\r\n\r\nvar _oneStepWay  = [];\r\nvar _undoMethods = {};\r\nvar _redoMethods = {};\r\n\r\n// ---------------------------------------- UNDO ----------------------------------------\r\n\r\nvar _undo = function(a) {\r\n\r\n\t// console.log('#undo', a);\r\n\r\n\tfor(var i in _undoMethods) {\r\n\t\t// console.log(i);\r\n\t\t_undoMethods[i](a);\r\n\t}\r\n\t\r\n\t// if(a.flip) {\r\n\t// };\r\n\t\r\n\t// if(a.unflip) {\r\n\t// \tif(\r\n\t// \t\ttypeof a.unflip.deck       == \"string\"\r\n\t// \t && typeof a.unflip.card       != \"undefined\"\r\n\t// \t && typeof a.unflip.card.name  == \"string\"\r\n\t// \t && typeof a.unflip.card.index != \"undefined\"\r\n\t// \t) {\r\n\t// \t\tvar _deck = Deck.Deck(a.unflip.deck),\r\n\t// \t\t\t_cards = _deck ? _deck.cards : [];\r\n\t// \t\tif(_cards[a.unflip.card.index].name == a.unflip.card.name) {\r\n\t// \t\t\t_cards[a.unflip.card.index].flip = true;\r\n\t// \t\t}\r\n\t// \t}\r\n\t// };\r\n\t\r\n\t// if(a.fill) {\r\n\t// \t// TODO\r\n\t// };\r\n\r\n\t// MOVE\r\n\tif(\r\n\t\ttypeof a.move      != \"undefined\" \r\n\t && typeof a.move.from != \"undefined\" \r\n\t && typeof a.move.to   != \"undefined\" \r\n\t && typeof a.move.deck != \"undefined\"\r\n\t) {\r\n\t\tforceMove({\r\n\t\t\tfrom : a.move.to,// from <=> to\r\n\t\t\tto   : a.move.from,\r\n\t\t\tdeck : a.move.deck,\r\n\t\t\tflip : a.move.flip\r\n\t\t});\r\n\t}\r\n\r\n};\r\n\r\nevent.listen('undo', function(_a) {\r\n\r\n\t// console.log('undo', _a);\r\n\r\n\t// elRender.animationsEnd();\r\n\tevent.dispatch('stopAnimations');\r\n\t\r\n\tif(!_a) { return; };\r\n\r\n\t// Обратная совместимость\r\n\tif(_a instanceof Array) {\r\n\r\n\t\t_a.reverse();\r\n\t\t\r\n\t\tfor(var _i in _a) {\r\n\t\t\tvar a = _a[_i];\r\n\t\t\t_undo(a);\r\n\t\t}\r\n\t\t\r\n\t} else {\r\n\t\t\r\n\t\t_undo(_a);\r\n\t\t\r\n\t}\r\n\r\n\tTips.checkTips();\r\n\r\n});\r\n\r\n// ---------------------------------------- REDO ----------------------------------------\r\n\r\nvar _redo = function(a) {\r\n\r\n\t// console.log('#redo', a);\r\n\r\n\tfor(var i in _redoMethods) {\r\n\t\t_redoMethods[i](a);\r\n\t}\r\n\r\n\t// if(a.flip) {\r\n\t// };\r\n\t\r\n\t// if(a.unflip) {\r\n\t// \tif(\r\n\t// \t\ttypeof a.unflip.deck       == \"string\"\r\n\t// \t && typeof a.unflip.card       != \"undefined\"\r\n\t// \t && typeof a.unflip.card.name  == \"string\"\r\n\t// \t && typeof a.unflip.card.index != \"undefined\"\r\n\t// \t) {\r\n\t// \t\tvar _deck = Deck.Deck(a.unflip.deck),\r\n\t// \t\t\t_cards = _deck ? _deck.cards : [];\r\n\t// \t\tif(_cards[a.unflip.card.index].name == a.unflip.card.name) {\r\n\t// \t\t\t_cards[a.unflip.card.index].flip = false;\r\n\t// \t\t}\r\n\t// \t}\r\n\t// };\r\n\t\r\n\t// if(a.fill) {\r\n\t// \t// TODO\r\n\t// };\r\n\r\n\tif(\r\n\t\ttypeof a.move      != \"undefined\" \r\n\t && typeof a.move.from != \"undefined\" \r\n\t && typeof a.move.to   != \"undefined\" \r\n\t && typeof a.move.deck != \"undefined\"\r\n\t) {\r\n\t\tforceMove(a.move);\r\n\t}\r\n\r\n};\r\n\r\nevent.listen('redo', function(_a) {\r\n\r\n\t// console.log('redo', _a);\r\n\t\r\n\t// elRender.animationsEnd();\r\n\tevent.dispatch('stopAnimations');\r\n\t\r\n\r\n\tif(!_a) return;\r\n\r\n\t// Обратная совместимость\r\n\tif(_a instanceof Array) {\r\n\t\t_a.reverse();\r\n\t\tfor(var _i in _a) {\r\n\t\t\tvar a = _a[_i];\r\n\t\t\t_redo(a);\r\n\t\t}\r\n\t} else {\r\n\t\t_redo(_a);\r\n\t}\r\n\r\n\tTips.checkTips();\r\n\r\n});\r\n\r\nexport default new function() {\r\n\r\n\tthis.reset = function() {\r\n\t\t_oneStepWay = [];\r\n\t};\r\n\r\n\tthis.add = function(step) {\r\n\r\n\t\t// console.log('History add:', step);\r\n\t\t// for(var i in step) {\r\n\t\t_oneStepWay.push(step);\r\n\t\t// }\r\n\t};\r\n\r\n\tthis.get = function() {// TODO get without reset (param)\r\n\t\tvar _req = _oneStepWay;\r\n\t\tthis.reset();\r\n\t\treturn _req;\r\n\t};\r\n\r\n\tthis.addUndoMethods  = function(a) {\r\n\t\tfor(var i in a) {\r\n\t\t\t_undoMethods[i] = a[i];\r\n\t\t}\r\n\t};\r\n\t\r\n\tthis.addRedoMethods  = function(a) {\r\n\t\tfor(var i in a) {\r\n\t\t\t_redoMethods[i] = a[i];\r\n\t\t}\r\n\t};\r\n\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/history/history.js\n **/","'use strict';\r\n\r\nimport event     from 'event';\r\n\r\nimport forceMove from 'forceMove';\r\nimport History   from 'history';\r\n\r\nexport default function(data) {\r\n\t\t\r\n\t// listen move ???\r\n\tif(this.name != data.eventData.to.name) { return false; };\r\n\r\n\tconsole.log('KICK');\r\n\r\n\t// var _toDeck = Deck.Deck(data.actionData.to);\r\n\t// TODO CURRENT\r\n\tvar _from = data.eventData.to,\r\n\t\t_deck = _from.getCardsNames();\r\n\r\n\tforceMove({\r\n\t\tfrom : _from,                 //this.name,\r\n\t\tto   : data.actionData.to,    //_decks[deckId].name,\r\n\t\tdeck : _deck, //[_cardName],\r\n\t\tflip : true                              //true\r\n\t});\r\n\r\n\tHistory.add({'move' : {\r\n\t\tfrom : _from.name,\r\n\t\tto   : data.actionData.to,\r\n\t\tdeck : _deck,\r\n\t\tflip : true\r\n\t}});\r\n\r\n\tevent.dispatch('makeStep', History.get());\r\n\r\n\t// if(e.after) {\r\n\t// \t_events[e.after].call(this, e);\r\n\t// };\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/actions/kickAction.js\n **/","'use strict';\r\n\r\nimport share    from 'share';\r\nimport defaults from 'defaults';\r\nimport common   from 'common';\r\n\r\nimport takeRules from 'readyTakeRules';\r\n\r\nexport default function(cardId) {\r\n\r\n\tvar rulesCorrect = true;//!common.isLock();\r\n\r\n\trulesCorrect = rulesCorrect && !this.locked;\r\n\t\r\n\tif(typeof this.fill == \"boolean\") {\r\n\t\trulesCorrect = rulesCorrect && !this.fill;\r\n\t}\r\n\r\n\t// берём карту/стопку\r\n\t// console.log('Take', cardId);\r\n\r\n\tvar cardIndex  = -1;\r\n\tvar cardName   = null; \r\n\tvar cardSuit   = null; \r\n\tvar cardRank   = null; \r\n\tvar deckLength = this.cards.length;\r\n\r\n\t// проверяем не является ли перевернутой\r\n\r\n\tvar takeDeck = []\r\n\r\n\tfor(var i in this.cards) {\r\n\r\n\t\tif(this.cards[i].id == cardId) {\r\n\t\t\tcardIndex = i|0;\r\n\t\t\tcardName  = this.cards[i].name;\r\n\t\t\t\r\n\t\t\tvar _name = common.validateCardName(cardName);\r\n\t\t\t\r\n\t\t\trulesCorrect = rulesCorrect && _name;\r\n\r\n\t\t\t\r\n\t\t\tif(_name) {\r\n\t\t\t\tcardSuit = _name.suit;\r\n\t\t\t\tcardRank = _name.rank;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\trulesCorrect = rulesCorrect && (\r\n\t\t\t\t!this.cards[i].flip\r\n\t\t\t || this.cards[i].flip == defaults.canMoveFlip\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(cardIndex >= 0) {\r\n\t\t\ttakeDeck.push({index : i, card : this.cards[i]});\r\n\t\t}\r\n\t}\r\n\tvar _attrs = {\r\n\t\tcardId     : cardId, \r\n\t\tcardName   : cardName, \r\n\t\tcardSuit   : cardSuit, \r\n\t\tcardRank   : cardRank, \r\n\t\tcardIndex  : cardIndex, \r\n\t\tdeckLength : deckLength\r\n\t}\r\n\t// if(typeof takeRules == 'function') {\r\n\t\t// rulesCorrect = rulesCorrect && takeRules(_attrs);\r\n\t\t// TODO\r\n\t\t// лучше обрабатывать строку если правило одно и не нужен массив\r\n\t// } else if(typeof takeRules == 'string') {\r\n\t// } else {\r\n\tfor(var ruleIndex in this.takeRules) {\r\n\t\tvar ruleName = this.takeRules[ruleIndex];\r\n\r\n\t\t// console.log(this.takeRules);\r\n\t\t\r\n\t\tif(takeRules[ruleName]) {\r\n\t\t\trulesCorrect = rulesCorrect && takeRules[ruleName](_attrs);\r\n\t\t} else {// if(typeof takeRules[ruleIndex] == 'function') {\r\n\t\t\t// rulesCorrect = rulesCorrect && takeRules[ruleIndex](_attrs);\r\n\t\t\tconsole.log('Incorrect take rule:', ruleName);\r\n\t\t\trulesCorrect = false;\r\n\t\t}\r\n\t}\r\n\t// }\r\n\t\r\n\t// возвращает массив ID карт которые можно будет перетащить\r\n\t// записывает их как активные\r\n\t\r\n\trulesCorrect = rulesCorrect && (cardIndex >= 0);\r\n\r\n\treturn rulesCorrect && takeDeck;\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/deckTake.js\n **/","'use strict';\r\n\r\nimport Deck     from 'addDeck';\r\nimport putRules from 'readyPutRules';\r\n\r\nexport default function(putDeck) {\r\n\r\n\t// console.log('PUT', this.name, this.putRules);\r\n\r\n\tvar rulesCorrect = true;\r\n\t\r\n\tvar _deckId         = putDeck[0].card.parent;\r\n\tvar _deck_departure = Deck.getDeckById(_deckId);\r\n\r\n\trulesCorrect = rulesCorrect && !this.locked;\r\n\r\n\tfor(var ruleIndex in this.putRules) {\r\n\t\t\r\n\t\tvar ruleName = this.putRules[ruleIndex];\r\n\r\n\t\tif(putRules[ruleName]) {\r\n\t\t\trulesCorrect = rulesCorrect && putRules[ruleName]({\r\n\t\t\t\tfrom      : {\r\n\t\t\t\t\tdeckId : _deckId, \r\n\t\t\t\t\tdeck   : _deck_departure\r\n\t\t\t\t}, \r\n\t\t\t\tputDeck   : putDeck,\r\n\t\t\t\tcards     : this.cards,\r\n\t\t\t\trulesArgs : putRules[ruleName]\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tconsole.warn('putRule:', ruleName, 'not exists');\r\n\t\t\trulesCorrect = false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn rulesCorrect;\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/deckPut.js\n **/","'use strict';\r\n\r\nimport event  from 'event';\r\nimport share  from 'share';\r\nimport common from 'common';\r\n\r\nexport default function(name) {// TODO\r\n\t\r\n\t// console.log('genCardByName:', name);\r\n\t\r\n\tvar _name   = common.validateCardName(name);// {color, rank}\r\n\t// var _parent = id;\r\n\r\n\tif(_name) {\r\n\r\n\t\tvar _id = 'card_' + common.genId(),\r\n\t\t\t_card = {\r\n\t\t\t\tid      : _id,\r\n\t\t\t\tname    : name,\r\n\t\t\t\ttype    : 'card',\r\n\t\t\t\t// domElement : domElement,\r\n\t\t\t\tvisible : true,\r\n\t\t\t\t// parent  : _parent,\r\n\t\t\t\tflip    : false\r\n\t\t\t}\r\n\t\t_card.parent = this.getId();\r\n\r\n\t\tevent.dispatch('addCardEl', _card);\r\n\t\t\r\n\t\tvar _elements = share.get('elements');\r\n\t\t_elements[_id] = _card;\r\n\t\tshare.set('elements', _elements);\r\n\t\t\r\n\t\tthis.Push([_card]);\r\n\t\tthis.flipCheck();\r\n\t\tthis.Redraw();\r\n\r\n\t\treturn _card;\r\n\t}\r\n\t\r\n\treturn false;\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/genCardByName.js\n **/","'use strict';\r\n\r\nimport share from 'share';\r\n\r\nexport default function(a) {\r\n\r\n\t// console.log('getDecks', a)\r\n\r\n\tvar _decks = {}\r\n\tvar _elements = share.get('elements');\r\n\tfor(var d in _elements) {\r\n\t\tif(_elements[d].type == 'deck') {\r\n\t\t\tif(a && a.visible) {\r\n\t\t\t\tif(_elements[d].visible) {\r\n\t\t\t\t\t_decks[d] = _elements[d];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_decks[d] = _elements[d];\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\treturn _decks;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/getDecks.js\n **/","'use strict';\r\n\r\nimport share from 'share';\r\n\r\nexport default function(id) {// ID\r\n\t\r\n\tvar _elements = share.get('elements');\r\n\tfor(var d in _elements) {\r\n\t\tif(_elements[d].type == 'deck' && d == id) {\r\n\t\t\treturn _elements[d];\r\n\t\t};\r\n\t};\r\n\treturn null;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/getDeckById.js\n **/","'use strict';\r\n\r\nexport default function(a) {// Take deck [{card, index}]\r\n\r\n\tvar _deck = [];\r\n\tfor(var i in a) {\r\n\t\tif(a[i].card && a[i].card.name) {\r\n\t\t\t_deck.push(a[i].card.name);\r\n\t\t} else if(a[i].name) {\r\n\t\t\t_deck.push(a[i].name);\r\n\t\t};\r\n\t};\r\n\treturn _deck;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/deckCardNames.js\n **/","'use strict';\r\n\r\nimport common from 'common';\r\n\r\nexport default function(name, groupName) {\r\n\t\r\n\tvar _decks = common.getElementsByName(name, 'deck');\r\n\tif(groupName && typeof groupName == 'string') {\r\n\t\tfor(var i in _decks) {\r\n\t\t\tvar _group = common.getElementById(_gecks[i].parent());\r\n\t\t\tif(_group && _group.name && _group.name == groupName) {\r\n\t\t\t\treturn _decks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t} else {\r\n\t\treturn _decks[0];\r\n\t}\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/getDeck.js\n **/","'use strict';\r\n\r\nexport default function(cardNames) {\r\n\r\n\tvar deckIndex = [];\r\n\tvar _decksLength = 0;\r\n\r\n\t// создаём карты из списка cardNames в порядке очерёдности колод (по одной карте)\r\n\tfor(var i in this.decks) {\r\n\t\t_decksLength += 1;\r\n\t\tdeckIndex.push(null);\r\n\t}\r\n\t\r\n\tfor(var i in this.decks) {\r\n\t\tif(this.decks[i].groupIndex && this.decks[i].groupIndex <= _decksLength) {\r\n\t\t\tdeckIndex[this.decks[i].groupIndex - 1] = true;\r\n\t\t}\r\n\t}\t\r\n\t\r\n\tfor(var i in this.decks) {\r\n\t\tif(!this.decks[i].groupIndex) {\r\n\t\t\tvar _index = 0;\r\n\t\t\tfor(;deckIndex[_index] != null;_index += 1) {}\r\n\t\t\tdeckIndex[_index] = this.decks[i].getId();\r\n\t\t}\r\n\t}\r\n\r\n\tfor(var i in this.decks) {\r\n\t\tif(this.decks[i].groupIndex && this.decks[i].groupIndex <= _decksLength) {\r\n\t\t\tdeckIndex[this.decks[i].groupIndex - 1] = this.decks[i].getId();\r\n\t\t}\r\n\t}\r\n\r\n\tvar _decksWithBigIndex = {}\r\n\tfor(var i in this.decks) {\r\n\t\tif(this.decks[i].groupIndex && this.decks[i].groupIndex > _decksLength) {\r\n\t\t\t_decksWithBigIndex[this.decks[i].groupIndex - 1] = this.decks[i].getId();\r\n\t\t}\r\n\t}\r\n\r\n\tfor(var i in _decksWithBigIndex) {\r\n\t\tvar _index = 0;\r\n\t\tfor(;deckIndex[_index] != null;_index += 1) {}\r\n\t\tdeckIndex[_index] = this.decks[_decksWithBigIndex[i]].getId();\r\n\t}\r\n\r\n\tvar _checkDeck = true;\r\n\tfor(var i in cardNames) {\r\n\t\t_checkDeck = _checkDeck && typeof cardNames[i] == 'string';\r\n\t}\r\n\r\n\tif(_checkDeck) {\r\n\t\t// циклично добавляет карты в колоды в группе (в порядке добавления)\r\n\t\tfor(var i in cardNames) {\r\n\t\t\tvar _index = deckIndex[i % deckIndex.length];\r\n\t\t\tthis.decks[_index].genCardByName(cardNames[i]);\r\n\t\t}\r\n\t} else {\r\n\t \tfor(var i in cardNames) {\r\n\t \t\tif(i < deckIndex.length) {\r\n\t \t\t\tthis.decks[deckIndex[i]].Fill(cardNames[i]);\r\n\t \t\t}\r\n\t \t}\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/group/groupFill.js\n **/","'use strict';\r\n\r\nimport defaults from 'defaults';\r\n\r\nexport default function(_a) {\r\n\r\n\t// console.log('groupRedraw:', _a);\r\n\r\n\tvar _decks = this.getDecks();\r\n\t// var _index = {}\r\n\r\n\tif(typeof _a.decks == 'undefined' || typeof _a.decks == 'number') {_a.decks = [];}\r\n\r\n\tfor(var i in _decks) {\r\n\t\t\r\n\t\tif(!_a.decks[i]) { _a.decks[i] = {}; };\r\n\r\n\t\t// changed values\r\n\t\tif(\r\n\t\t\t_a.position\r\n\t\t && _a.decks[i].parentPosition\r\n\t\t) {\r\n\t\t\t_a.decks[i].parentPosition = {\r\n\t\t\t\tx : _a.position.x,\r\n\t\t\t\ty : _a.position.y\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tif( _a.rotate                   ) { _a.decks[i].rotate         = _a.rotate;       };\r\n\t\tif( _a.paddingX                 ) { _a.decks[i].paddingX       = _a.paddingX;     };\r\n\t\tif( _a.paddingY                 ) { _a.decks[i].paddingY       = _a.paddingY;     };\r\n\t\tif( _a.flipPaddingX             ) { _a.decks[i].flipPaddingX   = _a.flipPaddingX; };\r\n\t\tif( _a.flipPaddingY             ) { _a.decks[i].flipPaddingY   = _a.flipPaddingY; };\r\n\t\tif( !_a.decks[i].position       ) { _a.decks[i].position       = {};              };\r\n\t\tif( !_a.decks[i].parentPosition ) { _a.decks[i].parentPosition = {};              };\r\n\r\n\t\tif(!_a.decks[i].parentPosition.x && a.position && a.position.x && typeof a.position.x == 'number') {\r\n\t\t\t_a.decks[i].parentPosition.x = _a.position.x;\r\n\t\t};\r\n\r\n\t\tif(!_a.decks[i].parentPosition.y && a.position && a.position.y && typeof a.position.y == 'number') {\r\n\t\t\t_a.decks[i].parentPosition.y = _a.position.y;\r\n\t\t};\r\n\r\n\t\tif(_a.placement) {\r\n\t\t\t\r\n\t\t\tvar _card = defaults.card;\r\n\t\t\tif(_a.placement.x) _a.decks[i].position.x = (_a.placement.x + _card.width)  * i;\r\n\t\t\tif(_a.placement.y) _a.decks[i].position.y = (_a.placement.y + _card.height) * i;\r\n\t\t};\r\n\t\t\r\n\t\tif( !_a.decks[i].rotate       && _a.rotate        && typeof _a.rotate       == 'number' ) { _a.decks[i].rotate       = _a.rotate;       };\r\n\t\tif( !_a.decks[i].paddingX     && _a.paddingX      && typeof _a.paddingX     == 'number' ) { _a.decks[i].paddingX     = _a.paddingX;     };\r\n\t\tif( !_a.decks[i].paddingY     && _a.paddingY      && typeof _a.paddingY     == 'number' ) { _a.decks[i].paddingY     = _a.paddingY;     };\r\n\t\tif( !_a.decks[i].flipPaddingX && _a.flipPaddingX  && typeof _a.flipPaddingX == 'number' ) { _a.decks[i].flipPaddingX = _a.flipPaddingX; };\r\n\t\tif( !_a.decks[i].flipPaddingY && _a.flipPaddingY  && typeof _a.flipPaddingY == 'number' ) { _a.decks[i].flipPaddingY = _a.flipPaddingY; };\r\n\t\t\r\n\t\t_decks[i].Redraw(_a.decks[i]);\r\n\t};\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/group/groupRedraw.js\n **/","'use strict';\r\n\r\nimport mapGenerator from \"mapGenerator\";\r\nimport fanGenerator from \"fanGenerator\";\r\n\r\nexport default {\r\n\t\"count\" : function(e) {\r\n\t\t// console.log('!COUNT GENERATOR', e);\r\n\t\tvar _count = e.count;\r\n\t\tvar _decks = [];\r\n\t\tfor(var deckIndex = 0; deckIndex < _count; deckIndex += 1) {\r\n\t\t\tvar _deckName = this.name + \"_deck\" + (deckIndex + 1);\r\n\t\t\t_decks.push({\r\n\t\t\t\tname : _deckName\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn _decks;\r\n\t},\r\n\r\n\t\"map\" : mapGenerator,\r\n\t\"fan\" : fanGenerator\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/group/groupGenerator.js\n **/","'use strict';\r\n\r\nimport defaults from \"defaults\";\r\n\r\nvar inMap = function(x, y, mapSize) {\r\n\treturn x >= 0 && y >= 0 && x < mapSize.width && y < mapSize.height;\r\n};\r\n\r\nexport default function(e) {\r\n\t\r\n\t// TODO\r\n\t// console.log('MAP GENERATOR', e);\r\n\t\r\n\tvar _decks = [];\r\n\t\r\n\tvar _default_placement = {\r\n\t\tx : 0,\r\n\t\ty : 0\r\n\t};\r\n\r\n\tvar _placement = \r\n\t\tthis.placement\r\n\t\t\t? {\r\n\t\t\t\tx : typeof this.placement.x != \"undefined\" ? this.placement.x : _default_placement.x,\r\n\t\t\t\ty : typeof this.placement.y != \"undefined\" ? this.placement.y : _default_placement.y\r\n\t\t\t}\r\n\t\t\t: _default_placement;\r\n\r\n\tthis.placement = {x : 0, y : 0};\r\n\r\n\tvar _index = 1;\r\n\r\n\tvar _mapSize = {\r\n\t\twidth  : e.map[0].length,//MAX LENGTH\r\n\t\theight : e.map   .length\r\n\t}\r\n\te.map.forEach(function(e) {\r\n\t\t_mapSize.width = Math.max(_mapSize.width, e.length);\r\n\t});\r\n\t\r\n\tfor(var y in e.map) {\r\n\t\tfor(var x in e.map[y]) {\r\n\t\t\tif(e.map[y][x]) {\r\n\t\t\t\t\r\n\t\t\t\tvar _deck = {\r\n\t\t\t\t\t\"name\"     : e.map[y][x],// (this.name + \"_deck\" + _index) OR (this.name + '_' + e.map[y][x])\r\n\t\t\t\t\t\"position\" : {\r\n\t\t\t\t\t\t\"x\" : x * ((defaults.card.width|0)  + (_placement.x|0)),\r\n\t\t\t\t\t\t\"y\" : y * ((defaults.card.height|0) + (_placement.y|0))\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(e.aroundRealtions) {// default false\r\n\r\n\t\t\t\t\t// CLT TOP CRT ... CORN SIDE CORN\r\n\t\t\t\t\t// LFT  *  RGT ... SIDE      SIDE\r\n\t\t\t\t\t// CLB BTM CRB ... CORN SIDE CORN\r\n\r\n\t\t\t\t\tvar _relations = [];\r\n\r\n\t\t\t\t\t// SYS: name, from (type???)\r\n\r\n\t\t\t\t\tif( inMap(y - 1, x - 1, _mapSize) && e.map[y - 1] && e.map[y - 1][x - 1] ) { _relations.push({ name : 'around', type : 'corn', id : 'clt', to : e.map[y - 1][x - 1] }); };\r\n\t\t\t\t\tif( inMap(y - 1, x    , _mapSize) && e.map[y - 1] && e.map[y - 1][x]     ) { _relations.push({ name : 'around', type : 'side', id : 'top', to : e.map[y - 1][x]     }); };\r\n\t\t\t\t\tif( inMap(y - 1, x + 1, _mapSize) && e.map[y - 1] && e.map[y - 1][x + 1] ) { _relations.push({ name : 'around', type : 'corn', id : 'crt', to : e.map[y - 1][x + 1] }); };\r\n\t\t\t\t\t\r\n\t\t\t\t\tif( inMap(y    , x - 1, _mapSize) && e.map[y]     && e.map[y][x - 1]     ) { _relations.push({ name : 'around', type : 'side', id : 'lft', to : e.map[y][x - 1]     }); };\r\n\t\t\t\t\tif( inMap(y    , x + 1, _mapSize) && e.map[y]     && e.map[y][x + 1]     ) { _relations.push({ name : 'around', type : 'side', id : 'rgt', to : e.map[y][x + 1]     }); };\r\n\t\t\t\t\t\r\n\t\t\t\t\tif( inMap(y + 1, x - 1, _mapSize) && e.map[y + 1] && e.map[y + 1][x - 1] ) { _relations.push({ name : 'around', type : 'corn', id : 'clb', to : e.map[y + 1][x - 1] }); };\r\n\t\t\t\t\tif( inMap(y + 1, x    , _mapSize) && e.map[y + 1] && e.map[y + 1][x]     ) { _relations.push({ name : 'around', type : 'side', id : 'btm', to : e.map[y + 1][x]     }); };\r\n\t\t\t\t\tif( inMap(y + 1, x + 1, _mapSize) && e.map[y + 1] && e.map[y + 1][x + 1] ) { _relations.push({ name : 'around', type : 'corn', id : 'crb', to : e.map[y + 1][x + 1] }); };\r\n\r\n\t\t\t\t\t_deck.relations = _relations;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t_decks.push(_deck);\r\n\t\t\t\t_index += 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// -----------------------------\r\n\r\n\t// if(e.generateDeckRelations) {}\r\n\r\n\treturn _decks;\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/group/generators/mapGenerator.js\n **/","'use strict';\r\n\r\nimport defaults from 'defaults';\r\n\r\nexport default function(e) {//{count, radus, center}\r\n\r\n\tthis.placement = {\r\n        x : 0, \r\n        y : 0\r\n    };\r\n\r\n\tconsole.log('FAN GENERATOR', e);\r\n    //              b\r\n    //       C  ..`:   A = sin(b) * C\r\n    //     ...``   :B  B = cos(b) * C\r\n    // a.``.......+:\r\n    //        A     y 90deg\r\n    var _decks = [];\r\n\r\n    var _count = typeof e.count == \"number\" ? e.count : 3;//16\r\n    var _step = 180 / _count;\r\n    var _radius = typeof e.radius == \"number\" ? e.radius : 100;//405;\r\n    var _center = \r\n    \ttypeof e.center   != \"undefined\"\r\n     && typeof e.center.x != \"undefined\"\r\n     && typeof e.center.y != \"undefined\"\r\n    \t\t? e.center \r\n    \t\t: {\r\n\t        \t\"x\" : 0,\r\n\t        \t\"y\" : 0\r\n\t        };\r\n    var _angle = _step / 2 + 270;\r\n    var _deg = Math.PI / 180;\r\n    for(var deckIndex = 0; deckIndex < _count; deckIndex += 1) {\r\n        var _a = Math.sin(_angle * _deg) * _radius;\r\n        var _b = Math.cos(_angle * _deg) * _radius;\r\n        if(_angle > 360) _angle -= 360;\r\n        // console.log(\"lunaDeck_\" + i, _angle);\r\n        _decks.push({\r\n            \"name\"     : this.name + \"_deck\" + deckIndex,\r\n            \"rotate\"   : _angle,\r\n            \"position\" : {\r\n                \"x\" : _center.x + _a - defaults.card.width  / 2,\r\n                \"y\" : _center.y - _b - defaults.card.height / 2\r\n            }\r\n        });\r\n        _angle += _step;\r\n    }\r\n\r\n    return _decks;\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/group/generators/fanGenerator.js\n **/","'use strict';\r\n\r\n// import elRender from 'elRender';\r\n\r\nexport default ()=>{\r\n\r\nlet _html = require('html!./preferncesTemplate.html');\r\n\r\n\t// console.log(\r\n\t// \t\"html\",\r\n\t// \t_html\r\n\t// );\r\n\t// console.log(\r\n\t// \t\"#gpCommit\",\r\n\t// \telRender(\"#gpCommit\")\r\n\t// );\r\n\t// console.log(\r\n\t// \t\"PARENT:\",\r\n\t// \telRender(\"#gpCommit\")\r\n\t// \t\t.parent()\r\n\t// );\r\n\r\n\t// elRender(\"#gpCommit\")\r\n\t// \t.parent()\r\n\t// \t.before(_html);\r\n\t$(\"#gpCommit\")\r\n\t\t.parent()\r\n\t\t.before(_html);\r\n\r\n\t// console.log(\"test\")\r\n};\r\n\r\n// preload preferences\r\n// clicks (apply changes)\n\n\n/** WEBPACK FOOTER **\n ** ./sources/preferences/drawPreferences.js\n **/","module.exports = \"<div style=\\\"margin:15px 0 20px 0\\\" id=cards-style-preferences> <h4 style=\\\"margin:20px 0 20px 0\\\">Настройки оформления</h4> <div> <span class=cards-style-preferences-label>Лицевая сторона:</span> <select id=pref_face class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>Англо-американская</option> </select> </div> <div> <span class=cards-style-preferences-label>Рубашка:</span> <select id=pref_back class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>Альтернативная</option> <option value=2>Красная</option> <option value=3>Синяя</option> </select> </div> <div> <span class=cards-style-preferences-label>Пустая ячейка:</span> <select id=pref_empty class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>С обводкой</option> </select> </div> </div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/html-loader!./sources/preferences/preferncesTemplate.html\n ** module id = 39\n ** module chunks = 0\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport defaults from 'defaults';\r\n\r\nimport storage from 'storage';\r\n\r\nlet onShowParameters = ()=>{\r\n\r\n\tlet pref = storage.get('pref');\r\n\t!pref && (pref = defaults.pref);\r\n\t\r\n\t$(\"#pref_face [value=\" + pref.face + \"]\")\r\n\t\t.prop({selected: true});\r\n\t$(\"#pref_back [value=\" + pref.back + \"]\")\r\n\t\t.prop({selected: true});\r\n\t$(\"#pref_empty [value=\" + pref.empty + \"]\")\r\n\t\t.prop({selected: true});\r\n};\r\n\r\nlet applyParameters = ()=>{\r\n\t\r\n\tvar pref = {\r\n\t\tface  : $(\"#pref_face\") .val(),\r\n\t\tback  : $(\"#pref_back\") .val(),\r\n\t\tempty : $(\"#pref_empty\").val()\r\n\t};\r\n\r\n\tevent.dispatch('fieldThemesSet', pref);\r\n\r\n\tsaveParameters(pref);\r\n};\r\n\r\nlet saveParameters = (pref)=>{\r\n\r\n\tstorage.set('pref', pref);\r\n};\r\n\r\nexport default ()=>{\r\n\t\r\n\t$(\"#bbParameters\").click(onShowParameters);\r\n\t// $(\"#gpCommit\").click(saveParameters);\r\n\t$(\".cards-style-preferences-element\").change(applyParameters);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/preferences/preferencesEvents.js\n **/","'use strict';\r\n\r\nclass storage {\r\n\r\n\t// TODO настройки сохраняются для всех игр,\r\n\t// возможно нужно будет для каждой отдельно,\r\n\t// тогда в конфигурацию нужно будет включить gameId\r\n\r\n\tconstructor() {\r\n\r\n\t\tif(!localStorage.hasOwnProperty('SolitaireEngine')) {\r\n\t\t\tlocalStorage.SolitaireEngine = \"{}\";\r\n\t\t}\r\n\t}\r\n\r\n\tset(key, data) {\r\n\t\t// console.log('set', key);\r\n\r\n\t\tlet _ls = JSON.parse(localStorage.SolitaireEngine);\r\n\t\t// Object['assign'](_ls, data);\r\n\t\t_ls[key] = data;\r\n\t\tlocalStorage.SolitaireEngine = JSON.stringify(_ls);\r\n\t}\r\n\t\r\n\tget(key) {\r\n\r\n\t\tlet _ls = JSON.parse(localStorage.SolitaireEngine);\r\n\t\treturn _ls[key];\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tlocalStorage.SolitaireEngine = \"{}\";\r\n\t}\r\n}\r\n\r\nexport default new storage();\n\n\n/** WEBPACK FOOTER **\n ** ./sources/common/storage.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport defaults from 'defaults';\r\n\r\nimport storage from 'storage';\r\n\r\nexport default ()=>{\r\n\r\n\tlet pref = storage.get('pref');\r\n\t!pref && (pref = defaults.pref);\r\n\r\n\tevent.dispatch('fieldThemesSet', pref);\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/preferences/defaultPreferences.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport share    from 'share';\r\nimport defaults from 'defaults';\r\nimport common   from 'common';\r\n\r\nimport Deck     from 'addDeck';\r\nimport Tips     from 'tips';\r\nimport bestTip  from 'bestTip';\r\nimport History  from 'history';\r\nimport winCheck from 'winCheck';\r\nimport Field    from 'field';\r\n\r\nvar Move = function(moveDeck, to, cursorMove) {\r\n\r\n\tif(\r\n\t\t!cursorMove.dbclick\r\n\t && cursorMove.distance == 0\r\n\t && share.get('moveDistance') > 0\r\n\t) {\r\n\t\t// кликнули один раз\r\n\t\t// чтобы сделать ход нужно переместить карту стопку (moveDistance != 0)\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tvar _deck_destination = null,// to\r\n    \t_deck_departure   = null,// from\r\n    \t_success          = true;\r\n\r\n    _success = _success && to;// to - не пустой\r\n\r\n    var _el = to && to.id && common.getElementById(to.id);// получаем карту/стопку\r\n\r\n\t// если положили на карту узнаём из какой она стопки\r\n\tif(_el) {\r\n\t\tif(_el.type        == 'card') {\r\n    \t\t_deck_destination = common.getElementById(_el.parent)\r\n    \t} else if(_el.type == 'deck') {\r\n    \t\t_deck_destination = _el;\r\n    \t}\r\n    }\r\n    _success = _success && _deck_destination;\r\n\t\r\n\t// находим стопку из которой взяли\r\n\t_deck_departure = moveDeck[0].card.parent && common.getElementById(moveDeck[0].card.parent);\r\n    _success = _success && _deck_departure;\r\n\r\n    // смотрим не одна и та же ли эта стопка\r\n    if(_deck_destination && _deck_destination.getId() != _deck_departure.getId()) {\r\n\t    \r\n    \t// узнаём можно ли положить карты на папку назначения\r\n    \tvar _put = _deck_destination.Put(moveDeck);\r\n\t    _success = _success && _put;\r\n    \t\r\n    \tif(_put) {//} && _deck_departure) {\r\n    \t\t\r\n    \t\t// если можно положить карты берём их из исходной стопки\r\n    \t\tvar _pop = _deck_departure.Pop(moveDeck.length);\r\n\t\t    _success = _success && _pop;\r\n    \t\t\r\n    \t\tif(_pop) {\r\n    \t\t\t\r\n    \t\t\t// ложим карты в колоду назначения\r\n    \t\t\t_deck_destination.Push(_pop);\r\n\r\n\t\t\t\t// режим анимации по умолчанию\r\n\t\t\t\tcommon.animationDefault();\r\n\r\n\t\t\t\tevent.dispatch('moveDragDeck', {\r\n\t\t\t\t\tdeparture   : _deck_departure,\r\n\t\t\t\t\tdestination : _deck_destination,\r\n\t\t\t\t\tmoveDeck    : moveDeck,\r\n\t\t\t\t\tcallback    : function() {\r\n\r\n\t\t\t\t\t\t// console.log('Move:moveEnd');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tevent.dispatch('moveEnd', {\r\n\t\t\t\t\t\t\tfrom     : _deck_departure,\r\n\t\t\t\t\t\t\tto       : _deck_destination,\r\n\t\t\t\t\t\t\tmoveDeck : moveDeck\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tHistory.add({'move' : {\r\n\t\t\t\t\tfrom : _deck_departure  .name,\r\n\t\t\t\t\tto   : _deck_destination.name,\r\n\t\t\t\t\tdeck : Deck.deckCardNames(moveDeck)\r\n\t\t\t\t}});\r\n\r\n\t\t\t\tvar _deck = _deck_departure.cards;\r\n\t\t\t\tif(_deck.length && _deck[_deck.length - 1].flip) {\r\n\t\t\t\t\t_deck[_deck.length - 1].flip = false;\r\n\t\t\t\t\tHistory.add({unflip : {\r\n\t\t\t\t\t\tdeck : _deck_departure.name,\r\n\t\t\t\t\t\tcard : {\r\n\t\t\t\t\t\t\tname  : _deck[_deck.length - 1].name,\r\n\t\t\t\t\t\t\tindex : _deck.length - 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// console.log('afterStep:', _deck_destination.afterStep);\r\n\t\t\t\t\r\n\t\t\t\tif(!_deck_destination.afterStep) {\r\n\t\t\t\t\t// typeof _deck_destination.afterStep == \"function\"\r\n\t\t\t\t\t// console.log('Move:makeStep');\r\n\t\t\t\t\tevent.dispatch('makeStep', History.get());\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\twinCheck.winCheck({show : true});\r\n\r\n    \t\t}\r\n    \t}\r\n    } else {\r\n    \t// карту отпустили на той же стопке\r\n    \t// + минимальное неоходимое расстояние для автохода не пройдено\r\n    \t_success = false;\r\n    }\r\n\r\n\t// если не кдалось положить карты, вернуть обратно\r\n\t// или положить на лучшее возможное место\r\n\tif(!_success && _deck_departure) {\r\n\t\t\r\n\t\tvar _field = Field();\r\n\t\tif(\r\n\t\t\t_field.inputParams.doubleClick\r\n\t\t && cursorMove.dbclick\r\n\t\t || cursorMove.distance >= share.get('moveDistance')\r\n\t\t) {\r\n\r\n    \t\tvar Tip = bestTip(moveDeck, cursorMove);\r\n    \t\t\r\n    \t\tif(Tip) {\r\n    \t\t\tconsole.log('###', Tip);\r\n    \t\t\tMove(moveDeck, Tip.to.deck.domElement.el, cursorMove);\r\n    \t\t\treturn;\r\n    \t\t} else {\r\n    \t\t\tevent.dispatch('moveCardToHome', {\r\n    \t\t\t\tmoveDeck  : moveDeck,\r\n    \t\t\t\tdeparture : _deck_departure\r\n    \t\t\t});\r\n\t    \t\t// share.moveCardToHome();\r\n    \t\t};\r\n\r\n\t\t} else {\r\n\t\t\tevent.dispatch('moveCardToHome', {\r\n\t\t\t\tmoveDeck  : moveDeck,\r\n\t\t\t\tdeparture : _deck_departure\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t// console.log('_success', _success);\r\n\r\n\t// if(_success) {\r\n\r\n\t\t// afterMove();\r\n\tTips.checkTips();\r\n    // }\r\n\r\n};\r\n\r\n// console.log('>>>')\r\nevent.listen('Move', function(e) {\r\n\r\n\tconsole.log('Move ->');\r\n\r\n\tMove(e.moveDeck, e.to, e.cursorMove);\r\n});\r\n\r\n// export default Move;\n\n\n/** WEBPACK FOOTER **\n ** ./sources/move.js\n **/","'use strict';\r\n\r\nimport share           from 'share';\r\nimport event           from 'event';\r\nimport common          from 'common';\r\n\r\nimport winCheckMethods from 'winCheckMethods';\r\nimport Deck            from 'addDeck';\r\n\r\nvar winCheck = function(params) {\r\n\r\n\t// console.log('%cWIN CHECK', 'background : red');\r\n\t\t\r\n\tvar rulesCorrect = true;\r\n\tvar _hasMetods = false;\r\n\tvar _winCheck = share.get('winCheck');\r\n\r\n\t// console.log('winCheck', params, _winCheck);\r\n\t\r\n\tfor(var ruleName in _winCheck.rules) {\r\n\t\t_hasMetods = true;\r\n\t\t\r\n\t\tif(winCheckMethods[ruleName]) {\r\n\t\t\r\n\t\t\trulesCorrect = rulesCorrect && winCheckMethods[ruleName]({\r\n\t\t\t\tdecks     : Deck.getDecks({visible : true}), \r\n\t\t\t\trulesArgs : _winCheck.rules[ruleName]\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\trulesCorrect = rulesCorrect && winCheckMethods['newerWin']();\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(!_hasMetods) {\r\n\t\trulesCorrect = rulesCorrect && winCheckMethods['newerWin']();\r\n\t}\r\n\r\n\tif(rulesCorrect) {\r\n\t\tif(params && params.noCallback) { return true; }\r\n\t\tevent.dispatch('win', params);\r\n\t\t// a.winCheck.callback();\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\nvar hwinCheck = function(a) {\r\n\tif(!a) {\r\n\t\ta = {};\r\n\t}\r\n\tif(typeof a.show == 'undefined') {\r\n\t\ta.show = false;\r\n\t}\r\n\t// console.log('winCheck', a);\r\n\twinCheck(a);\r\n\t// return winCheck({noCallback : true});\r\n};\r\n\r\nexport default {\r\n\twinCheck, \r\n\thwinCheck\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/winCheck.js\n **/","'use strict';\r\n\r\n/*\r\n * Client-server application for planning biomechanical stimulation\r\n * version: 1.0\r\n * author: Romasan\r\n * date: 05.05.2016\r\n */\r\n\r\n// import share    from 'share';\r\nimport common   from 'common';\r\nimport defaults from 'defaults';\r\n\r\nvar wcm = {\r\n\t// Filters\r\n\r\n\t// возвращает колоды определённой группы/групп\r\n\tgroup : function(a) {\r\n\r\n\t\t// console.log(\"winCheck:group\", a);\r\n\r\n\t\tif(!a.filter || !a.filterArgs) { return false; }\r\n\r\n\t\tvar _decks = [];\r\n\t\tfor(var _i in a.decks) {\r\n\t\t\t\r\n\t\t\t// console.log('group filter:', _i, a.decks[_i].parent, a.filterArgs);\r\n\t\t\t// var _parent = a.decks[_i].parent\r\n\t\t\t// if(a.filterArgs.indexOf(a.decks[_i].parent)) {\r\n\t\t\tif(\r\n\t\t\t\t(\r\n\t\t\t\t\ttypeof a.filterArgs == \"string\" \r\n\t\t\t\t && a.decks[_i].parent  == a.filterArgs\r\n\t\t\t\t)\r\n\t\t\t || (\r\n\t\t\t \t\ta.filterArgs.length\r\n\t\t\t \t && a.filterArgs.indexOf(a.decks[_i].parent) >= 0\r\n\t\t\t \t)\r\n\t\t\t) {\r\n\t\t\t\t_decks.push(a.decks[_i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\ta.decks = _decks;\r\n\t\treturn _decks.length;\r\n\r\n\t},\r\n\r\n\tgroups : function(a) {\r\n\t\treturn wcm.group(a);\r\n\t},\r\n\r\n\t// groups : function() {},\r\n\r\n\t// Internal use\r\n\r\n\t_asc_desk : function(a) {\r\n\r\n\t\tif(!a || a.asc_desk == null || typeof a.asc_desk != 'number') return false;\r\n\r\n\t\tvar _correct = true;\r\n\t\t\r\n\t\tfor(var d in a.decks) {\r\n\r\n\t\t\t// console.log('_asc_desk', a.asc_desk ? 'asc' : 'desk', a.asc_desk, d, a.decks[d], _correct, a.decks[d].cards);\r\n\t\t\tif(!_correct) return false;\r\n\t\t\t\r\n\t\t\tvar _cards = a.decks[d].cards;\r\n\t\t\t// console.log('cards:', _cards);\r\n\t\t\tfor(var c in _cards) {\r\n\t\t\t\tif(c > 0) {\t\r\n\t\t\t\t\tvar down = common.validateCardName(_cards[(c|0) - 1].name),\r\n\t\t\t\t\t\tup   = common.validateCardName(_cards[(c|0)].name);\r\n\t\t\t\t\t// console.log('_asc_desk', down, up, a.asc_desk);\t\r\n\t\t\t\t\tvar _cardsRankS = defaults.card.ranks;\r\n\t\t\t\t\t_correct = _correct && down && up && _cardsRankS.indexOf(down.rank) == (_cardsRankS.indexOf(up.rank) + a.asc_desk);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn _correct;\r\n\t},\r\n\r\n\t// Simple rules\r\n\r\n\tnewerWin : function() {\r\n\t\tconsole.warn(\"You use 'newerWin' rule for checking Win. Maybe arguments in 'winCheck.rule' have incorrect rule name.\")\r\n\t\treturn false;\r\n\t},\r\n\r\n\t// все колоды пусты\r\n\r\n\tallEmpty : function(a) {\r\n\r\n\t\tvar _correct = true;\r\n\t\tfor(var _i in a.decks) {\r\n\t\t\t_correct = _correct && a.decks[_i].cards.length == 0;\r\n\t\t}\r\n\t\treturn _correct;\r\n\t},\r\n\r\n\t// Combined rules (use like filter)\r\n\r\n\t// все карты в одной колоде\r\n\tallInOne : function(a) {\r\n\r\n\t\t// console.log('check Win, rule/filter - allInOne:', a);\r\n\r\n\t\tvar _emptyDecksCount = 0,\r\n\t\t\t_decksLength     = 0,\r\n\t\t\t_fillIndex       = 0;\r\n\t\tfor(var i in a.decks) {\r\n\t\t\tif(a.decks[i].cards.length == 0) {\r\n\t\t\t\t_emptyDecksCount += 1;\r\n\t\t\t} else {\r\n\t\t\t\t_fillIndex = i;\r\n\t\t\t}\r\n\t\t\t_decksLength += 1;\r\n\t\t}\r\n\t\t// console.log('allinone', a, _emptyDecksCount, _decksLength);\r\n\t\tvar _correct = _emptyDecksCount == _decksLength - 1;\r\n\t\tif(a.filter) {\r\n\t\t\ta.decks = _correct ? [a.decks[_fillIndex]] : [];\r\n\t\t}\r\n\t\treturn _correct\r\n\t},\r\n\r\n\t// step by step 1, 2, 3\r\n\t// во всех колодах карты по возрастанию\r\n\tallAscend : function(a) {\r\n\r\n\t\t// console.log('check Win, rule - allAscending:', a);\r\n\t\ta.asc_desk = -1;\r\n\t\treturn wcm._asc_desk(a);\r\n\t},\r\n\t\r\n\t// step by step 3, 2, 1\r\n\t// во всех колодах карты по убыванию\r\n\tallDescent : function(a) {\r\n\t\t\t\r\n\t\ta.asc_desk = 1;\r\n\t\treturn wcm._asc_desk(a);\r\n\t},\r\n\r\n\t// Composite rules (input arguments)\r\n\t// комбинированное правило\r\n\t\t\r\n\tlego : function(_a) {\r\n\t\t\r\n\t\t// console.log('LEGO', _a);//a.rulesArgs.filters, a.rulesArgs.rules)\r\n\t\t\r\n\t\tif(!_a || !_a.rulesArgs) return false;\r\n\t\t\r\n\t\tvar _correct = true;\r\n\t\t\r\n\t\t// apply filters\r\n\t\tfor(var next in _a.rulesArgs) {\r\n\r\n\t\t\tvar _decksClone = {};\r\n\t\t\tfor(var i in _a.decks) {\r\n\t\t\t\t_decksClone[i] = _a.decks[i];\r\n\t\t\t}\r\n\t\t\tvar a = {\r\n\t\t\t\t// filters : _a[next].filters,\r\n\t\t\t\t// rules   : _a[next].rules,\r\n\t\t\t\tdecks   : _decksClone\r\n\t\t\t};\r\n\r\n\t\t\t// применяем фильтры, оставляем только интересующие колоды\r\n\t\t\t\r\n\t\t\tif(_correct && _a.rulesArgs[next].filters) {\r\n\r\n\t\t\t\ta.filter = true;\r\n\r\n\t\t\t\tfor(var i in _a.rulesArgs[next].filters) {\r\n\t\t\t\t\tif(typeof _a.rulesArgs[next].filters[i] == 'string' && wcm[_a.rulesArgs[next].filters[i]]) {\r\n\t\t\t\t\t\ta.filterArgs = null;\r\n\t\t\t\t\t\t_correct = _correct && wcm[_a.rulesArgs[next].filters[i]](a);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// if(typeof _a.rulesArgs[next].filters[i] == 'object') {\r\n\t\t\t\t\t\tif (_a.rulesArgs[next].filters[i]\r\n\t\t\t\t\t\t && _a.rulesArgs[next].filters[i].toString() == \"[object Object]\"\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfor(var filterName in _a.rulesArgs[next].filters[i]) {\r\n\t\t\t\t\t\t\t\tif(wcm[filterName]) {\r\n\t\t\t\t\t\t\t\t\ta.filterArgs = _a.rulesArgs[next].filters[i][filterName]\r\n\t\t\t\t\t\t\t\t\t_correct = _correct && wcm[filterName](a);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t_correct = _correct && wcm['newerWin']();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_correct = _correct && wcm['newerWin']();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ta.filter = false;\r\n\t\t\t}\r\n\r\n\t\t\t// применяем правила к оставшимся колодам\r\n\r\n\t\t\tif(_a.rulesArgs[next].rules) {\r\n\t\t\t\t\r\n\t\t\t\tfor(var i in _a.rulesArgs[next].rules) {\r\n\t\t\t\t\tif(wcm[_a.rulesArgs[next].rules[i]]) {\r\n\t\t\t\t\t\t_correct = _correct && wcm[_a.rulesArgs[next].rules[i]](a);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('#2')\r\n\t\t\t\t\t\t_correct = _correct && wcm['newerWin']();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\treturn _correct;\r\n\t}\r\n};\r\n\r\nexport default wcm;\n\n\n/** WEBPACK FOOTER **\n ** ./sources/winCheckMethods.js\n **/","'use strict';\r\n\r\nimport event from 'event';\r\n\r\nimport elRender from 'elRender';\r\n\r\nimport initField      from 'initField';\r\nimport drawDeck       from 'drawDeck';\r\nimport drawCard       from 'drawCard';\r\nimport drawTip        from 'drawTip';\r\nimport moveDragDeck   from 'moveDragDeck';\r\nimport moveCardToHome from 'moveCardToHome';\r\nimport fieldThemesSet from 'fieldThemesSet';\r\n\r\nevent.listen('removeEl', function(e) {\r\n\telRender(e.domElement)\r\n\t\t.remove();\r\n});\r\n\r\nevent.listen('showCard', function(target) {\r\n\telRender(target).show();\r\n});\r\n\r\nevent.listen('hideCard', function(target) {\r\n\telRender(target).hide();\r\n});\r\n\r\nevent.listen('stopAnimations', function() {\r\n\telRender.stopAnimations();\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/domManager.js\n **/","'use strict';\r\n\r\nimport share    from 'share';\r\nimport event    from 'event';\r\nimport defaults from 'defaults';\r\n\r\nimport Field    from 'field';\r\nimport elRender from 'elRender';\r\n\r\nevent.listen('initField', function(e) {\r\n\r\n\t// console.log('initField');\r\n\t\r\n\tvar domElement = e.a.field ? e.a.field : '#mat';// default;\r\n\tif(typeof domElement == 'string') {\r\n\t\tif(domElement.split('.').length == 2) {\r\n\t\t\tdomElement = document.getElementsByClassName(domElement.split('.')[1])[0];\r\n\t\t} else if(domElement.split('#').length == 2) {\r\n\t\t\tdomElement = document.getElementById(domElement.split('#')[1]);\r\n\t\t} else {\r\n\t\t\tdomElement = document.getElementsByTagName(domElement);\r\n\t\t}\r\n\t\tif(!domElement) {\r\n\t\t\tdomElement = document.getElementById('mat')\r\n\t\t}\r\n\t};\r\n\t// share.field = e.field;\r\n\tvar _field = Field();\r\n\t_field.domElement = domElement;\r\n\r\n\tvar _params = {};\r\n\r\n\tif(e.a.width  && typeof e.a.width  == 'number') { _params.width  = e.a.width  + 'px'; }\r\n\tif(e.a.height && typeof e.a.height == 'number') { _params.height = e.a.height + 'px'; }\r\n\tif(e.a.top    && typeof e.a.top    == 'number') { _params.top    = e.a.top    + 'px'; }\r\n\tif(e.a.left   && typeof e.a.left   == 'number') { _params.left   = e.a.left   + 'px'; }\r\n\r\n\tvar _zoom = share.get('zoom');\r\n\t(_zoom != defaults.zoom || _zoom != 1) && (_params.transform = 'scale(' + _zoom + ')', _params['transform-origin'] = '0 0');\r\n\t// if(a.rotate && typeof a.rotate == 'number') _params.transform = 'rotate(' + (a.rotate|0) + 'deg)';\r\n\t\r\n\tvar themeName = \r\n\t\ttypeof e.a.theme == 'string' \r\n\t\t\t? e.a.theme \r\n\t\t\t: typeof e.a.theme == 'object' && e.a.theme.name\r\n\t\t\t\t? e.a.theme.name\r\n\t\t\t\t: defaults.theme.name;\r\n\r\n\telRender(domElement)\r\n\t\t.css(_params)\r\n\t\t.addClass('field')\r\n\t\t.addClass(themeName);\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/initField.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport share    from 'share';\r\nimport defaults from 'defaults';\r\n\r\nimport Field    from 'field';\r\nimport elRender from 'elRender';\r\n\r\nvar applyChangedParameters = function(p, a, deck) {\r\n\t\r\n\t// console.log('applyChangedParameters', a);\r\n\t\r\n\tp.x = a.position && a.position.x && typeof a.position.x == 'number'  ? a.position.x : 0,\r\n\tp.y = a.position && a.position.y && typeof a.position.y == 'number'  ? a.position.y : 0;\r\n\tp.x = a.parentPosition && a.parentPosition.x ? p.x + a.parentPosition.x : p.x;\r\n\tp.y = a.parentPosition && a.parentPosition.y ? p.y + a.parentPosition.y : p.y;\r\n\t\r\n\tdeck.rotate = p.rotate = a.rotate && typeof a.rotate == 'number' ? a.rotate : 0;\r\n\t\r\n\t// у padding_x, padding_y приоритет выше чем paddingType\r\n\r\n\tp.padding_y = a.paddingY          && typeof a.paddingY     == 'number' \r\n\t\t? a.paddingY \r\n\t\t: a.paddingType\r\n\t\t\t? defaults.padding_y      \r\n\t\t\t: 0,\r\n\tp.padding_x = a.paddingX          && typeof a.paddingX     == 'number' \r\n\t? a.paddingX \r\n\t: a.paddingType\r\n\t\t? defaults.padding_x      \r\n\t\t: 0,\r\n\tp.flip_padding_y = a.flipPaddingY && typeof a.flipPaddingY == 'number' \r\n\t? a.flipPaddingY \r\n\t: a.paddingType\r\n\t\t? defaults.flip_padding_y \r\n\t\t: 0,\r\n\tp.flip_padding_x = a.flipPaddingX && typeof a.flipPaddingX == 'number' \r\n\t? a.flipPaddingX \r\n\t: a.paddingType\r\n\t\t? defaults.flip_padding_x \r\n\t\t: 0;\r\n};\r\n\r\n// --------------------------------------------------------------------------------------------------------\r\n\r\nevent.listen('addDeckEl', function(e) {\r\n\r\n\tvar _field = Field();\r\n\t\r\n\t// console.log('addDeckEl', e);\r\n\r\n\tapplyChangedParameters(e.params, e.a, e.deck);\r\n\r\n\te.deck.domElement = \r\n\t\telRender('<div>')\r\n\t\t\t// .getEl();\r\n\t\r\n\tvar _params = {\r\n\t\tleft      : e.params.x           + 'px',\r\n\t\ttop       : e.params.y           + 'px',\r\n\t\twidth     : defaults.card.width  + 'px',\r\n \t\theight    : defaults.card.height + 'px',\r\n\t\ttransform : 'rotate(' + (e.params.rotate|0) + 'deg)'\r\n\t};\r\n\t\r\n\t_params.display = e.deck.visible ? 'block' : 'none';\r\n\r\n\telRender(e.deck.domElement)\r\n\t\t.css(_params)\r\n\t\t.addClass('el')\r\n\t\t.attr({\r\n\t\t\tid: e.deck.getId()\r\n\t\t});\r\n\r\n\t// var showSlot = e.a.showSlot && typeof e.a.showSlot == 'boolean' ? e.a.showSlot : defaults.showSlot;\r\n\t// console.log('slot', e.a);\r\n\tif(e.a.showSlot) {\r\n\t\telRender(e.deck.domElement)\r\n\t\t\t.addClass('slot');\r\n\t}\r\n\tif(e.a.class) {\r\n\t\telRender(e.deck.domElement)\r\n\t\t\t.addClass(e.a.class);\r\n\t}\r\n\r\n\telRender(_field.domElement)\r\n\t\t.append(e.deck.domElement);\r\n\r\n\r\n\t// add label\r\n\t\t\r\n\tvar label = e.a.label && typeof e.a.label == 'string' ? e.a.label : null;\r\n\t\r\n\t// console.log('debugLabels -->', share.get('debugLabels'));\r\n\r\n\tif(!e.a.label && share.get('debugLabels')) {\r\n\t\tlabel = '<span style=\"color:#65B0FF;\">' + e.deck.name + '</span>';\r\n\t}\r\n\tif(label) {\r\n\t\tvar _labelElement = \r\n\t\t\telRender('<div>')\r\n\t\t\t\t.addClass('deckLabel')\r\n\t\t// DEBUG, TODO remove next string\r\n\t\t\t\t.attr({\r\n\t\t\t\t\t\"title\" : e.deck.getId() + \" (\" + e.deck.parent + \")\"\r\n\t\t\t\t})\r\n\t\t\t\t// .getEl();\r\n\t\telRender(_labelElement)\r\n\t\t\t.html(label);\r\n\t\telRender(e.deck.domElement)\r\n\t\t\t.append(_labelElement);\r\n\t\t\r\n\t}\r\n\r\n});\r\n\r\n// --------------------------------------------------------------------------------------------------------\r\n\r\nevent.listen('redrawDeckFlip', function(e) {\r\n\t\r\n\tif(!e || !e.cards) return;\r\n\r\n\tfor(var i in e.cards) {\r\n\t\tvar _params = {};\r\n\t\t\r\n\t\tif(e.cards[i].flip) {\r\n\t\t\telRender(e.cards[i].domElement)\r\n\t\t\t\t.addClass('flip');\r\n\t\t} else {\r\n\t\t\telRender(e.cards[i].domElement)\r\n\t\t\t\t.removeClass('flip');\r\n\t\t}\r\n\t\telRender(e.cards[i].domElement)\r\n\t\t\t.css(_params);\r\n\t}\r\n\r\n});\r\n\r\n// --------------------------------------------------------------------------------------------------------\r\n\r\nevent.listen('redrawDeckIndexes', function(e) {\r\n\t\r\n\tconsole.log('redrawDeckPaddings:', e);\r\n\t\r\n\tif(!e || !e.cards) return;\r\n\r\n\tfor(var i in e.cards) {\r\n\t\telRender(e.cards[i].domElement).css({\r\n\t\t\t'z-index' : (defaults.startZIndex|0) + (i|0)\r\n\t\t})\r\n\t}\r\n});\r\n\r\n// --------------------------------------------------------------------------------------------------------\r\n\r\nevent.listen('redrawDeck', function(e) {\r\n\r\n\t// console.log('redrawDeck', share.get('noRedraw'));\r\n\t\r\n\tif(share.get('noRedraw')) { return false; };\r\n\t\r\n\r\n\tif(e.data) {\r\n\t\tapplyChangedParameters(e.params, e.data, e.deck);\r\n\r\n\t\tif(e.data.paddingX    ) share.get('padding_x',      e.data.paddingX    );\r\n\t\tif(e.data.flipPaddingX) share.get('flip_padding_x', e.data.flipPaddingX);\r\n\t\tif(e.data.paddingY    ) share.get('padding_y',      e.data.paddingY    );\r\n\t\tif(e.data.flipPaddingY) share.get('flip_padding_y', e.data.flipPaddingY);\r\n\t}\r\n\r\n\tvar _params = {\r\n\t\tleft      : e.params.x,\r\n\t\ttop       : e.params.y,\r\n\t\ttransform : 'rotate(' + (e.params.rotate|0) + 'deg)'\r\n\t};\r\n\t\r\n\t_params.display = e.deck.visible ? 'block' : 'none';\r\n\r\n\t// console.log('DECK REDRAW', e.deck.domElement);\r\n\r\n\telRender(e.deck.domElement)\r\n\t\t.css(_params);\r\n\r\n\tfor(var i in e.cards) {\r\n\t\tvar _card_position = e.deck.padding(i);\r\n\t\tvar _zIndex = (e.params.startZIndex|0) + (i|0);\r\n\t\t// console.log('>>> Z-INDEX:', e.deck.name, _zIndex);\r\n\t\tvar _params = {\r\n\t\t\t'left'              : _card_position.x + 'px', \r\n\t\t\t'top'               : _card_position.y + 'px',\r\n\t\t\t'z-index'           : _zIndex,\r\n\t\t    '-ms-transform'     : 'rotate(' + (e.params.rotate|0) + 'deg)',\r\n\t\t    '-webkit-transform' : 'rotate(' + (e.params.rotate|0) + 'deg)',\r\n\t\t    '-moz-transform'    : 'rotate(' + (e.params.rotate|0) + 'deg)',\r\n\t\t\t'transform'         : 'rotate(' + (e.params.rotate|0) + 'deg)'\r\n\t\t};\r\n\t\t_params.display = e.deck.visible ? 'block' : 'none';\r\n\r\n\t\t// e.deck.checkFlip(e.cards[i], i|0, e.cards.length|0);\r\n\t\t\r\n\t\tif(e.cards[i].flip) {\r\n\t\t\telRender(e.cards[i].domElement)\r\n\t\t\t\t.addClass('flip');\r\n\t\t} else {\r\n\t\t\telRender(e.cards[i].domElement)\r\n\t\t\t\t.removeClass('flip');\r\n\t\t}\r\n\t\telRender(e.cards[i].domElement)\r\n\t\t\t.css(_params);\r\n\t}\r\n\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/drawDeck.js\n **/","'use strict';\r\n\r\nimport share    from 'share';\r\nimport event    from 'event';\r\nimport defaults from 'defaults';\r\nimport common   from 'common';\r\n\r\nimport Field    from 'field';\r\nimport elRender from 'elRender';\r\n\r\nevent.listen('addCardEl', function(e) {\r\n\t\r\n\tvar _field = Field();\r\n\t\r\n\tvar _card = {\r\n\t\twidth  : defaults.card.width,\r\n\t\theight : defaults.card.height\r\n\t};\r\n\t_card = {\r\n\t\twidth  : _card.width .toFixed(3) * 1,\r\n\t\theight : _card.height.toFixed(3) * 1\r\n\t};\r\n\r\n\tvar _params = {\r\n\t\t\"width\"               : _card.width  + 'px',\r\n\t\t\"height\"              : _card.height + 'px'\r\n\t};\r\n\r\n\t// TODO Переписать на SASS\r\n\t/*if(share.get('spriteTexture')) {\r\n\t\tvar _vcard = common.validateCardName(e.name),\r\n\t\t_position = {\r\n\t\t\tx : defaults.card.ranks      .indexOf(_vcard.rank),\r\n\t\t\ty : share.get('textureSuits').indexOf(_vcard.suit),\r\n\t\t};\r\n\r\n\t\tvar _backgroundSize = {\r\n\t\t\t\twidth  : defaults.card.ranks.length * _card.width,\r\n\t\t\t\theight : defaults.card.suits.length * _card.height\r\n\t\t\t},\r\n\t\t\t_backgroundPosition = {\r\n\t\t\t\tx : _position.x * _card.width,\r\n\t\t\t\ty : _position.y * _card.height\r\n\t\t\t};\r\n\t\t_backgroundSize = {\r\n\t\t\twidth  : _backgroundSize.width .toFixed(3) * 1,\r\n\t\t\theight : _backgroundSize.height.toFixed(3) * 1\r\n\t\t};\r\n\t\t_backgroundPosition = {\r\n\t\t\tx : _backgroundPosition.x.toFixed(3) * 1,\r\n\t\t\ty : _backgroundPosition.y.toFixed(3) * 1\r\n\t\t};\r\n\r\n\t\t_params[\"background-size\"]     = _backgroundSize.width + 'px ' + _backgroundSize.height + 'px';\r\n\t\t_params[\"background-position\"] = _backgroundPosition.x + 'px ' + _backgroundPosition.y  + 'px';\r\n\t}*/\r\n\r\n\te.domElement = \r\n\t\telRender('<div>')\r\n\t\t\t// .getEl();\r\n\t\r\n\telRender(e.domElement)\r\n\t\t// .addClass(e.name)\r\n\t\t.addClass('el card draggable ' + e.name)\r\n\t\t// .css({'background-size' : null})\r\n\t\t.css(_params)\r\n\t\t.attr({\r\n\t\t\tid: e.id\r\n\t\t});\r\n\telRender(_field.domElement)\r\n\t\t.append(e.domElement);\r\n});\r\n\r\nevent.listen('hideCard', function(e) {\r\n\r\n\t// console.log('hideCard:', e);\r\n\tif(e && e.domElement) {\r\n\t\telRender(e.domElement[0])\r\n\t\t\t.hide();\r\n\t}\r\n});\r\n\t\r\nevent.listen('showCard', function(e) {\r\n\r\n\t// console.log('showCard:', e);\r\n\tif(e && e.domElement) {\r\n\t\telRender(e.domElement[0])\r\n\t\t\t.show();\r\n\t}\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/drawCard.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\n\r\nimport elRender from 'elRender';\r\nimport Tips     from 'tips';\r\n\r\nevent.listen('showTip', function(e) {\r\n\r\n\t// console.log('showTip', e);\r\n\t\r\n\tif(e && e.el && e.el.domElement && e.type) {\r\n\t\telRender(e.el.domElement)\r\n\t\t\t.addClass(e.type);\r\n\t}\r\n});\r\n\r\nevent.listen('hideTips', function(e) {\r\n\t\r\n\t// console.log('hideTips', e);\r\n\t\r\n\tif(e && e.types) {\r\n\t\tfor(var i in e.types) {\r\n\t\t\tvar typeName = e.types[i];\r\n\t\t\telRender('.' + typeName)\r\n\t\t\t\t.removeClass(typeName);\r\n\t\t}\r\n\t} else {\r\n\t\t\r\n\t\tfor(var i in Tips.tipTypes) {\r\n\t\t\tvar typeName = Tips.tipTypes[i];\r\n\t\t\telRender('.' + typeName)\r\n\t\t\t\t.removeClass(typeName, 777);\r\n\t\t}\r\n\r\n\t}\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/drawTip.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport share    from 'share';\r\nimport common   from 'common';\r\nimport defaults from 'defaults';\r\n\r\nimport elRender from 'elRender';\r\n\r\nvar angleValidate = function(_angle) {\r\n\tif(_angle < 0)   { _angle = 360 + _angle; };\r\n\tif(_angle > 360) { _angle = _angle - 360; };\r\n\treturn _angle;\r\n};\r\n\r\nevent.listen('moveDragDeck', function(e) {\r\n\t\r\n\tconsole.log('moveDragDeck', e);\r\n\t\r\n\tcommon.curLock();\r\n\r\n\tfor(var i in e.moveDeck) {\r\n\r\n\t\tvar _position = e.destination.padding(e.destination.cards.length - 1 + (i|0));\r\n\r\n\t\tvar departureAngle   = angleValidate(e.departure  .rotate), \r\n\t\t\tdestinationAngle = angleValidate(e.destination.rotate);\r\n\r\n\t\telRender(e.moveDeck[i].card.domElement)\r\n\t\t\t.css({\r\n\t\t\t\t'transform' : 'rotate(' + departureAngle + 'deg)'\r\n\t\t\t})\r\n\t\t\r\n\t\tif(departureAngle - destinationAngle > 180) {\r\n\t\t\t\r\n\t\t\tdepartureAngle = departureAngle - 360;\r\n\t\t\telRender(e.moveDeck[i].card.domElement)\r\n\t\t\t\t.css({\r\n\t\t\t\t\t'transform' : 'rotate(' + departureAngle + 'deg)'\r\n\t\t\t\t})\r\n\t\t};\r\n\t\t\r\n\t\tif(departureAngle - destinationAngle < -180) {\r\n\t\t\tdestinationAngle = destinationAngle - 360;\r\n\t\t}\r\n\r\n\t\tvar _params = {\r\n\t\t\t'left'              : _position.x + 'px', \r\n\t\t\t'top'               : _position.y + 'px',\r\n\t\t\t'transform'         : 'rotate(' + destinationAngle + 'deg)'\r\n\t\t};\r\n\r\n\t\tvar _zIndex = (defaults.topZIndex | 0) + (i | 0);\r\n\t\t// console.log('_zIndex :', _zIndex);\r\n\t\telRender(e.moveDeck[i].card.domElement)\r\n\t\t\t.css({'z-index' : _zIndex})\r\n\t\t\t.animate(\r\n\t\t\t\t_params, \r\n\t\t\t\tfunction(e) {\r\n\r\n\t\t\t\t\te.departure  .Redraw();\r\n\t\t\t\t\te.destination.Redraw();\r\n\t\t\t\t    \r\n\t\t\t\t    common.curUnLock();\r\n\t\t\t\t    \r\n\t\t\t\t    if(typeof e.callback == \"function\") {\r\n\t\t\t\t    \te.callback();\r\n\t\t\t\t    };\r\n\r\n\t\t\t\t    event.dispatch('moveDragDeckDone', {\r\n\t\t\t\t    \tdeck : e.destination\r\n\t\t\t\t\t});\r\n\t\t\t\t}.bind(this, e));\r\n\t\t\r\n\t\t// elRender(e.moveDeck[i].card.domElement)\r\n\t\t\t// .animate(_params)\r\n\r\n\t}\r\n});\r\n\r\n// --------------------------------------------------------------------------------------------------------\r\n\r\nevent.listen('moveDragDeckDone', function(e) {\r\n\t\r\n\tif(!e.deck.fill) {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tvar _deck = e.deck.cards;\r\n\tfor(var i in _deck) {\r\n\t\telRender(_deck[i].domElement)\r\n\t\t\t.addClass('fill')\r\n\t}\r\n});\r\n\r\n// --------------------------------------------------------------------------------------------------------\r\n\r\nevent.listen('dragDeck', function(e) {\r\n\t// {x, y, _dragDeck, _startCursor, _deck}\r\n\t\r\n\tfor(var i in e._dragDeck) {\r\n    \tvar _position = e._deck.padding(e._dragDeck[i].index);\r\n    \tvar _params = {\r\n    \t\t'left'    : (_position.x + (e.x - e._startCursor.x)) + 'px',\r\n    \t\t'top'     : (_position.y + (e.y - e._startCursor.y)) + 'px',\r\n    \t\t// transform : 'rotate(0deg)',\r\n    \t\t'z-index' : defaults.topZIndex + (i|0)\r\n    \t}\r\n    \t// Operations with DOM\r\n        elRender(e._dragDeck[i].card.domElement)\r\n            .css(_params);   \r\n    }\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/moveDragDeck.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport common   from 'common';\r\nimport share    from 'share';\r\n\r\nimport elRender from 'elRender';\r\n\r\nevent.listen('moveCardToHome', function(e) {\r\n\r\n\t//  Move card home\r\n\t\r\n\tconsole.log('Move card home', e);\r\n\t\r\n\tcommon.curLock();\r\n    for(var i in e.moveDeck) {\r\n    \tvar _position = e.departure.padding(e.moveDeck[i].index);\r\n    \tvar _params = {\r\n    \t\tleft : _position.x + 'px',\r\n    \t\ttop  : _position.y + 'px'\r\n    \t}\r\n    \telRender(e.moveDeck[i].card.domElement)\r\n    \t\t.animate(\r\n    \t\t\t_params, \r\n    \t\t\tfunction() {\r\n\t\t\t\t    common.curUnLock();\r\n\t\t\t\t\tif(e.departure) {\r\n\t\t\t\t\t\te.departure.Redraw();\r\n\t\t\t\t\t}                    \r\n\t\t\t\t});\r\n    }\r\n    \r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/moveCardToHome.js\n **/","'use strict';\r\n\r\nimport event    from 'event';\r\nimport defaults from 'defaults';\r\n\r\nimport Field    from 'field';\r\nimport elRender from 'elRender';\r\n\r\nevent.listen('fieldThemesSet', (pref)=>{\r\n\t\r\n\tvar _field = Field();\r\n\t\r\n\tlet fieldDomElement = _field.domElement;\r\n\r\n\t// Clear old themes\r\n\tfor(var i in defaults.themes.face) {\r\n\t\tlet themeName = defaults.themes.face[i];\r\n\t\telRender(fieldDomElement).removeClass(themeName);\r\n\t}\r\n\tfor(var i in defaults.themes.back) {\r\n\t\tlet themeName = defaults.themes.back[i];\r\n\t\telRender(fieldDomElement).removeClass(themeName);\r\n\t}\r\n\tfor(var i in defaults.themes.empty) {\r\n\t\tlet themeName = defaults.themes.empty[i];\r\n\t\telRender(fieldDomElement).removeClass(themeName);\r\n\t}\r\n\t\r\n\t// Add new themes\r\n\tlet faceClassName = defaults.themes.face[pref.face];\r\n\telRender(fieldDomElement).addClass(faceClassName);\r\n\t\r\n\tlet backClassName = defaults.themes.back[pref.back];\r\n\telRender(fieldDomElement).addClass(backClassName);\r\n\t\r\n\tlet emptyClassName = defaults.themes.empty[pref.empty];\r\n\telRender(fieldDomElement).addClass(emptyClassName);\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./sources/dom/fieldThemesSet.js\n **/","'use strict';\r\n\r\nimport event         from 'event';\r\nimport common        from 'common';\r\n\r\nimport deckGenerator from 'deckGenerator';\r\nimport elRender      from 'elRender';\r\n\r\nimport renderTest from 'renderTest';\r\n\r\nlet _history = [],\r\n\t_redo    = [];\r\n\r\nlet debugHistoryMgr = new function() {\r\n\t\r\n\tthis.record = function(data) {\r\n\t\t_redo = [];\r\n\t\t_history.push(data);\r\n\t}\r\n\t\r\n\tthis.undo = function() {\r\n\t\t\r\n\t\tvar _step = _history.pop();\r\n\t\tif(_step) {\r\n\t\t\t_redo.push(_step);\r\n\t\t};\r\n\t\treturn _step;\r\n\t}\r\n\t\r\n\tthis.redo = function() {\r\n\t\t\r\n\t\tvar _step = _redo.pop();\r\n\t\tif(_step) {\r\n\t\t\t_history.push(_step);\r\n\t\t};\r\n\t\treturn _step;\r\n\t}\r\n};\r\n\r\n// add buttons\r\n\r\nlet _debugHistory = false;\r\nlet debugHistory = (a)=>{\r\n\t\r\n\tif(_debugHistory) {\r\n\t\treturn;\r\n\t}\r\n\t_debugHistory = true;\r\n\t\r\n\tevent.listen('makeStep', debugHistoryMgr.record);\r\n\t\r\n\tif(a && a.drawButtons) elRender(document.body)\r\n\t\t.append(\r\n\t\t\t\telRender(\"<div>\")\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<span>\")\r\n\t\t\t\t\t\t\t.addClass('awesome')\r\n\t\t\t\t\t\t\t.text('UNDO')\r\n\t\t\t\t\t\t\t.click(function() {\r\n\t\t\t\t\t\t\t\tvar _data = debugHistoryMgr.undo();\r\n\t\t\t\t\t\t\t\tif(_data) {\r\n\t\t\t\t\t\t\t\t\tSolitaireEngine.event.dispatch('undo', _data);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<span>\")\r\n\t\t\t\t\t\t\t.addClass('awesome')\r\n\t\t\t\t\t\t\t.text('REDO')\r\n\t\t\t\t\t\t\t.click(function() {\r\n\t\t\t\t\t\t\t\tvar _data = debugHistoryMgr.redo();\r\n\t\t\t\t\t\t\t\tif(_data) {\r\n\t\t\t\t\t\t\t\t\tSolitaireEngine.event.dispatch('redo', _data);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t.css({\r\n\t\t\t\t\t\tposition : 'fixed', \r\n\t\t\t\t\t\ttop      : '1px', \r\n\t\t\t\t\t\tleft     : '1px'\r\n\t\t\t\t\t})\r\n\t);\r\n\r\n};\r\n\r\nlet tests = ()=>{\r\n\trenderTest();\r\n}\r\n\r\nexport default {\r\n\tdeckGenerator,\r\n\tdebugHistory,\r\n\tdebugHistoryMgr,\r\n\tvalidateCardName : common.validateCardName,\r\n\telRender,\r\n\ttests\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./sources/debug.js\n **/","'use strict';\r\n\r\nimport defaults from 'defaults';\r\n\r\nvar shuffle = function(a) {\r\n    for(var j, x, i = a.length; i; j = Math.floor(Math.random() * i), x = a[--i], a[i] = a[j], a[j] = x) {};\r\n}\r\n\r\nexport default function(a) {\r\n\r\n\tvar default_type = 'all';\r\n\r\n\tvar default_shuffle = false;\r\n\tvar max_iterations = 10;\r\n\r\n\tvar type        = a && a.type       && typeof a.type       == 'string'                                  ? a.type       : default_type;\r\n\tvar _deckCount  = a && a.deckCount  && typeof a.deckCount  == 'number'                                  ? a.deckCount  : 52;\r\n\tvar _iterations = a && a.iterations && typeof a.iterations == 'number' && a.iterations < max_iterations ? a.iterations : 1;\r\n\tvar _shuffle    = a && a.shuffle    && typeof a.shuffle    != 'undefuned'                               ? a.shuffle    : default_shuffle;\r\n\r\n\tvar genType = function(_cardsColors, _cardsRanks) {\r\n\t\tvar _deck = [];\r\n\t\tfor(var c in _cardsColors) {\r\n\t\t\tfor(var r in _cardsRanks) {\r\n\t\t\t\t_deck.push(_cardsColors[c] + _cardsRanks[r]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _deck;\r\n\t}\r\n\t\r\n\tvar _ranks = _deckCount == 36 ? defaults.card.ranks36 : defaults.card.ranks;\r\n\tif(a && a.ranks) {\r\n\t\t_ranks = []\r\n\t\tfor(i in a.ranks) {\r\n\t\t\tif(defaults.card.rank.indexOf(a.ranks[i].toString()) >= 0) {\r\n\t\t\t\t_ranks.push(a.ranks[i].toString())\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar genTypes = {\r\n\t\tall    : function() {\r\n\t\t\treturn genType(defaults.card.suits, _ranks);\r\n\t\t},\r\n\t\tblack  : function() {\r\n\t\t\tvar _cardsSuits = defaults.card.colors.black;\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t},\r\n\t\tred    : function() {\r\n\t\t\tvar _cardsSuits = defaults.card.colors.red;\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t},\r\n\t\tblack_and_red  : function() {\r\n\t\t\tvar _cardsSuits = [\r\n\t\t\t\tdefaults.card.colors.red[(Math.random() * defaults.card.colors.red.length)|0], \r\n\t\t\t\tdefaults.card.colors.black[(Math.random() * defaults.card.colors.black.length)|0]\r\n\t\t\t];\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t},\r\n\t\th_only : function() {\r\n\t\t\tvar _cardsSuits = ['h'];\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t}, \r\n\t\td_only : function() {\r\n\t\t\tvar _cardsSuits = ['d'];\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t}, \r\n\t\tc_only : function() {\r\n\t\t\tvar _cardsSuits = ['c'];\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t},\r\n\t\ts_only : function() {\r\n\t\t\tvar _cardsSuits = ['s'];\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t},\r\n\t\tone_rank_only : function() {\r\n\t\t\tvar _cardsSuits = [defaults.card.solors[(Math.random() * defaults.card.solors.length)|0]];\r\n\t\t\treturn genType(_cardsSuits, _ranks);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tgenTypes.hearts   = genTypes.h_only;\r\n\tgenTypes.diamonds = genTypes.d_only;\r\n\tgenTypes.clubs    = genTypes.c_only;\r\n\tgenTypes.spades   = genTypes.s_only;\r\n\t\r\n\tvar _deck = [];\r\n\t\r\n\tfor(;_iterations > 0;_iterations -= 1) {\r\n\t\t_deck = _deck.concat(genTypes[type]());\r\n\t}\r\n\r\n\tif(_shuffle) {\r\n\t\tshuffle(_deck);\r\n\t}\r\n\r\n\treturn _deck;\r\n\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/deck/deckGenerator.js\n **/","'use strict';\r\n\r\nimport elRender from 'elRender';\r\n\r\nexport default ()=>{\r\n\r\n/*\tconsole.log(\"-- renderTests\");\r\n// --\r\n\tconsole.log(\"- startTest#1\");\r\n\tlet _el_1 = elRender(\"<div>\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#1-A\",\r\n\t\t_el_1\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#1-B\",\r\n\t// \t_el_1.elements[0].el.className\r\n\t// );\r\n// --\tconsole.log(\"-- renderTests\");\r\n// --\r\n\tconsole.log(\"- startTest#1\");\r\n\tlet _el_1 = elRender(\"<div>\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#1-A\",\r\n\t\t_el_1\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#1-B\",\r\n\t// \t_el_1.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#2\");\r\n\tlet _el_2 = elRender(\"#tbUndo\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#2-A\",\r\n\t\t_el_2\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#2-B\",\r\n\t// \t_el_2.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#3\");\r\n\tlet _el_3 = elRender(\".titleBandLink\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#3 '.titleBandLink'\",\r\n\t\t_el_3\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#3-B\",\r\n\t// \t_el_3.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#4\");\r\n\tlet _el_4 = document.querySelector(\".titleBandLink\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#4-A\",\r\n\t\telRender(_el_4)\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#4-B\",\r\n\t// \t_el_4.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#5\");\r\n\tlet _el_5 = document.querySelectorAll(\".titleBandLink\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#5 '.titleBandLink'\",\r\n\t\t_el_5\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#5-B\",\r\n\t// \t_el_5.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#6\");\r\n\tlet _el = elRender(\"#tbUndo\");\r\n\tlet _el_6 = elRender(_el);\r\n\tconsole.log(\r\n\t\t\"- renderTest#6-A\",\r\n\t\t_el_6\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#6-B\",\r\n\t// \t_el_6.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#7\");\r\n\tlet _elements = elRender(\".titleBandLink\");\r\n\tlet _el_7 = elRender(_elements);\r\n\tconsole.log(\r\n\t\t\"- renderTest#7-A\",\r\n\t\t_el_7\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#7-B\",\r\n\t// \t_el_7.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#8\");\r\n\tlet _element = elRender(\"#tbUndo\");\r\n\tlet _element2 = elRender(\"#tbRedo\");\r\n\tlet _el_8 = elRender(_element)\r\n\t\t.after(_element2);\r\n\tconsole.log(\r\n\t\t\"- renderTest#8-A\",\r\n\t\t_el_8\r\n\t);\r\n\tconsole.log(\"- startTest#2\");\r\n\tlet _el_2 = elRender(\"#tbUndo\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#2-A\",\r\n\t\t_el_2\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#2-B\",\r\n\t// \t_el_2.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#3\");\r\n\tlet _el_3 = elRender(\".titleBandLink\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#3 '.titleBandLink'\",\r\n\t\t_el_3\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#3-B\",\r\n\t// \t_el_3.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#4\");\r\n\tlet _el_4 = document.querySelector(\".titleBandLink\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#4-A\",\r\n\t\telRender(_el_4)\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#4-B\",\r\n\t// \t_el_4.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#5\");\r\n\tlet _el_5 = document.querySelectorAll(\".titleBandLink\");\r\n\tconsole.log(\r\n\t\t\"- renderTest#5 '.titleBandLink'\",\r\n\t\t_el_5\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#5-B\",\r\n\t// \t_el_5.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#6\");\r\n\tlet _el = elRender(\"#tbUndo\");\r\n\tlet _el_6 = elRender(_el);\r\n\tconsole.log(\r\n\t\t\"- renderTest#6-A\",\r\n\t\t_el_6\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#6-B\",\r\n\t// \t_el_6.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#7\");\r\n\tlet _elements = elRender(\".titleBandLink\");\r\n\tlet _el_7 = elRender(_elements);\r\n\tconsole.log(\r\n\t\t\"- renderTest#7-A\",\r\n\t\t_el_7\r\n\t);\r\n\t// console.log(\r\n\t// \t\"- renderTest#7-B\",\r\n\t// \t_el_7.elements[0].el.className\r\n\t// );\r\n// --\r\n\tconsole.log(\"- startTest#8\");\r\n\tlet _element = elRender(\"#tbUndo\");\r\n\tlet _element2 = elRender(\"#tbRedo\");\r\n\tlet _el_8 = elRender(_element)\r\n\t\t.after(_element2);\r\n\tconsole.log(\r\n\t\t\"- renderTest#8-A\",\r\n\t\t_el_8\r\n\t);*/\r\n}; \n\n\n/** WEBPACK FOOTER **\n ** ./sources/tests/renderTest.js\n **/"],"sourceRoot":""}