var SolitaireEngine=function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(1),r=(n(i),a(2)),d=n(r),o=a(3),s=n(o),u=a(4),l=(n(u),a(43)),f=(n(l),a(46)),c=(n(f),a(9)),p=n(c),h=a(5),m=n(h),v=a(44),g=n(v),y=a(54),k=n(y);a(57),a(58),a(59),t.event=d["default"],t.options=s["default"],t.winCheck=g["default"].hwinCheck;var _=!0;t.init=function(e){_&&(k["default"].tests(),m["default"].onInit(),_=!1);var a=(0,p["default"])(e);m["default"].afterInit(),t.Redraw=function(e){a.Redraw(e)}},k["default"]&&(t.debug=k["default"])},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};t["default"]=new function(){this.get=function(e){return"undefined"!=typeof a[e]?a[e]:null},this.set=function(e,t){if("string"==typeof e)a[e]=t;else if(e instanceof Object&&"undefined"==typeof t)for(var n in e)a[n]=e[n];else console.warn("Error share.set:",e,t)},this.getAll=function(){return a}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};t["default"]=new function(){this.listen=function(e,t){"string"==typeof e&&"function"==typeof t&&(a[e]?a[e].push(t):a[e]=[t])},this.dispatch=function(e,t){if(a[e])for(var n in a[e])a[e][n](t)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={card:{width:71,height:96,suits:["h","d","c","s"],colors:{red:["h","d"],black:["c","s"]},ranks:["1","2","3","4","5","6","7","8","9","10","j","q","k"],values:[1,2,3,4,5,6,7,8,9,10,11,12,13],ranks36:["1","6","7","8","9","10","j","q","k"]},zoom:1,can_move_flip:!1,showSlot:!0,autohide:!1,paddingType:"none",flip_type:"none",takeRules:["onlytop"],putName:"any",tipRule:"allToAll",padding_y:0,padding_x:0,flip_padding_y:0,flip_padding_x:0,move_distance:10,Tips:null,moveDistance:0,showTips:!0,showTipsDestination:!1,showTipPriority:!1,debugLabels:!1,debugLog:!1,themes:{face:["default_face","alternative_face"],back:["default_back","alternative_back","red_back","blue_back"],empty:["default_empty","alternative_empty"]},animation:!0,animationTime:300,startZIndex:100,topZIndex:900,canMoveFlip:!1,afterStep:!1,tipsParams:{hideOnEmpty:!1,excludeHomeGroups:!0},inputParams:{doubleClick:!1},pref:{face:0,back:0,empty:1}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(1),r=n(i),d=a(2),o=n(d),s=a(3),u=(n(s),a(5)),l=n(u),f=a(11),c=n(f),p=a(6),h=n(p);r["default"].set("dragDeck",null),r["default"].set("startCursor",null);var m=function(){var e=r["default"].get("dragDeck");if(e&&e[0]&&e[0].card&&e[0].card.parent){var t=c["default"].getDeckById(e[0].card.parent);t&&t.Redraw()}r["default"].set("dragDeck",null),r["default"].set("startCursor",null),l["default"].curUnLock()};o["default"].listen("undo",function(){m()}),o["default"].listen("redo",function(){m()});var v=function(e,t,a){if(r["default"].set("dragDeck",null),r["default"].set("startCursor",null),!l["default"].isCurLock()){if(e.className.split(" ").indexOf("slot")>=0){var n=e.id,i=l["default"].getElementById(n);i&&o["default"].dispatch("click",i)}if(e.className.split(" ").indexOf("draggable")>=0){var n=e.id,d=n?l["default"].getElementById(n):null,s=d&&d.parent?d.parent:null,i=s?c["default"].getDeckById(s):null;i&&o["default"].dispatch("click",i);var u=i?i.Take(n):null;r["default"].set("dragDeck",u),r["default"].get("dragDeck")&&(r["default"].set("startCursor",{x:t,y:a}),h["default"].tipsDestination({currentCard:d}))}}},g=function(e,t){var a=r["default"].get("startCursor"),n=r["default"].get("dragDeck");if(n&&a){var i=a?Math.sqrt(l["default"].sqr(e-a.x)+l["default"].sqr(t-a.y)):0,d=l["default"].getElementById(n[0].card.parent),s=d.padding(n[n.length-1].index);o["default"].dispatch("dragDeck",{x:e,y:t,_dragDeck:n,_startCursor:a,_deck:d});var u={distance:i,direction:{x:e-a.x,y:t-a.y,right:e>a.x,left:e<a.x,down:t>a.y,up:t<a.y},lastPosition:{x:e,y:t},deckPosition:{x:s.x+(e-a.x),y:s.y+(t-a.y)}};h["default"].tipsMove({moveDeck:n,cursorMove:u})}},y=function(e,t,a,n){var i=r["default"].get("startCursor"),d=r["default"].get("dragDeck");if(d&&i){var s=l["default"].getElementById(d[0].card.parent),u=s.padding(d[0].index),f={distance:Math.sqrt(l["default"].sqr(t-i.x)+l["default"].sqr(a-i.y)),dbclick:!!n,direction:{x:t-i.x,y:a-i.y,right:t>i.x,left:t<i.x,down:a>i.y,up:a<i.y},lastPosition:{x:t,y:a},deckPosition:{x:u.x+(t-i.x),y:u.y+(a-i.y)}};o["default"].dispatch("hideCard",e);var c=document.elementFromPoint(t,a);o["default"].dispatch("showCard",e),console.log(">>>>",n),o["default"].dispatch("Move",{moveDeck:d,to:c,cursorMove:f}),r["default"].set("dragDeck",null),r["default"].set("startCursor",null)}};document.onmousedown=function(e){0==e.button&&v(e.target,e.clientX,e.clientY)},document.onmousemove=function(e){g(e.clientX,e.clientY)},document.onmouseup=function(e){y(e.target,e.clientX,e.clientY)},document.ondblclick=function(e){v(e.target,e.clientX,e.clientY),y(e.target,e.clientX,e.clientY,!0),l["default"].curUnLock()},document.addEventListener("touchstart",function(e){v(e.target,e.touches[0].clientX,e.touches[0].clientY)},!1),document.addEventListener("touchmove",function(e){r["default"].startCursor&&e.preventDefault(),g(e.touches[0].clientX,e.touches[0].clientY)},!1),document.addEventListener("touchend",function(e){y(e.changedTouches[0].target,e.changedTouches[0].clientX,e.changedTouches[0].clientY)},!1)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),r=n(i),d=a(2),o=n(d),s=a(3),u=n(s),l=a(6),f=n(l),c=a(9),p=n(c),h=a(38),m=n(h),v=a(40),g=n(v),y=a(42),k=n(y),_=function(){(0,m["default"])(),(0,g["default"])()},x=function(){(0,k["default"])()},b=function(e){return e*e},w=!1,P=function(){return w},D=function(){w=!0};o["default"].listen("lock",D);var C=function(){D=!1};o["default"].listen("unlock",C);var M=function(){return r["default"].get("curLockState")},I=function(){r["default"].set("curLockState",!0)},O=function(){r["default"].set("curLockState",!1)},T=function(){return r["default"].get("elements")},E=function(e){var t=r["default"].get("elements");return t[e]},R=function(e,t){var a=[],n=r["default"].get("elements");for(var i in n)n[i].name&&"string"==typeof n[i].name&&n[i].name==e&&(t&&"string"==typeof n[i].type&&t&&n[i].type==t?a.push(n[i]):a.push(n[i]));return a},S=function(e,t){if("string"!=typeof e)return console.warn("Warning: validate name must have string type",e),!1;var a=e.slice(0,1),n=e.slice(1,3),i=null,r=u["default"].card.values[u["default"].card.ranks.indexOf(n)];for(var d in u["default"].card.colors)u["default"].card.colors[d].indexOf(a)>=0&&(i=d);return u["default"].card.suits.indexOf(a)>=0&&u["default"].card.ranks.indexOf(n)>=0?{suit:a,rank:n,color:i,value:r}:(console.warn("Warning: validate name:",e,"- incorrect"),!1)},N=0,j=function(){return N++};r["default"].set("animation",u["default"].animation);var Y=function(){r["default"].set("animation",!0)},X=function(){r["default"].set("animation",u["default"].animation)},A=function(){r["default"].set("animation",!1)};o["default"].listen("newGame",function(e){A()}),o["default"].listen("historyReapeater",function(e){if(e)r["default"].set("noRedraw",!0),r["default"].set("noTips",!0);else{r["default"].set("noRedraw",!1);var t=(0,p["default"])();t.Redraw(),r["default"].set("noTips",!1),f["default"].checkTips()}}),t["default"]={isLock:P,lock:D,unlock:C,isCurLock:M,curLock:I,curUnLock:O,getElements:T,getElementById:E,getElementsByName:R,validateCardName:S,genId:j,animationOn:Y,animationOff:A,animationDefault:X,onInit:_,afterInit:x,sqr:b}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=n(i),d=a(1),o=n(d),s=a(3),u=n(s),l=a(5),f=(n(l),a(7)),c=n(f),p=a(8),h=n(p),m=a(11),v=n(m),g=a(9),y=n(g),k=u["default"].showTips,_=["tip","tipTo","tipPriority","tipToHome"],x=[],b=function(){return x},w=function(){if(o["default"].get("noTips"))return!1;r["default"].dispatch("hideTips");var e=v["default"].getDecks({visible:!0}),t=o["default"].get("autoTips"),a=c["default"][t];if("function"==typeof a)x=a({decks:e});else for(d in o["default"].autoTips)"function"==typeof o["default"].autoTips[d]?x=x.concat(autoTips[d]({decks:e})):c["default"][d]&&(x=x.concat(c["default"][d]({decks:e,rules:o["default"].autoTips[d]})));if(k){var n=(0,y["default"])(),i=n.homeGroups;for(var d in x)0==x[d].to.count&&n.tipsParams.hideOnEmpty||n.tipsParams.excludeHomeGroups&&i&&i.length&&i.indexOf(x[d].from.deck.parent)>=0||r["default"].dispatch("showTip",{el:x[d].from.card,type:"tip"}),i.indexOf(x[d].to.deck.parent)>=0&&r["default"].dispatch("showTip",{el:x[d].from.card,type:"tipToHome"})}};r["default"].listen("makeStep",w);var P=function(e){k=!0,e&&e.init||w()};r["default"].listen("tipsON",P);var D=function(e){k=!1,e&&e.init||w()};r["default"].listen("tipsOFF",D);var C=function(e){if(o["default"].showTipPriority&&(r["default"].dispatch("hideTips",{types:["tipPriority"]}),o["default"].showTipPriority&&e&&e.moveDeck&&e.cursorMove&&e.cursorMove.distance&&e.cursorMove.distance>=o["default"].moveDistance)){var t=(0,h["default"])(e.moveDeck,e.cursorMove);t&&r["default"].dispatch("showTip",{el:t.to.deck,type:"tipPriority"})}},M=function(e){if(o["default"].get("showTipsDestination")&&(r["default"].dispatch("hideTips"),e&&e.currentCard&&e.currentCard.id))for(var t in x)x[t].from.card.id==e.currentCard.id&&r["default"].dispatch("showTip",{el:x[t].to.deck,type:"tipTo"})};t["default"]={tipTypes:_,getTips:b,checkTips:w,showTips:P,hideTips:D,tipsMove:C,tipsDestination:M}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={allToAll:function(e){var t=[],a=function(a,n,i,r){var d=e.decks[a].cards,o=d.length?d[d.length-1]:null;t.push({from:{deck:e.decks[n],card:r[i],count:r.length},to:{deck:e.decks[a],lastCard:o,count:d.length}})},n=function(t,n,i,r){for(var d in e.decks)if(i!=d){var o=e.decks[d].Put(n);o&&a(d,i,r,t)}},i=function(t){for(var a in t){var i=t[a].id,d=e.decks[r].Take(i);d&&n(t,d,r,a)}};for(var r in e.decks){var d=e.decks[r].cards;i(d)}return t}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var a=[],n=l["default"].getTips();for(p in n)n[p].from.card.id==e[0].card.id&&a.push(n[p]);if(0==a.length)return!1;var i=-1,r=0,o=0,u=(0,c["default"])(),f=u.homeGroups;if(f){var n=[];for(var p in f)for(var h in a)a[h].to.deck.parent==f[p]&&n.push(a[h]);n.length&&(a=n)}if(a.length>=2){for(var p in a){var m={x:t.deckPosition.x+d["default"].card.width,y:t.deckPosition.y+d["default"].card.height},v=a[p].to.deck.padding(a[p].to.deck.cards.length),g={x:v.x+d["default"].card.width,y:v.y+d["default"].card.height};a[p].distance=Math.sqrt(s["default"].sqr(m.x-g.x)+s["default"].sqr(m.y-g.y)),a[p].inDirection=!1,(t.direction.x>0&&g.x>m.x||t.direction.x<0&&g.x<m.x)&&(a[p].inDirection=!0,o+=1)}for(var p in a)"-1"==i&&(0==o?i=a[p].distance:a[p].inDirection&&(i=a[p].distance,r=p)),a[p].distance<i&&(0==o?(i=a[p].distance,r=p):a[p].inDirection&&(i=a[p].distance,r=p))}return a[r]};var i=a(1),r=(n(i),a(3)),d=n(r),o=a(5),s=n(o),u=a(6),l=n(u),f=a(9),c=n(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),r=n(i),d=a(2),o=n(d),s=a(3),u=n(s),l=a(5),f=n(l),c=a(10),p=n(c),h=a(11),m=n(h),v=a(6),g=n(v),y=a(7),k=n(y),_=null,x=function(e){if(!e)return!1;f["default"].unlock(),e&&_?_.clear():r["default"].set("elements",{});var t=null;try{t=Object.assign?Object.assign({},e):JSON.parse(JSON.stringify(e))}catch(a){t=e,console.warn("Field input params is not JSON, maybe the rules are wrong.")}this.homeGroups=t.homeGroups?t.homeGroups:[],r["default"].set("debugLog",t.debugLog&&"boolean"==typeof t.debugLog?t.debugLog:u["default"].debugLog),"boolean"==typeof t.showTips&&t.showTips?g["default"].showTips({init:!0}):g["default"].hideTips({init:!0}),r["default"].set("showTipsDestination","boolean"==typeof t.showTipsDestination?t.showTipsDestination:u["default"].showTipsDestination),r["default"].set("showTipPriority","boolean"==typeof t.showTipPriority?t.showTipPriority:u["default"].showTipPriority);var n=t.autoTips&&"string"==typeof t.autoTips&&k["default"][t.autoTips]?t.autoTips:u["default"].tipRule;r["default"].set("autoTips",n),r["default"].set("moveDistance",t.moveDistance&&"number"==typeof t.moveDistance?t.moveDistance:u["default"].moveDistance),r["default"].set("winCheck",t.winCheck),t.winCheck&&t.winCheck.callback&&"function"==typeof t.winCheck.callback&&(winCheckCallback=t.winCheck.callback),t.saveStep&&"function"==typeof t.saveStep&&(saveStepCallback=t.saveStep),r["default"].set("zoom",t.zoom&&"number"==typeof t.zoom?t.zoom:u["default"].zoom),this.tipsParams={};for(var i in u["default"].tipsParams)this.tipsParams[i]=t.tipsParams&&"undefined"!=typeof t.tipsParams[i]?t.tipsParams[i]:u["default"].tipsParams[i];this.inputParams={};for(var d in u["default"].inputParams)this.inputParams[d]=t.inputParams&&"undefined"!=typeof t.inputParams[d]?t.inputParams[d]:u["default"].inputParams[d];var s=t.can_move_flip&&"boolean"==typeof t.can_move_flip?t.can_move_flip:u["default"].canMoveFlip;r["default"].set("can_move_flip",s),r["default"].set("debugLabels",t.debugLabels&&"boolean"==typeof t.debugLabels?t.debugLabels:u["default"].debugLabels),this.Draw=function(e){if(r["default"].set("noRedraw",!0),e&&(t=Object.assign?Object.assign({},e):JSON.parse(JSON.stringify(e))),t){if(t.groups)for(var a in t.groups)t.groups[a].name=a,p["default"].addGroup(t.groups[a]);if(t.decks)for(var n in t.decks)m["default"].addDeck(t.decks[n]);if(t.fill)for(var i=m["default"].getDecks(),d=Object.assign?Object.assign([],t.fill):JSON.parse(JSON.stringify(t.fill));d.length;)for(var s in i)if(d.length){var u=d.shift();i[s].Fill([u])}r["default"].set("noRedraw",!1),this.Redraw(),g["default"].checkTips(),o["default"].dispatch("newGame"),f["default"].unlock()}},t.startZIndex&&"number"==typeof t.startZIndex&&r["default"].set("start_z_index",t.startZIndex)};x.prototype.clear=function(){var e=r["default"].get("elements");for(var t in e)"deck"==e[t].type?(e[t].clear(),e[t]=null):"group"==e[t].type&&(e[t]=null);r["default"].set("elements",{})},x.prototype.Redraw=function(e){var t=null;if(e){try{t=Object.assign?Object.assign({},e):JSON.parse(JSON.stringify(e))}catch(a){t=e,console.warn("Field.Redraw input params is not JSON, can't clone")}for(var n in t.groups){var i=p["default"].Group(n);i&&i.Redraw(t.groups[n])}for(var r in t.decks){var d=m["default"].Deck(t.decks[r].name);d&&d.Redraw(t.decks[r])}}else{var o=m["default"].getDecks();for(var r in o)o[r].Redraw()}};var b=function(e){return e&&_&&(_.clear(),_.Draw(e)),e&&!_&&(_=new x(e),o["default"].dispatch("initField",{a:e}),_.Draw()),_};t["default"]=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=(n(i),a(1)),d=n(r),o=a(3),s=n(o),u=a(5),l=n(u),f=a(11),c=n(f),p=a(33),h=n(p),m=a(34),v=n(m),g=a(35),y=n(g),k=function(e,t){this.type="group";var a=t;this.getId=function(){return a},this.name=e.name&&"string"==typeof e.name?e.name:"name_"+a,this.position={x:e.position&&e.position.x&&"number"==typeof e.position.x?e.position.x:0,y:e.position&&e.position.y&&"number"==typeof e.position.y?e.position.y:0},this.placement=e.placement?{x:e.placement.x?e.placement.x:0,y:e.placement.y?e.placement.y:0}:null,this.decks={},this.parameters={paddingType:e.paddingType?e.paddingType:s["default"].paddingType,flip:e.flip?e.flip:null,showSlot:e.showSlot?e.showSlot:s["default"].showSlot,takeRules:e.takeRules?e.takeRules:s["default"].takeRules,putRules:e.putRules?e.putRules:s["default"].putRules,fillRule:e.fillRule?e.fillRule:s["default"].fillRule,autoHide:e.autoHide?e.autoHide:s["default"].autoHide,paddingX:e.paddingX?e.paddingX:s["default"].paddingX,paddingY:e.paddingY?e.paddingY:s["default"].paddingY,flipPaddingX:e.flipPaddingX?e.flipPaddingX:s["default"].flipPaddingX,flipPaddingY:e.flipPaddingY?e.flipPaddingY:s["default"].flipPaddingY,actions:e.actions?e.actions:null,afterStep:"boolean"==typeof e.afterStep?e.afterStep:s["default"].afterStep},this.deckIndex=[]};k.prototype.addDeck=function(e){if(e){e.position||(e.position={x:0,y:0}),e.parent||(e.parent=this.name),e.parentPosition={x:this.position.x,y:this.position.y};var t=0;if(e.groupIndex&&"number"==typeof e.groupIndex&&this.deckIndex[e.groupIndex-1]&&decks[this.deckIndex[e.groupIndex-1]]["this"].deckIndex==e["this"].deckIndex&&(console.warn("Warning: duplicate groupIndex",e.groupIndex,"changed to null"),e.groupIndex=null),e.groupIndex&&"number"==typeof e.groupIndex)if(this.deckIndex[e.groupIndex-1]){for(;"undefined"!=typeof this.deckIndex[t];t+=1);if(placement){var t=this.deckIndex[e.groupIndex-1],a=d["default"].get("elements");placement.x&&a[t].x(this.position.x+(placement.x+s["default"].card.width)*t),placement.y&&a[t].y(this.position.y+(placement.y+s["default"].card.width)*t),d["default"].set("elements",a)}this.deckIndex[t]=this.deckIndex[e.groupIndex-1],this.deckIndex[e.groupIndex-1]=!0,t=e.groupIndex-1}else this.deckIndex[e.groupIndex-1]=!0,t=e.groupIndex-1;else{for(;"undefined"!=typeof this.deckIndex[t];t+=1);this.deckIndex[t]=!0}this.placement&&(this.placement.x&&(e.position.x=(this.placement.x+s["default"].card.width)*t),this.placement.y&&(e.position.y=(this.placement.y+s["default"].card.height)*t)),this.parameters.paddingType&&"undefined"==typeof e.paddingType&&(e.paddingType=this.parameters.paddingType),this.parameters.flip&&"undefined"==typeof e.flip&&(e.flip=this.parameters.flip),this.parameters.showSlot&&"undefined"==typeof e.showSlot&&(e.showSlot=this.parameters.showSlot),this.parameters.takeRules&&"undefined"==typeof e.takeRules&&(e.takeRules=this.parameters.takeRules),this.parameters.putRules&&"undefined"==typeof e.putRules&&(e.putRules=this.parameters.putRules),this.parameters.fillRule&&"undefined"==typeof e.fillRule&&(e.fillRule=this.parameters.fillRule),this.parameters.autoHide&&"undefined"==typeof e.autoHide&&(e.autoHide=this.parameters.autoHide),this.parameters.paddingX&&"undefined"==typeof e.paddingX&&(e.paddingX=this.parameters.paddingX),this.parameters.paddingY&&"undefined"==typeof e.paddingY&&(e.paddingY=this.parameters.paddingY),this.parameters.flipPaddingX&&"undefined"==typeof e.flipPaddingX&&(e.flipPaddingX=this.parameters.flipPaddingX),this.parameters.flipPaddingY&&"undefined"==typeof e.flipPaddingY&&(e.flipPaddingY=this.parameters.flipPaddingY),this.parameters.actions&&"undefined"==typeof e.actions&&(e.actions=this.parameters.actions),"undefined"==typeof e.afterStep&&(e.afterStep=this.parameters.afterStep);var n=c["default"].addDeck(e);this.deckIndex[t]=n.getId(),this.decks[n.getId()]=n}},k.prototype.Fill=function(e){h["default"].call(this,e)},k.prototype.getDeckById=function(e){return this.decks[e]},k.prototype.getDecksByName=function(e){var t={};for(var a in this.decks)this.decks[a].name==e&&(t[a]=decks[a]);return t},k.prototype.getDecks=function(e){var t=[];for(var a in this.decks)e&&e.visible?this.decks[a].visible&&t.push(this.decks[a]):t.push(this.decks[a]);return t},k.prototype.Redraw=function(e){v["default"].call(this,e)};var _=function(e){if(!e)return!1;var t="group_"+l["default"].genId(),a=new k(e,t);if(e.decks){if("number"==typeof e.decks&&(e.decks={generator:{type:"count",count:e.decks}}),e.decks.generator){if(!e.decks.generator.type)return void console.warn("Deck generator type is null.");if(!y["default"][e.decks.generator.type])return void console.warn('Deck generator type "'+e.decks.generator.type+'" not found.');e.decks=y["default"][e.decks.generator.type].call(a,e.decks.generator),e.placement=null}console.log("BEFORE ADD RELATIONS",e.decks,e.decks.length);for(var n in e.decks)a.addDeck(e.decks[n])}if(e.decksRelations)for(var i in e.decksRelations)console.log("Relation",e.decksRelations[i]);var r=d["default"].get("elements");if(r[t]=a,d["default"].set("elements",r),e&&e.fill){var o=e.fill.length;o&&a.Fill(e.fill)}return a},x=function(e){return l["default"].getElementsByName(e,"group")[0]};t["default"]={addGroup:_,Group:x}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=n(i),d=a(1),o=n(d),s=a(3),u=n(s),l=a(5),f=n(l),c=a(12),p=n(c),h=a(13),m=n(h),v=a(14),g=(n(v),a(15)),y=n(g),k=a(16),_=n(k),x=a(17),b=n(x),w=a(26),P=n(w),D=a(27),C=n(D),M=a(28),I=n(M),O=a(10),T=n(O),E=a(24),R=n(E),S=a(29),N=n(S),j=a(30),Y=n(j),X=a(31),A=n(X),L=a(32),B=n(L),F=function(e,t){if(!e)return!1;this.cards=[],this.getTopCard=function(){return 0==this.cards.length?!1:this.cards[this.cards.length-1]},this.type="deck",this.fill=!1;var a=t;this.getId=function(){return a},this.locked=!!e.locked;var n=T["default"].Group(e.parent),i=n?n.name:"xname",d=n?n.getDecks().length:a;this.name=e.name&&"string"==typeof e.name?e.name:i+"_"+d,this.visible=e.visible&&"boolean"==typeof e.visible?e.visible:!0,this.groupIndex=e.groupIndex&&"number"==typeof e.groupIndex?e.groupIndex:null,this.parent=e.parent&&"string"==typeof e.parent?e.parent:"field",this.autoHide=e.autoHide&&"boolean"==typeof e.autoHide?e.autoHide:u["default"].autohide,"undefined"==typeof e.showSlot&&(e.showSlot=u["default"].showSlot);var o={};o.x=0,o.y=0,o.rotate=this.rotate=0,o.padding_y=e.paddingY&&"number"==typeof e.paddingY?e.paddingY:u["default"].padding_y,o.flip_padding_y=e.flipPaddingY&&"number"==typeof e.flipPaddingY?e.flipPaddingY:u["default"].flip_padding_y,o.padding_x=e.paddingX&&"number"==typeof e.paddingX?e.paddingX:u["default"].padding_x,o.flip_padding_x=e.flipPaddingX&&"number"==typeof e.flipPaddingX?e.flipPaddingX:u["default"].flip_padding_x,o.startZIndex=e.startZIndex&&"number"==typeof e.startZIndex?e.startZIndex:u["default"].startZIndex;var s=e.flip&&"string"==typeof e.flip?e.flip:u["default"].flip_type,l=p["default"][s];this.flipCheck=function(){for(var e in this.cards)l(this.cards[e],0|e,this.cards.length);r["default"].dispatch("redrawDeckFlip",this)},this.putRules=e.putRules?"function"==typeof e.putRules?e.putRules:"string"==typeof e.putRules?m["default"][e.putRules]?m["default"][e.putRules]:m["default"][u["default"].putName]:e.putRules.constructor==Array?e.putRules:m["default"][u["default"].putName]:m["default"][u["default"].putName],this.takeRules=e.takeRules;var f=e.fillRule&&"string"==typeof e.fillRule&&"function"==typeof y["default"][e.fillRule]?y["default"][e.fillRule]:y["default"].not,c=e.paddingX||e.paddingY?_["default"].special:e.paddingType?"string"==typeof e.paddingType&&_["default"][e.paddingType]?_["default"][e.paddingType]:_["default"].none:_["default"][u["default"].paddingType];this.padding=function(e){var t=c(o,this.cards[e],e,this.cards.length,this.cards);return t},this.actions=[],e.actions&&(this.actions=e.actions,b["default"].addActions.call(this)),this.afterStep=e.afterStep,this.relations=[],r["default"].dispatch("addDeckEl",{a:e,deck:this,params:o}),r["default"].listen("moveDragDeck",function(e){if(e.destination.name==this.deck.name){var t=e.destination;t&&!this.fill&&this.callback({deck:t})&&(this.deck.fill=!0,R["default"].add({fill:{deck:this.deck.name}}))}}.bind({deck:this,callback:f})),this.Redraw=function(e){r["default"].dispatch("redrawDeck",{deck:this,data:e,params:o,cards:this.cards})}};F.prototype.Fill=function(e){for(var t in e)this.genCardByName(e[t])},F.prototype.clear=function(){for(var e in this.cards)r["default"].dispatch("removeEl",this.cards[e]),this.cards[e]=null;this.cards=[],r["default"].dispatch("removeEl",this)},F.prototype.Push=function(e){for(var t in e)e[t].parent=this.getId(),this.cards.push(e[t])},F.prototype.Pop=function(e,t){if(this.cards.length<e)return!1;for(var a=[];e;e-=1){var n=this.cards.pop();t&&(n.parent=null),a.push(n),a[a.length-1].parent=null}return a.reverse(),this.autoHide&&0==this.cards.length&&this.hide(),this.Redraw(),a},F.prototype.Take=function(e){return P["default"].call(this,e)},F.prototype.Put=function(e){return C["default"].call(this,e)},F.prototype.genCardByName=function(e){return I["default"].call(this,e)},F.prototype.hide=function(){this.visible=!1,R["default"].add({hideDeck:this.name}),this.Redraw()},F.prototype.show=function(){this.visible=!1,R["default"].add({showDeck:this.name}),this.Redraw()},F.prototype.getCardsByName=function(e){var t=[];for(var a in this.cards)this.cards[a].name==e&&t.push(this.cards[a]);return t},F.prototype.Card=function(e){return this.getCardsByName(e)[0]},F.prototype.hideCards=function(){for(var e in this.cards)this.cards[e].visible=!1,r["default"].dispatch("hideCard",this.cards[e])},F.prototype.showCards=function(){for(var e in this.cards)this.cards[e].visible=!0,r["default"].dispatch("showCard",this.cards[e])},F.prototype.getCardsNames=function(){var e=[];for(var t in this.cards)e.push(this.cards[t].name);return e};var H=function(e){if(!e)return!1;var t="deck_"+f["default"].genId(),a=Object.assign?Object.assign({},e):JSON.parse(JSON.stringify(e)),n=new F(a,t);if(e.fill)for(var i in e.fill)"string"==typeof e.fill[i]&&n.genCardByName(e.fill[i]);var r=o["default"].get("elements");return r[t]=n,o["default"].set("elements",r),n};t["default"]={addDeck:H,Deck:B["default"],getDecks:N["default"],getDeckById:Y["default"],deckCardNames:A["default"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={none:function(e,t,a){e.flip=!1},all:function(e,t,a){e.flip=!0},notlast:function(e,t,a){e.flip=a-1>t},first_1:function(e,t,a){e.flip=1>t},first_2:function(e,t,a){e.flip=2>t},first_3:function(e,t,a){e.flip=3>t}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),d=a(3),o=n(d),s={_downupcards:function(e){if(0==e.cards.length)return!1;var t=r["default"].validateCardName(e.cards[e.cards.length-1].name),a=r["default"].validateCardName(e.putDeck[0].card.name);return t&&a?{up:a,down:t}:!1},_downupranknum:function(e){var t=s._downupcards(e);return t?{down:o["default"].card.ranks.indexOf(t.down.rank),up:o["default"].card.ranks.indexOf(t.up.rank)}:!1},_isFirst:function(e,t){if(0==e.cards.length){var a=null;return(a=r["default"].validateCardName(e.putDeck[0].card.name))&&a.rank==t}return!0},striped:function(e){if(0==e.cards.length)return!0;var t=r["default"].validateCardName(e.cards[e.cards.length-1].name).color,a=null,n=null;return(n=r["default"].validateCardName(e.putDeck[0].card.name))&&(a=n.color),t!=a},firstAce:function(e){return s._isFirst(e,"1")},firstKing:function(e){return s._isFirst(e,"k")},notForEmpty:function(e){return e.cards.length},oneRank:function(e){if(0==e.cards.length)return!0;var t=s._downupcards(e);return t&&t.up.rank==t.down.rank},oneSuit:function(e){if(0==e.cards.length)return!0;var t=s._downupcards(e);return t&&t.up.suit==t.down.suit},any:function(e){return!0},not:function(e){return!1},ascendDeck:function(e){if(1==e.putDeck.length)return!0;var t=!0;for(var a in e.putDeck)if(a>0){var n=o["default"].card.ranks.indexOf(r["default"].validateCardName(e.putDeck[a-1].card.name).rank),i=o["default"].card.ranks.indexOf(r["default"].validateCardName(e.putDeck[a].card.name).rank);t=t&&1+n==i}return t},descendDeck:function(e){if(1==e.putDeck.length)return!0;var t=!0;for(var a in e.putDeck)if(a>0){var n=o["default"].card.ranks.indexOf(r["default"].validateCardName(e.putDeck[a-1].card.name).rank),i=o["default"].card.ranks.indexOf(r["default"].validateCardName(e.putDeck[a].card.name).rank);t=t&&n==1+i}return t},oneRankDeck:function(e){if(1==e.putDeck.length)return!0;var t=!0;for(var a in e.putDeck)if(a>0){var n=r["default"].validateCardName(e.putDeck[a-1].card.name).suit,i=r["default"].validateCardName(e.putDeck[a].card.name).suit;t=t&&n==i}return t},ascend:function(e){if(0==e.cards.length)return!0;var t=s._downupranknum(e);return t&&t.down<t.up},descent:function(e){if(0==e.cards.length)return!0;var t=s._downupranknum(e);return t&&t.down>t.up},descentOne:function(e){if(0==e.cards.length)return!0;var t=s._downupranknum(e);return t&&t.down==1+t.up},ascendOne:function(e){if(0==e.cards.length)return!0;var t=s._downupranknum(e);return t&&1+t.down==t.up},ascdescOne:function(e){if(0==e.cards.length)return!0;var t=s._downupranknum(e);return t&&1==Math.abs(t.down-t.up)},summ14:function(e){if(0==e.cards.length)return!0;var t=s._downupcards(e);return t.down.value+t.up.value==14}};t["default"]=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={not:function(e){return!1},notFirst:function(e){return e.cardIndex>0},any:function(e){return!0},onlytop:function(e){return e.cardIndex==e.deckLength-1},ask:function(e){return console.log(e),!0},desc:function(e){return console.log(e),!0}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(3),r=n(i);t["default"]={deckLength:function(e){return r["default"].card.ranks.length<=e.deck.cards.length},not:function(){return!1}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={none:function(e,t,a,n,i){return{x:e.x,y:e.y}},last_three_min:function(e,t,a,n,i){return a>n-3?n>3?{x:e.x-2*(n-3-a),y:e.y-(n-3-a)}:{x:e.x+2*a,y:e.y+(0|a)}:{x:x,y:y}},twindeck_typeA:function(e,t,a,n,i){var r=24,d=3,o={x:2,y:1},s=n/r*d|0;s>=d&&(s=d-1);var u=a-(n-s-1);return 0>u&&(u=0),{x:e.x+o.x*u,y:e.y+o.y*u}},radial:function(e,t,a,n,i){var r=1,d=a*r,o=e.rotate,s=Math.PI/180,u=Math.sin(o*s)*d,l=Math.cos(o*s)*d;return{x:e.x+u,y:e.y-l}},special:function(e,t,a,n,i){for(var r=e.y,d=e.x,o=0;a>o;o+=1)r+=i[o]&&i[o].flip?e.flip_padding_y:e.padding_y,d+=i[o]&&i[o].flip?e.flip_padding_x:e.padding_x;return{x:d,y:r}},vertical:function(e,t,a,n,i){for(var r=e.y,d=0;a>d;d+=1)r+=i[d]&&i[d].flip?e.flip_padding_y:e.padding_y;var o={x:e.x,y:r};return o},horizontal:function(e,t,a,n,i){for(var r=e.x,d=0;a>d;d+=1)r+=i[d]&&i[d].flip?e.flip_padding_x:e.padding_x;var o={x:r,y:e.y};return o}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=n(i),d=a(1),o=(n(d),a(3)),s=(n(o),a(5)),u=n(s),l=a(18),f=n(l),c=a(19),p=n(c),h=a(25),m=n(h),v={twindeck:f["default"],dealerdeck:p["default"],kick:m["default"],avalanche:function(e){}},g=[],y=[],k=function(e){r["default"].listen(e,function(t){for(var a in g)if(g[a].event==e){var n=g[a].action,i="click"==e?t.name==g[a].deck.name:!0;i&&v[n].call(g[a].deck,{actionData:g[a].deck.actions[n],eventData:t,eventName:e})}})},_=function(){for(var e in this.actions)this.actions[e].event||(this.actions[e].event="click"),v[e]?(g.push({deck:this,event:this.actions[e].event,action:e}),y.indexOf(this.actions[e].event)<0&&(y.push(this.actions[e].event),k(this.actions[e].event))):console.warn("Action",e,"for",this.name,"not found.");x(this.actions)},x=function(e){u["default"].animationDefault();for(var t in e.actions)e.actions[t].autorun&&v[t]&&v[t].call(e,{actionData:e.actions[t],eventData:null,eventName:e.actions[t].event})};t["default"]={addActions:_}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){console.log("TWINDECK",e)}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){if(0!=this.cards.length){var t=[];if(e.actionData.toGroup&&!e.actionData.to&&(e.actionData.to=e.actionData.toGroup),e.actionData.to)if("string"==typeof e.actionData.to){var a=u["default"].getElementsByName(e.actionData.to);for(var n in a){if("group"==a[n].type)for(var i in a[n].decks)t.push(a[n].decks[i]);"deck"==a[n].type&&t.push(_el)}}else for(var n in e.actionData.to){var a=u["default"].getElementsByName(e.actionData.to[n]);
for(var d in a){if("group"==a[d].type)for(var i in a[d].decks)t.push(a[d].decks[i]);"deck"==a[d].type&&t.push(a[d])}}u["default"].animationDefault();var o=!1;for(var s in t){var l=this.getTopCard();0==t[s].cards.length&&e.actionData.onlyEmpty;var c=e.actionData.onlyEmpty?0==t[s].cards.length:!0;if(c&&l){o=!0;var h=l.name;(0,f["default"])({from:this.name,to:t[s].name,deck:[h],flip:!0},!0),t[s].flipCheck(),p["default"].add({move:{from:this.name,to:t[s].name,deck:[h],flip:!0}})}}o&&r["default"].dispatch("makeStep",p["default"].get())}};var i=a(2),r=n(i),d=a(1),o=(n(d),a(3)),s=(n(o),a(5)),u=n(s),l=a(20),f=n(l),c=a(24),p=n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=o["default"].get("animation");if(e.from&&e.to&&e.deck&&e.deck.length){var a="string"==typeof e.from?l["default"].Deck(e.from):e.from,n="string"==typeof e.to?l["default"].Deck(e.to):e.to;if(a&&n&&"deck"==a.type&&"deck"==n.type){var i=!0,d=a.cards;for(var s in d)if(s>=d.length-e.deck.length){var u=s-(0|d.length)+(0|e.deck.length);e.deck[u]&&d[s].name!=e.deck[u]&&(i=!1)}if(i){var f=a.Pop(e.deck.length);if(e.flip)for(var s in f)f[s].flip=!f[s].flip;if(n.Push(f),t){var c=[];for(var s in f)c.push({card:f[s]});r["default"].dispatch("moveDragDeck",{departure:a,destination:n,moveDeck:c})}else a.Redraw(),n.Redraw()}else console.log("forceMove:Ход невозможен",e)}}};var i=a(2),r=n(i),d=a(1),o=n(d),s=a(5),u=(n(s),a(11)),l=n(u),f=a(6),c=(n(f),a(21));n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(3),r=(n(i),a(1)),d=n(r),o=a(22),s=n(o),u=a(23),l=n(u);d["default"].set("animatedElements",0),d["default"].set("animatedElementsStack",[]),d["default"].set("animatedCallback",function(){});var f=function(e){if(!e)throw new Error("elRender:empty arguments");if("string"!=typeof e)return e.el||e.elements?e:new s["default"](e);if("#"==e[0]){var t=document.getElementById(e.slice(1,1/0));return new s["default"](t)}if("."==e[0]){var a=document.getElementsByClassName(e.slice(1,1/0));return new l["default"](a)}if("<"==e[0]){var n=document.createElement("temp");n.innerHTML=e;var t=n.children[0];return new s["default"](t)}};f.stopAnimations=function(e){f(".animated").css({transition:"0s"}).removeClass("animated")},t["default"]=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(1),o=(n(d),a(3)),s=n(o),u=function(){function e(t){i(this,e),this.el=t,t||(this.el=null)}return r(e,[{key:"attr",value:function(e){try{for(var t in e)this.el[t]=e[t];return this}catch(a){}}},{key:"hasClass",value:function(e){try{var t=this.el.className.split(" ");return t.indexOf(e)>=0}catch(a){}}},{key:"toggleClass",value:function(e){try{this.hasClass(e)?this.removeClass(e):this.addClass(e)}catch(t){}}},{key:"addClass",value:function(e){try{var t=this.el.className.split(" ");return this.hasClass(e)||(t.push(e),this.el.className=t.join(" ")),this}catch(a){}}},{key:"removeClass",value:function(e){try{var t=this.el.className.split(" ");if(this.hasClass(e)){var a=[];for(var n in t)t[n]!=e&&a.push(t[n]);t=a,this.el.className=t.join(" ")}return this}catch(i){}}},{key:"css",value:function(e){try{for(var t in e)try{this.el.style[t]=e[t]}catch(a){}return this}catch(a){}}},{key:"hide",value:function(){try{return this.css({display:"none"})}catch(e){}}},{key:"show",value:function(){try{return this.css({display:"block"})}catch(e){}}},{key:"append",value:function(e){try{return e.el&&(e=e.el),this.el.appendChild(e),this}catch(t){}}},{key:"html",value:function(e){try{return"undefined"==typeof e?this.el.innerHTML:(e.el&&(e=e.el),this.el.innerHTML=e,this)}catch(t){}}},{key:"animate",value:function(e){var t=this,a=arguments.length<=1||void 0===arguments[1]?s["default"].animationTime:arguments[1],n=arguments[2];"function"==typeof a&&(n=a,a=s["default"].animationTime),setTimeout(function(){t.css({transition:a/1e3+"s"});var i=0;for(var r in e)t.el.style[r]!=e[r]&&(i+=1),t.el.style[r]=e[r];t.addClass("animated"),t.el.addEventListener("transitionend",function(){i-=1,i||(t.removeClass("animated"),t.css({transition:null}),n())},!1)},0)}},{key:"remove",value:function(){try{this.el.remove()}catch(e){}}},{key:"parent",value:function(){return new e(this.el.parentNode)}},{key:"after",value:function(e){try{this.el.parentNode.insertBefore(e,this.el.nextElementSibling)}catch(t){}return this}},{key:"before",value:function(e){try{this.el.parentNode.insertBefore(e,this.el)}catch(t){}return this}},{key:"event",value:function(e,t){this.el.addEventListener(e,t)}},{key:"click",value:function(e){this.event(e)}}]),e}();t["default"]=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(22),o=n(d),s=function(){function e(t){i(this,e),this.elements=[];for(var a in t)this.elements.push(new o["default"](t[a]))}return r(e,[{key:"attr",value:function(e){for(var t in this.elements)this.elements[t].attr(e);return this}},{key:"toggleClass",value:function(e){for(var t in this.elements)this.elements[t].toggleClass(e);return this}},{key:"addClass",value:function(e){for(var t in this.elements)this.elements[t].addClass(e);return this}},{key:"removeClass",value:function(e){for(var t in this.elements)this.elements[t].removeClass(e);return this}},{key:"css",value:function(e){for(var t in this.elements)this.elements[t].css(e);return this}},{key:"hide",value:function(){for(var e in this.elements)this.elements[e].hide();return this}},{key:"show",value:function(){for(var e in this.elements)this.elements[e].show();return this}},{key:"animate",value:function(e,t,a){var n=0;for(var i in this.elements)n+=1,this.elements[i].animate(e,t,function(){n-=1,n||a()});return this}},{key:"remove",value:function(){for(var e in this.elements)this.elements[e].remove();return this}}]),e}();t["default"]=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=n(i),d=a(1),o=(n(d),a(20)),s=n(o),u=a(11),l=(n(u),a(6)),f=n(l),c=[],p={},h={},m=function(e){for(var t in p)p[t](e);"undefined"!=typeof e.move&&"undefined"!=typeof e.move.from&&"undefined"!=typeof e.move.to&&"undefined"!=typeof e.move.deck&&(0,s["default"])({from:e.move.to,to:e.move.from,deck:e.move.deck,flip:e.move.flip})};r["default"].listen("undo",function(e){if(r["default"].dispatch("stopAnimations"),e){if(e instanceof Array){e.reverse();for(var t in e){var a=e[t];m(a)}}else m(e);f["default"].checkTips()}});var v=function(e){for(var t in h)h[t](e);"undefined"!=typeof e.move&&"undefined"!=typeof e.move.from&&"undefined"!=typeof e.move.to&&"undefined"!=typeof e.move.deck&&(0,s["default"])(e.move)};r["default"].listen("redo",function(e){if(r["default"].dispatch("stopAnimations"),e){if(e instanceof Array){e.reverse();for(var t in e){var a=e[t];v(a)}}else v(e);f["default"].checkTips()}}),t["default"]=new function(){this.reset=function(){c=[]},this.add=function(e){c.push(e)},this.get=function(){var e=c;return this.reset(),e},this.addUndoMethods=function(e){for(var t in e)p[t]=e[t]},this.addRedoMethods=function(e){for(var t in e)h[t]=e[t]}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){if(this.name!=e.eventData.to.name)return!1;console.log("KICK");var t=e.eventData.to,a=t.getCardsNames();(0,o["default"])({from:t,to:e.actionData.to,deck:a,flip:!0}),u["default"].add({move:{from:t.name,to:e.actionData.to,deck:a,flip:!0}}),r["default"].dispatch("makeStep",u["default"].get())};var i=a(2),r=n(i),d=a(20),o=n(d),s=a(24),u=n(s)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=!0;t=t&&!this.locked,"boolean"==typeof this.fill&&(t=t&&!this.fill);var a=-1,n=null,i=null,r=null,o=this.cards.length,u=[];for(var f in this.cards){if(this.cards[f].id==e){a=0|f,n=this.cards[f].name;var c=s["default"].validateCardName(n);t=t&&c,c&&(i=c.suit,r=c.rank),t=t&&(!this.cards[f].flip||this.cards[f].flip==d["default"].canMoveFlip)}a>=0&&u.push({index:f,card:this.cards[f]})}var p={cardId:e,cardName:n,cardSuit:i,cardRank:r,cardIndex:a,deckLength:o};for(var h in this.takeRules){var m=this.takeRules[h];l["default"][m]?t=t&&l["default"][m](p):(console.log("Incorrect take rule:",m),t=!1)}return t=t&&a>=0,t&&u};var i=a(1),r=(n(i),a(3)),d=n(r),o=a(5),s=n(o),u=a(14),l=n(u)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=!0,a=e[0].card.parent,n=r["default"].getDeckById(a);t=t&&!this.locked;for(var i in this.putRules){var d=this.putRules[i];o["default"][d]?t=t&&o["default"][d]({from:{deckId:a,deck:n},putDeck:e,cards:this.cards,rulesArgs:o["default"][d]}):(console.warn("putRule:",d,"not exists"),t=!1)}return t};var i=a(11),r=n(i),d=a(13),o=n(d)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=u["default"].validateCardName(e);if(t){var a="card_"+u["default"].genId(),n={id:a,name:e,type:"card",visible:!0,flip:!1};n.parent=this.getId(),r["default"].dispatch("addCardEl",n);var i=o["default"].get("elements");return i[a]=n,o["default"].set("elements",i),this.Push([n]),this.flipCheck(),this.Redraw(),n}return!1};var i=a(2),r=n(i),d=a(1),o=n(d),s=a(5),u=n(s)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t={},a=r["default"].get("elements");for(var n in a)"deck"==a[n].type&&(e&&e.visible?a[n].visible&&(t[n]=a[n]):t[n]=a[n]);return t};var i=a(1),r=n(i)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=r["default"].get("elements");for(var a in t)if("deck"==t[a].type&&a==e)return t[a];return null};var i=a(1),r=n(i)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=[];for(var a in e)e[a].card&&e[a].card.name?t.push(e[a].card.name):e[a].name&&t.push(e[a].name);return t}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var a=r["default"].getElementsByName(e,"deck");if(t&&"string"==typeof t){for(var n in a){var i=r["default"].getElementById(_gecks[n].parent());if(i&&i.name&&i.name==t)return a[n]}return!1}return a[0]};var i=a(5),r=n(i)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=[],a=0;for(var n in this.decks)a+=1,t.push(null);for(var n in this.decks)this.decks[n].groupIndex&&this.decks[n].groupIndex<=a&&(t[this.decks[n].groupIndex-1]=!0);for(var n in this.decks)if(!this.decks[n].groupIndex){for(var i=0;null!=t[i];i+=1);t[i]=this.decks[n].getId()}for(var n in this.decks)this.decks[n].groupIndex&&this.decks[n].groupIndex<=a&&(t[this.decks[n].groupIndex-1]=this.decks[n].getId());var r={};for(var n in this.decks)this.decks[n].groupIndex&&this.decks[n].groupIndex>a&&(r[this.decks[n].groupIndex-1]=this.decks[n].getId());for(var n in r){for(var i=0;null!=t[i];i+=1);t[i]=this.decks[r[n]].getId()}var d=!0;for(var n in e)d=d&&"string"==typeof e[n];if(d)for(var n in e){var i=t[n%t.length];this.decks[i].genCardByName(e[n])}else for(var n in e)n<t.length&&this.decks[t[n]].Fill(e[n])}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=this.getDecks();"undefined"!=typeof e.decks&&"number"!=typeof e.decks||(e.decks=[]);for(var n in t){if(e.decks[n]||(e.decks[n]={}),e.position&&e.decks[n].parentPosition&&(e.decks[n].parentPosition={x:e.position.x,y:e.position.y}),e.rotate&&(e.decks[n].rotate=e.rotate),e.paddingX&&(e.decks[n].paddingX=e.paddingX),e.paddingY&&(e.decks[n].paddingY=e.paddingY),e.flipPaddingX&&(e.decks[n].flipPaddingX=e.flipPaddingX),e.flipPaddingY&&(e.decks[n].flipPaddingY=e.flipPaddingY),e.decks[n].position||(e.decks[n].position={}),e.decks[n].parentPosition||(e.decks[n].parentPosition={}),!e.decks[n].parentPosition.x&&a.position&&a.position.x&&"number"==typeof a.position.x&&(e.decks[n].parentPosition.x=e.position.x),!e.decks[n].parentPosition.y&&a.position&&a.position.y&&"number"==typeof a.position.y&&(e.decks[n].parentPosition.y=e.position.y),e.placement){var i=d["default"].card;e.placement.x&&(e.decks[n].position.x=(e.placement.x+i.width)*n),e.placement.y&&(e.decks[n].position.y=(e.placement.y+i.height)*n)}!e.decks[n].rotate&&e.rotate&&"number"==typeof e.rotate&&(e.decks[n].rotate=e.rotate),!e.decks[n].paddingX&&e.paddingX&&"number"==typeof e.paddingX&&(e.decks[n].paddingX=e.paddingX),!e.decks[n].paddingY&&e.paddingY&&"number"==typeof e.paddingY&&(e.decks[n].paddingY=e.paddingY),!e.decks[n].flipPaddingX&&e.flipPaddingX&&"number"==typeof e.flipPaddingX&&(e.decks[n].flipPaddingX=e.flipPaddingX),!e.decks[n].flipPaddingY&&e.flipPaddingY&&"number"==typeof e.flipPaddingY&&(e.decks[n].flipPaddingY=e.flipPaddingY),t[n].Redraw(e.decks[n])}};var r=n(3),d=i(r)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(36),r=n(i),d=a(37),o=n(d);t["default"]={count:function(e){for(var t=e.count,a=[],n=0;t>n;n+=1){var i=this.name+"_deck"+(n+1);a.push({name:i})}return a},map:r["default"],fan:o["default"]}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=[],a={x:0,y:0},n=this.placement?{x:"undefined"!=typeof this.placement.x?this.placement.x:a.x,y:"undefined"!=typeof this.placement.y?this.placement.y:a.y}:a;this.placement={x:0,y:0};var i=1,o={width:e.map[0].length,height:e.map.length};e.map.forEach(function(e){o.width=Math.max(o.width,e.length)});for(var s in e.map)for(var u in e.map[s])if(e.map[s][u]){var l={name:e.map[s][u],position:{x:u*((0|r["default"].card.width)+(0|n.x)),y:s*((0|r["default"].card.height)+(0|n.y))}};if(e.aroundRealtions){var f=[];d(s-1,u-1,o)&&e.map[s-1]&&e.map[s-1][u-1]&&f.push({name:"around",type:"corn",id:"clt",to:e.map[s-1][u-1]}),d(s-1,u,o)&&e.map[s-1]&&e.map[s-1][u]&&f.push({name:"around",type:"side",id:"top",to:e.map[s-1][u]}),d(s-1,u+1,o)&&e.map[s-1]&&e.map[s-1][u+1]&&f.push({name:"around",type:"corn",id:"crt",to:e.map[s-1][u+1]}),d(s,u-1,o)&&e.map[s]&&e.map[s][u-1]&&f.push({name:"around",type:"side",id:"lft",to:e.map[s][u-1]}),d(s,u+1,o)&&e.map[s]&&e.map[s][u+1]&&f.push({name:"around",type:"side",id:"rgt",to:e.map[s][u+1]}),d(s+1,u-1,o)&&e.map[s+1]&&e.map[s+1][u-1]&&f.push({name:"around",type:"corn",id:"clb",to:e.map[s+1][u-1]}),d(s+1,u,o)&&e.map[s+1]&&e.map[s+1][u]&&f.push({name:"around",type:"side",id:"btm",to:e.map[s+1][u]}),d(s+1,u+1,o)&&e.map[s+1]&&e.map[s+1][u+1]&&f.push({name:"around",type:"corn",id:"crb",to:e.map[s+1][u+1]}),l.relations=f}t.push(l),i+=1}return t};var i=a(3),r=n(i),d=function(e,t,a){return e>=0&&t>=0&&e<a.width&&t<a.height}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){this.placement={x:0,y:0},console.log("FAN GENERATOR",e);for(var t=[],a="number"==typeof e.count?e.count:3,n=180/a,i="number"==typeof e.radius?e.radius:100,d="undefined"!=typeof e.center&&"undefined"!=typeof e.center.x&&"undefined"!=typeof e.center.y?e.center:{x:0,y:0},o=n/2+270,s=Math.PI/180,u=0;a>u;u+=1){var l=Math.sin(o*s)*i,f=Math.cos(o*s)*i;o>360&&(o-=360),t.push({name:this.name+"_deck"+u,rotate:o,position:{x:d.x+l-r["default"].card.width/2,y:d.y-f-r["default"].card.height/2}}),o+=n}return t};var i=a(3),r=n(i)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=a(39);$("#gpCommit").parent().before(e)}},function(e,t){e.exports='<div style="margin:15px 0 20px 0" id=cards-style-preferences> <h4 style="margin:20px 0 20px 0">Настройки оформления</h4> <div> <span class=cards-style-preferences-label>Лицевая сторона:</span> <select id=pref_face class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>Англо-американская</option> </select> </div> <div> <span class=cards-style-preferences-label>Рубашка:</span> <select id=pref_back class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>Альтернативная</option> <option value=2>Красная</option> <option value=3>Синяя</option> </select> </div> <div> <span class=cards-style-preferences-label>Пустая ячейка:</span> <select id=pref_empty class=cards-style-preferences-element> <option value=0>Классическая</option> <option value=1>С обводкой</option> </select> </div> </div>'},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=n(i),d=a(3),o=n(d),s=a(41),u=n(s),l=function(){var e=u["default"].get("pref");!e&&(e=o["default"].pref),$("#pref_face [value="+e.face+"]").prop({selected:!0}),$("#pref_back [value="+e.back+"]").prop({selected:!0}),$("#pref_empty [value="+e.empty+"]").prop({selected:!0})},f=function(){var e={face:$("#pref_face").val(),back:$("#pref_back").val(),empty:$("#pref_empty").val()};r["default"].dispatch("fieldThemesSet",e),c(e)},c=function(e){u["default"].set("pref",e)};t["default"]=function(){$("#bbParameters").click(l),$(".cards-style-preferences-element").change(f)}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(){function e(){a(this,e),localStorage.hasOwnProperty("SolitaireEngine")||(localStorage.SolitaireEngine="{}")}return n(e,[{key:"set",value:function(e,t){var a=JSON.parse(localStorage.SolitaireEngine);a[e]=t,localStorage.SolitaireEngine=JSON.stringify(a)}},{key:"get",value:function(e){var t=JSON.parse(localStorage.SolitaireEngine);return t[e]}},{key:"clear",value:function(){localStorage.SolitaireEngine="{}"}}]),e}();t["default"]=new i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=n(i),d=a(3),o=n(d),s=a(41),u=n(s);t["default"]=function(){var e=u["default"].get("pref");!e&&(e=o["default"].pref),r["default"].dispatch("fieldThemesSet",e)}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(2),r=n(i),d=a(1),o=n(d),s=a(3),u=(n(s),a(5)),l=n(u),f=a(11),c=n(f),p=a(6),h=n(p),m=a(8),v=n(m),g=a(24),y=n(g),k=a(44),_=n(k),x=a(9),b=n(x),w=function P(e,t,a){if(!a.dbclick&&0==a.distance&&o["default"].get("moveDistance")>0)return!1;var n=null,i=null,d=!0;d=d&&t;var s=t&&t.id&&l["default"].getElementById(t.id);if(s&&("card"==s.type?n=l["default"].getElementById(s.parent):"deck"==s.type&&(n=s)),d=d&&n,i=e[0].card.parent&&l["default"].getElementById(e[0].card.parent),d=d&&i,n&&n.getId()!=i.getId()){var u=n.Put(e);if(d=d&&u,u){var f=i.Pop(e.length);if(d=d&&f,f){n.Push(f),l["default"].animationDefault(),r["default"].dispatch("moveDragDeck",{departure:i,destination:n,moveDeck:e,callback:function(){r["default"].dispatch("moveEnd",{from:i,to:n,moveDeck:e})}}),y["default"].add({move:{from:i.name,to:n.name,deck:c["default"].deckCardNames(e)}});var p=i.cards;p.length&&p[p.length-1].flip&&(p[p.length-1].flip=!1,y["default"].add({unflip:{deck:i.name,card:{name:p[p.length-1].name,index:p.length-1}}})),n.afterStep||r["default"].dispatch("makeStep",y["default"].get()),_["default"].winCheck({show:!0})}}}else d=!1;if(!d&&i){var m=(0,b["default"])();if(m.inputParams.doubleClick&&a.dbclick||a.distance>=o["default"].get("moveDistance")){var g=(0,v["default"])(e,a);if(g)return console.log("###",g),void P(e,g.to.deck.domElement.el,a);r["default"].dispatch("moveCardToHome",{moveDeck:e,departure:i})}else r["default"].dispatch("moveCardToHome",{moveDeck:e,departure:i})}h["default"].checkTips()};r["default"].listen("Move",function(e){console.log("Move ->"),w(e.moveDeck,e.to,e.cursorMove)})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),r=n(i),d=a(2),o=n(d),s=a(5),u=(n(s),a(45)),l=n(u),f=a(11),c=n(f),p=function(e){var t=!0,a=!1,n=r["default"].get("winCheck");for(var i in n.rules)a=!0,t=l["default"][i]?t&&l["default"][i]({decks:c["default"].getDecks({visible:!0}),rulesArgs:n.rules[i]}):t&&l["default"].newerWin();return a||(t=t&&l["default"].newerWin()),t?e&&e.noCallback?!0:(o["default"].dispatch("win",e),!0):!1},h=function(e){e||(e={}),"undefined"==typeof e.show&&(e.show=!1),p(e)};t["default"]={winCheck:p,hwinCheck:h}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),d=a(3),o=n(d),s={group:function(e){if(!e.filter||!e.filterArgs)return!1;var t=[];for(var a in e.decks)("string"==typeof e.filterArgs&&e.decks[a].parent==e.filterArgs||e.filterArgs.length&&e.filterArgs.indexOf(e.decks[a].parent)>=0)&&t.push(e.decks[a]);return e.decks=t,t.length},groups:function(e){return s.group(e)},_asc_desk:function(e){if(!e||null==e.asc_desk||"number"!=typeof e.asc_desk)return!1;var t=!0;for(var a in e.decks){if(!t)return!1;var n=e.decks[a].cards;for(var i in n)if(i>0){var d=r["default"].validateCardName(n[(0|i)-1].name),s=r["default"].validateCardName(n[0|i].name),u=o["default"].card.ranks;t=t&&d&&s&&u.indexOf(d.rank)==u.indexOf(s.rank)+e.asc_desk}}return t},newerWin:function(){return console.warn("You use 'newerWin' rule for checking Win. Maybe arguments in 'winCheck.rule' have incorrect rule name."),!1},allEmpty:function(e){var t=!0;for(var a in e.decks)t=t&&0==e.decks[a].cards.length;return t},allInOne:function(e){var t=0,a=0,n=0;for(var i in e.decks)0==e.decks[i].cards.length?t+=1:n=i,a+=1;var r=t==a-1;return e.filter&&(e.decks=r?[e.decks[n]]:[]),r},allAscend:function(e){return e.asc_desk=-1,s._asc_desk(e)},allDescent:function(e){return e.asc_desk=1,s._asc_desk(e)},lego:function(e){if(!e||!e.rulesArgs)return!1;var t=!0;for(var a in e.rulesArgs){var n={};for(var i in e.decks)n[i]=e.decks[i];var r={decks:n};if(t&&e.rulesArgs[a].filters){r.filter=!0;for(var i in e.rulesArgs[a].filters)if("string"==typeof e.rulesArgs[a].filters[i]&&s[e.rulesArgs[a].filters[i]])r.filterArgs=null,t=t&&s[e.rulesArgs[a].filters[i]](r);else if(e.rulesArgs[a].filters[i]&&"[object Object]"==e.rulesArgs[a].filters[i].toString())for(var d in e.rulesArgs[a].filters[i])s[d]?(r.filterArgs=e.rulesArgs[a].filters[i][d],t=t&&s[d](r)):t=t&&s.newerWin();else t=t&&s.newerWin();r.filter=!1}if(e.rulesArgs[a].rules)for(var i in e.rulesArgs[a].rules)s[e.rulesArgs[a].rules[i]]?t=t&&s[e.rulesArgs[a].rules[i]](r):(console.log("#2"),t=t&&s.newerWin())}return t}};t["default"]=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(2),r=n(i),d=a(21),o=n(d),s=a(47),u=(n(s),a(48)),l=(n(u),a(49)),f=(n(l),a(50)),c=(n(f),a(51)),p=(n(c),a(52)),h=(n(p),a(53));n(h);r["default"].listen("removeEl",function(e){(0,o["default"])(e.domElement).remove()}),r["default"].listen("showCard",function(e){(0,o["default"])(e).show()}),r["default"].listen("hideCard",function(e){(0,o["default"])(e).hide()}),r["default"].listen("stopAnimations",function(){o["default"].stopAnimations()})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=a(1),d=n(r),o=a(2),s=n(o),u=a(3),l=n(u),f=a(9),c=n(f),p=a(21),h=n(p);s["default"].listen("initField",function(e){var t=e.a.field?e.a.field:"#mat";"string"==typeof t&&(t=2==t.split(".").length?document.getElementsByClassName(t.split(".")[1])[0]:2==t.split("#").length?document.getElementById(t.split("#")[1]):document.getElementsByTagName(t),t||(t=document.getElementById("mat")));var a=(0,c["default"])();a.domElement=t;var n={};e.a.width&&"number"==typeof e.a.width&&(n.width=e.a.width+"px"),e.a.height&&"number"==typeof e.a.height&&(n.height=e.a.height+"px"),e.a.top&&"number"==typeof e.a.top&&(n.top=e.a.top+"px"),e.a.left&&"number"==typeof e.a.left&&(n.left=e.a.left+"px");var r=d["default"].get("zoom");(r!=l["default"].zoom||1!=r)&&(n.transform="scale("+r+")",n["transform-origin"]="0 0");var o="string"==typeof e.a.theme?e.a.theme:"object"==i(e.a.theme)&&e.a.theme.name?e.a.theme.name:l["default"].theme.name;(0,h["default"])(t).css(n).addClass("field").addClass(o)})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(2),r=n(i),d=a(1),o=n(d),s=a(3),u=n(s),l=a(9),f=n(l),c=a(21),p=n(c),h=function(e,t,a){e.x=t.position&&t.position.x&&"number"==typeof t.position.x?t.position.x:0,e.y=t.position&&t.position.y&&"number"==typeof t.position.y?t.position.y:0,e.x=t.parentPosition&&t.parentPosition.x?e.x+t.parentPosition.x:e.x,e.y=t.parentPosition&&t.parentPosition.y?e.y+t.parentPosition.y:e.y,a.rotate=e.rotate=t.rotate&&"number"==typeof t.rotate?t.rotate:0,e.padding_y=t.paddingY&&"number"==typeof t.paddingY?t.paddingY:t.paddingType?u["default"].padding_y:0,e.padding_x=t.paddingX&&"number"==typeof t.paddingX?t.paddingX:t.paddingType?u["default"].padding_x:0,e.flip_padding_y=t.flipPaddingY&&"number"==typeof t.flipPaddingY?t.flipPaddingY:t.paddingType?u["default"].flip_padding_y:0,e.flip_padding_x=t.flipPaddingX&&"number"==typeof t.flipPaddingX?t.flipPaddingX:t.paddingType?u["default"].flip_padding_x:0};r["default"].listen("addDeckEl",function(e){var t=(0,f["default"])();h(e.params,e.a,e.deck),e.deck.domElement=(0,p["default"])("<div>");var a={left:e.params.x+"px",top:e.params.y+"px",width:u["default"].card.width+"px",height:u["default"].card.height+"px",transform:"rotate("+(0|e.params.rotate)+"deg)"};a.display=e.deck.visible?"block":"none",(0,p["default"])(e.deck.domElement).css(a).addClass("el").attr({id:e.deck.getId()}),e.a.showSlot&&(0,p["default"])(e.deck.domElement).addClass("slot"),e.a["class"]&&(0,p["default"])(e.deck.domElement).addClass(e.a["class"]),(0,p["default"])(t.domElement).append(e.deck.domElement);var n=e.a.label&&"string"==typeof e.a.label?e.a.label:null;if(!e.a.label&&o["default"].get("debugLabels")&&(n='<span style="color:#65B0FF;">'+e.deck.name+"</span>"),n){var i=(0,p["default"])("<div>").addClass("deckLabel").attr({title:e.deck.getId()+" ("+e.deck.parent+")"});(0,p["default"])(i).html(n),(0,p["default"])(e.deck.domElement).append(i)}}),r["default"].listen("redrawDeckFlip",function(e){if(e&&e.cards)for(var t in e.cards){var a={};e.cards[t].flip?(0,p["default"])(e.cards[t].domElement).addClass("flip"):(0,p["default"])(e.cards[t].domElement).removeClass("flip"),(0,p["default"])(e.cards[t].domElement).css(a)}}),r["default"].listen("redrawDeckIndexes",function(e){if(console.log("redrawDeckPaddings:",e),e&&e.cards)for(var t in e.cards)(0,p["default"])(e.cards[t].domElement).css({"z-index":(0|u["default"].startZIndex)+(0|t)})}),r["default"].listen("redrawDeck",function(e){if(o["default"].get("noRedraw"))return!1;e.data&&(h(e.params,e.data,e.deck),e.data.paddingX&&o["default"].get("padding_x",e.data.paddingX),e.data.flipPaddingX&&o["default"].get("flip_padding_x",e.data.flipPaddingX),e.data.paddingY&&o["default"].get("padding_y",e.data.paddingY),e.data.flipPaddingY&&o["default"].get("flip_padding_y",e.data.flipPaddingY));var t={left:e.params.x,top:e.params.y,transform:"rotate("+(0|e.params.rotate)+"deg)"};t.display=e.deck.visible?"block":"none",(0,p["default"])(e.deck.domElement).css(t);for(var a in e.cards){var n=e.deck.padding(a),i=(0|e.params.startZIndex)+(0|a),t={left:n.x+"px",top:n.y+"px","z-index":i,"-ms-transform":"rotate("+(0|e.params.rotate)+"deg)","-webkit-transform":"rotate("+(0|e.params.rotate)+"deg)","-moz-transform":"rotate("+(0|e.params.rotate)+"deg)",transform:"rotate("+(0|e.params.rotate)+"deg)"};t.display=e.deck.visible?"block":"none",e.cards[a].flip?(0,p["default"])(e.cards[a].domElement).addClass("flip"):(0,p["default"])(e.cards[a].domElement).removeClass("flip"),(0,p["default"])(e.cards[a].domElement).css(t)}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(1),r=(n(i),a(2)),d=n(r),o=a(3),s=n(o),u=a(5),l=(n(u),a(9)),f=n(l),c=a(21),p=n(c);d["default"].listen("addCardEl",function(e){var t=(0,f["default"])(),a={width:s["default"].card.width,height:s["default"].card.height};a={width:1*a.width.toFixed(3),height:1*a.height.toFixed(3)};var n={width:a.width+"px",height:a.height+"px"};e.domElement=(0,p["default"])("<div>"),(0,p["default"])(e.domElement).addClass("el card draggable "+e.name).css(n).attr({id:e.id}),(0,p["default"])(t.domElement).append(e.domElement)}),d["default"].listen("hideCard",function(e){e&&e.domElement&&(0,p["default"])(e.domElement[0]).hide()}),d["default"].listen("showCard",function(e){e&&e.domElement&&(0,p["default"])(e.domElement[0]).show()})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(2),r=n(i),d=a(21),o=n(d),s=a(6),u=n(s);r["default"].listen("showTip",function(e){e&&e.el&&e.el.domElement&&e.type&&(0,o["default"])(e.el.domElement).addClass(e.type)}),r["default"].listen("hideTips",function(e){if(e&&e.types)for(var t in e.types){var a=e.types[t];(0,o["default"])("."+a).removeClass(a)}else for(var t in u["default"].tipTypes){var a=u["default"].tipTypes[t];(0,o["default"])("."+a).removeClass(a,777)}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(2),r=n(i),d=a(1),o=(n(d),a(5)),s=n(o),u=a(3),l=n(u),f=a(21),c=n(f),p=function(e){return 0>e&&(e=360+e),e>360&&(e-=360),e};r["default"].listen("moveDragDeck",function(e){console.log("moveDragDeck",e),s["default"].curLock();for(var t in e.moveDeck){var a=e.destination.padding(e.destination.cards.length-1+(0|t)),n=p(e.departure.rotate),i=p(e.destination.rotate);(0,c["default"])(e.moveDeck[t].card.domElement).css({transform:"rotate("+n+"deg)"}),n-i>180&&(n-=360,(0,c["default"])(e.moveDeck[t].card.domElement).css({transform:"rotate("+n+"deg)"})),-180>n-i&&(i-=360);var d={left:a.x+"px",top:a.y+"px",transform:"rotate("+i+"deg)"},o=(0|l["default"].topZIndex)+(0|t);(0,c["default"])(e.moveDeck[t].card.domElement).css({"z-index":o}).animate(d,function(e){e.departure.Redraw(),e.destination.Redraw(),s["default"].curUnLock(),"function"==typeof e.callback&&e.callback(),r["default"].dispatch("moveDragDeckDone",{deck:e.destination})}.bind(this,e))}}),r["default"].listen("moveDragDeckDone",function(e){if(e.deck.fill){var t=e.deck.cards;for(var a in t)(0,c["default"])(t[a].domElement).addClass("fill");
}}),r["default"].listen("dragDeck",function(e){for(var t in e._dragDeck){var a=e._deck.padding(e._dragDeck[t].index),n={left:a.x+(e.x-e._startCursor.x)+"px",top:a.y+(e.y-e._startCursor.y)+"px","z-index":l["default"].topZIndex+(0|t)};(0,c["default"])(e._dragDeck[t].card.domElement).css(n)}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(2),r=n(i),d=a(5),o=n(d),s=a(1),u=(n(s),a(21)),l=n(u);r["default"].listen("moveCardToHome",function(e){console.log("Move card home",e),o["default"].curLock();for(var t in e.moveDeck){var a=e.departure.padding(e.moveDeck[t].index),n={left:a.x+"px",top:a.y+"px"};(0,l["default"])(e.moveDeck[t].card.domElement).animate(n,function(){o["default"].curUnLock(),e.departure&&e.departure.Redraw()})}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=a(2),r=n(i),d=a(3),o=n(d),s=a(9),u=n(s),l=a(21),f=n(l);r["default"].listen("fieldThemesSet",function(e){var t=(0,u["default"])(),a=t.domElement;for(var n in o["default"].themes.face){var i=o["default"].themes.face[n];(0,f["default"])(a).removeClass(i)}for(var n in o["default"].themes.back){var r=o["default"].themes.back[n];(0,f["default"])(a).removeClass(r)}for(var n in o["default"].themes.empty){var d=o["default"].themes.empty[n];(0,f["default"])(a).removeClass(d)}var s=o["default"].themes.face[e.face];(0,f["default"])(a).addClass(s);var l=o["default"].themes.back[e.back];(0,f["default"])(a).addClass(l);var c=o["default"].themes.empty[e.empty];(0,f["default"])(a).addClass(c)})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),r=n(i),d=a(5),o=n(d),s=a(55),u=n(s),l=a(21),f=n(l),c=a(56),p=n(c),h=[],m=[],v=new function(){this.record=function(e){m=[],h.push(e)},this.undo=function(){var e=h.pop();return e&&m.push(e),e},this.redo=function(){var e=m.pop();return e&&h.push(e),e}},g=!1,y=function(e){g||(g=!0,r["default"].listen("makeStep",v.record),e&&e.drawButtons&&(0,f["default"])(document.body).append((0,f["default"])("<div>").append($("<span>").addClass("awesome").text("UNDO").click(function(){var e=v.undo();e&&SolitaireEngine.event.dispatch("undo",e)})).append($("<span>").addClass("awesome").text("REDO").click(function(){var e=v.redo();e&&SolitaireEngine.event.dispatch("redo",e)})).css({position:"fixed",top:"1px",left:"1px"})))},k=function(){(0,p["default"])()};t["default"]={deckGenerator:u["default"],debugHistory:y,debugHistoryMgr:v,validateCardName:o["default"].validateCardName,elRender:f["default"],tests:k}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t="all",a=!1,n=10,r=e&&e.type&&"string"==typeof e.type?e.type:t,s=e&&e.deckCount&&"number"==typeof e.deckCount?e.deckCount:52,u=e&&e.iterations&&"number"==typeof e.iterations&&e.iterations<n?e.iterations:1,l=e&&e.shuffle&&"undefuned"!=typeof e.shuffle?e.shuffle:a,f=function(e,t){var a=[];for(var n in e)for(var i in t)a.push(e[n]+t[i]);return a},c=36==s?d["default"].card.ranks36:d["default"].card.ranks;if(e&&e.ranks){c=[];for(i in e.ranks)d["default"].card.rank.indexOf(e.ranks[i].toString())>=0&&c.push(e.ranks[i].toString())}var p={all:function(){return f(d["default"].card.suits,c)},black:function(){var e=d["default"].card.colors.black;return f(e,c)},red:function(){var e=d["default"].card.colors.red;return f(e,c)},black_and_red:function(){var e=[d["default"].card.colors.red[Math.random()*d["default"].card.colors.red.length|0],d["default"].card.colors.black[Math.random()*d["default"].card.colors.black.length|0]];return f(e,c)},h_only:function(){var e=["h"];return f(e,c)},d_only:function(){var e=["d"];return f(e,c)},c_only:function(){var e=["c"];return f(e,c)},s_only:function(){var e=["s"];return f(e,c)},one_rank_only:function(){var e=[d["default"].card.solors[Math.random()*d["default"].card.solors.length|0]];return f(e,c)}};p.hearts=p.h_only,p.diamonds=p.d_only,p.clubs=p.c_only,p.spades=p.s_only;for(var h=[];u>0;u-=1)h=h.concat(p[r]());return l&&o(h),h};var r=a(3),d=n(r),o=function(e){for(var t,a,n=e.length;n;t=Math.floor(Math.random()*n),a=e[--n],e[n]=e[t],e[t]=a);}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(21);n(i);t["default"]=function(){}},function(e,t){},function(e,t){},function(e,t){}]);
//# sourceMappingURL=SolitaireEngine.js.map