/*
 * Solitaire game engine
 * Author     : Roman Bauer - <kotapesic@gmail.com>
 * Version    : 0.12.1334
 * Build time : Fri, 11 Nov 2016 15:57:05 GMT
 */
var SolitaireEngine=function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),i=a(r),o=n(2),u=a(o),s=n(3),l=a(s),d=n(4),f=(a(d),n(60)),c=(a(f),n(23)),p=(a(c),n(63)),v=(a(p),n(10)),h=a(v),y=n(5),m=(a(y),n(61)),g=a(m),k=n(33),_=(a(k),n(7)),b=(a(_),n(74)),x=a(b);n(75),n(76),n(77);var w=null,P=!0;t.event=u["default"],t.options=l["default"],t.winCheck=g["default"].hwinCheck,t.generator=x["default"],t.version="9091492466".split(9).slice(1).map(function(e){return parseInt(e,8)}).join("."),t.onload=function(e){w=e},t.onChangePreferences=function(e){i["default"].set("changePreferencesCallback",e)},t.init=function(e){if(u["default"].dispatch("gameInit",{firstInit:P}),u["default"].clearByTag(u["default"].tags.inGame),u["default"].setTag(u["default"].tags.inGame),h["default"].clear(),h["default"].create(e),P){if(P=!1,"function"==typeof w){var n=i["default"].get("gamePreferencesData");w(n)}var a=i["default"].get("changePreferencesCallback");if("function"==typeof a){var r=i["default"].get("gamePreferencesData");a(r)}}u["default"].dispatch("gameInited"),t.Redraw=function(e){h["default"].Redraw(e)}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),u=a(o),s=n(3),l=(a(s),function(){function e(){r(this,e),this._data={}}return i(e,[{key:"get",value:function(e){return void 0!==this._data[e]?(u["default"].dispatch("shareGet:"+e,this._data[e]),this._data[e]):null}},{key:"set",value:function(e,t){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if("string"==typeof e){if(u["default"].dispatch("shareChange:"+e,{from:this._data[e],to:t}),"boolean"==typeof n&&n)try{this._data[e]=Object.assign({},t)}catch(a){this._data[e]=t}else this._data[e]=t;u["default"].dispatch("shareSet:"+e,t)}else if(e instanceof Object){"boolean"==typeof t&&(n=t);for(var r in e){if(u["default"].dispatch("shareChange:"+e,{from:this._data[r],to:e[r]}),"boolean"==typeof n&&n)try{this._data[r]=Object.assign({},e[r])}catch(a){this._data[r]=e[r]}else this._data[r]=e[r];u["default"].dispatch("shareSet:"+r,e[r])}}}},{key:"getAll",value:function(){return this._data}},{key:"delete",value:function(e){delete this._data[e]}}]),e}());t["default"]=new l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e),this.tags={preInit:"preInit",inGame:"inGame"},this._tag=this.tags.preInit,this._events={}}return a(e,[{key:"listen",value:function(e,t,n){"function"==typeof t&&"string"==typeof e&&(this._events[e]?this._events[e].push({tag:this._tag,context:n,callback:t}):this._events[e]=[{tag:this._tag,callback:t}])}},{key:"dispatch",value:function(e,t){if(this._events[e])for(var n in this._events[e])this._events[e][n]&&this._events[e][n].callback(t,{eventInfo:{eventName:e,index:n,count:this._events[e].length}})}},{key:"clear",value:function(){this._events={}}},{key:"setTag",value:function(e){this._tag=e}},{key:"clearByTag",value:function(e){for(var t in this._events)for(var n in this._events[t])this._events[t][n]&&this._events[t][n].tag==e&&(this._events[t]=this._events[t].slice(0,n).concat(this._events[t].slice((0|n)+1)))}},{key:"get",value:function(e,t){if(t){var n=[];for(var a in this._events[e]){var r=!0;for(var i in t)r=r&&this._events[e][a][i]==t[i];r&&n.push(this._events[e][a])}return n}return this._events[e]}},{key:"has",value:function(e,t){if(t){var n=0;for(var a in this._events[e]){var r=!0;for(var i in t)r=r&&this._events[e][a][i]==t[i];r&&(n+=1)}return n}return this._events[e]?this._events[e].length:0}}]),e}();t["default"]=new r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={themes:{field:["default_field","alternative_field"],face:["default_face","alternative_face"],back:["default_back","alternative_back"]},pref:{field:"default_field",face:"alternative_face",back:"default_back"},showTips:!0,showTipsDestination:!1,showTipPriority:!1,canMoveFlip:!1,tipsParams:{hideOnEmpty:!1,excludeHomeGroups:!0},zoom:1,locale:"ru",animation:!0,animationTime:600,inputParams:{doubleClick:!1},flip:null,actions:null,can_move_flip:!1,showSlot:!0,autohide:!1,paddingType:"none",flip_type:"none",takeRules:["onlytop"],putRule:"any",moveDistance:0,padding_y:0,padding_x:0,flip_padding_y:0,flip_padding_x:0,move_distance:10,debugLabels:!1,startZIndex:100,topZIndex:900,card:{width:71,height:96,suits:["h","d","c","s"],colors:{red:["h","d"],black:["c","s"]},ranks:["1","2","3","4","5","6","7","8","9","10","j","q","k"],values:[1,2,3,4,5,6,7,8,9,10,11,12,13],ranks36:["1","6","7","8","9","10","j","q","k"]},stepType:"default",forceClone:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=a(o),s=n(2),l=a(s),d=n(3),f=a(d),c=n(5),p=a(c),v=n(12),h=a(v),y=n(7),m=a(y),g=function(){function e(){var t=this;r(this,e),u["default"].set("dragDeck",null),u["default"].set("startCursor",null),l["default"].listen("undo",this._inputUndoRedo()),l["default"].listen("redo",this._inputUndoRedo());try{document.onmousedown=function(e){0===e.button&&t.take(e.target,e.clientX,e.clientY)},document.onmousemove=function(e){t.drag(e.clientX,e.clientY)},document.onmouseup=function(e){t.put(e.target,e.clientX,e.clientY)},document.ondblclick=function(e){t.take(e.target,e.clientX,e.clientY),t.put(e.target,e.clientX,e.clientY,!0),p["default"].curUnLock()},document.addEventListener("touchstart",function(e){t.take(e.target,e.touches[0].clientX,e.touches[0].clientY)},!1),document.addEventListener("touchmove",function(e){u["default"].startCursor&&e.preventDefault(),t.drag(e.touches[0].clientX,e.touches[0].clientY)},!1),document.addEventListener("touchend",function(e){t.put(e.changedTouches[0].target,e.changedTouches[0].clientX,e.changedTouches[0].clientY)},!1)}catch(n){}}return i(e,[{key:"_inputUndoRedo",value:function(){var e=u["default"].get("dragDeck");if(e&&e[0]&&e[0].card&&e[0].card.parent){var t=h["default"].getDeckById(e[0].card.parent);t&&t.Redraw()}u["default"].set("dragDeck",null),u["default"].set("startCursor",null),p["default"].curUnLock()}},{key:"take",value:function(e,t,n){if(u["default"].set("dragDeck",null),u["default"].set("startCursor",null),!p["default"].isCurLock()&&!u["default"].get("sessionStarted")){if(e.className.split(" ").indexOf("slot")>=0){var a=e.id,r=p["default"].getElementById(a);r&&l["default"].dispatch("click",{to:r})}if(e.className.split(" ").indexOf("draggable")>=0){var i=e.id,o=i?p["default"].getElementById(i):null,s=o&&o.parent?o.parent:null,d=s?h["default"].getDeckById(s):null;d&&l["default"].dispatch("click",{to:d});var f=d?d.Take(i):null;u["default"].set("dragDeck",f),f&&(u["default"].set("startCursor",{x:t,y:n}),m["default"].tipsDestination({currentCard:o}))}}}},{key:"drag",value:function(e,t){if(!p["default"].isCurLock()){var n=u["default"].get("startCursor"),a=u["default"].get("dragDeck");if(a&&n){var r=(n?Math.sqrt(p["default"].sqr(e-n.x)+p["default"].sqr(t-n.y)):0,p["default"].getElementById(a[0].card.parent));r.padding(a[a.length-1].index);l["default"].dispatch("dragDeck",{x:e,y:t,_dragDeck:a,_startCursor:n,_deck:r})}}}},{key:"put",value:function(e,t,n,a){if(!p["default"].isCurLock()){var r=u["default"].get("startCursor"),i=u["default"].get("dragDeck");if(i&&r){var o=p["default"].getElementById(i[0].card.parent),s=o.padding(i[0].index),d=Math.sqrt(p["default"].sqr(t-r.x)+p["default"].sqr(n-r.y)),c={distance:d,dbclick:!!a,direction:{x:t-r.x,y:n-r.y,right:t>r.x,left:t<r.x,down:n>r.y,up:n<r.y},lastPosition:{x:t,y:n},deckPosition:{x:s.x+(t-r.x),y:s.y+(n-r.y)}};u["default"].set("lastCursorMove",c,f["default"].forceClone),l["default"].dispatch("hideCard",e);var v=document.elementFromPoint(t,n);l["default"].dispatch("showCard",e),l["default"].dispatch("Move",{moveDeck:i,to:v.id,cursorMove:c}),u["default"].set("dragDeck",null),u["default"].set("startCursor",null)}}}}]),e}();new g},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(2),u=a(o),s=n(3),l=a(s),d=n(6),f=a(d),c=n(7),p=a(c),v=n(10),h=a(v),y=n(33),m=(a(y),n(55)),g=a(m),k=n(57),_=a(k),b=n(59),x=a(b);u["default"].listen("gameInit",function(e){i["default"].set("stepType",l["default"].stepType),D(),e.firstInit&&((0,g["default"])(),(0,_["default"])())}),u["default"].listen("gameInited",function(){(0,x["default"])()}),u["default"].listen("moveEnd",function(){p["default"].checkTips()}),u["default"].listen("actionBreak",function(){p["default"].checkTips()}),u["default"].listen("startSession",function(){i["default"].set("sessionStarted",!0),f["default"].backup()}),u["default"].listen("stopSession",function(){i["default"].set("sessionStarted",!1),f["default"].backup()});var w=function(e){return e*e},P=[],O=function(){return i["default"].get("curLockState")},T=function(){i["default"].set("curLockState",!0)},D=function(){i["default"].set("curLockState",!1);for(var e in P)"function"==typeof P[e]&&P[e]();P=[]},C=function(){return i["default"].get("elements")},j=function(e){var t=i["default"].get("elements");return t[e]},M=function(e,t){var n=[],a=i["default"].get("elements");for(var r in a)a[r].name&&"string"==typeof a[r].name&&a[r].name==e&&(t&&"string"==typeof a[r].type&&t&&a[r].type==t?n.push(a[r]):n.push(a[r]));return n},E=function(e,t){if("string"!=typeof e)return!1;var n=e.slice(0,1),a=e.slice(1,3),r=null,i=l["default"].card.values[l["default"].card.ranks.indexOf(a)];for(var o in l["default"].card.colors)l["default"].card.colors[o].indexOf(n)>=0&&(r=o);return l["default"].card.suits.indexOf(n)>=0&&l["default"].card.ranks.indexOf(a)>=0&&{color:r,value:i,name:e,suit:n,rank:a}},S=0,I=function(){return S+=1};i["default"].set("animation",l["default"].animation);var R=function(){i["default"].set("animation",!0)},N=function(){i["default"].set("animation",l["default"].animation)},A=function(){i["default"].set("animation",!1)};u["default"].listen("newGame",function(){A()}),u["default"].listen("historyReapeater",function(e){e?(i["default"].set("noRedraw",!0),i["default"].set("noTips",!0)):(i["default"].set("noRedraw",!1),h["default"].Redraw(),i["default"].set("noTips",!1),p["default"].checkTips())});var B=function(e,t){for(var n in t)Group.getGroup(n).hasDeck()};i["default"].set("stepType",l["default"].stepType),t["default"]={isCurLock:O,curLock:T,curUnLock:D,getElements:C,getElementById:j,getElementsByName:M,validateCardName:E,genId:I,animationOn:R,animationOff:A,animationDefault:N,deckInGroups:B,sqr:w}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=a(o),s=n(2),l=(a(s),n(3)),d=(a(l),function(){function e(){r(this,e),this._state=null,this._sourceList=["elements","stepType"],this._clearList=["animatedCallback","animatedElements","animatedElementsStack","curLockState","sessionStarted","startCursor","lastCursorMove"]}return i(e,[{key:"backup",value:function(){this._state={};for(var e in this._sourceList)this._state[this._sourceList[e]]=u["default"].get(this._sourceList[e])}},{key:"restore",value:function(){if(this._state){for(var e in this._clearList)u["default"]["delete"](this._clearList[e]);for(var t in this._sourceList)u["default"].set(this._sourceList[t],this._state[this._sourceList[t]],!0)}}},{key:"get",value:function(){return this._state}}]),e}());t["default"]=new d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),o=n(1),u=a(o),s=n(3),l=a(s),d=n(5),f=(a(d),n(8)),c=a(f),p=n(9),v=a(p),h=n(12),y=a(h),m=n(10),g=a(m),k=l["default"].showTips,_=["tip","tipTo","tipPriority","tipToHome"],b=[],x=function(){return b},w=function(){if(u["default"].get("noTips"))return!1;i["default"].dispatch("hideTips");var e=y["default"].getDecks({visible:!0});if(b=(0,c["default"])({decks:e}),0===b.length&&u["default"].get("stepType")==l["default"].stepType&&i["default"].dispatch("noTips"),k){var t=g["default"].homeGroups;for(var n in b)0===b[n].to.count&&g["default"].tipsParams.hideOnEmpty||g["default"].tipsParams.excludeHomeGroups&&t&&t.length&&t.indexOf(b[n].from.deck.parent)>=0||i["default"].dispatch("showTip",{el:b[n].from.card,type:"tip"}),t.indexOf(b[n].to.deck.parent)>=0&&i["default"].dispatch("showTip",{el:b[n].from.card,type:"tipToHome"})}};i["default"].listen("makeStep",w),i["default"].listen("checkTips",w);var P=function(e){k=!0,e&&e.init||w()};i["default"].listen("tipsON",P);var O=function(e){k=!1,e&&e.init||w()};i["default"].listen("tipsOFF",O);var T=function(e){if(u["default"].get("showTipPriority")&&(i["default"].dispatch("hideTips",{types:["tipPriority"]}),u["default"].showTipPriority&&e&&e.moveDeck&&e.cursorMove&&e.cursorMove.distance&&e.cursorMove.distance>=u["default"].moveDistance)){var t=(0,v["default"])(e.moveDeck,e.cursorMove);t&&i["default"].dispatch("showTip",{el:t.to.deck,type:"tipPriority"})}},D=function(e){if(u["default"].get("showTipsDestination")&&(i["default"].dispatch("hideTips"),e&&e.currentCard&&e.currentCard.id))for(var t in b)b[t].from.card.id==e.currentCard.id&&i["default"].dispatch("showTip",{el:b[t].to.deck,type:"tipTo"})},C=function(e){for(var t in b)if(b[t].from.deck.name==e)return!0;return!1},j=function(e,t){for(var n in b)if(b[n].from.deck.name==e&&b[n].to.deck.name==t)return!0;return!1};t["default"]={tipTypes:_,getTips:x,checkTips:w,showTips:P,hideTips:O,tipsMove:T,checkFrom:C,fromTo:j,tipsDestination:D}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e),this._decks=null,this._moves=[]}return a(e,[{key:"get",value:function(e){this._decks=e.decks,this._moves=[];for(var t in this._decks){var n=this._decks[t].cards;this.cardsInTakeDeck(n,t)}return this._moves}},{key:"cardsInTakeDeck",value:function(e,t){for(var n in e){var a=e[n].id,r=this._decks[t].Take(a);r&&this.decksToPut(e,r,t,n)}}},{key:"decksToPut",value:function(e,t,n,a){for(var r in this._decks)if(n!=r){var i=this._decks[r].Put(t);i&&this.put(r,n,a,e)}}},{key:"put",value:function(e,t,n,a){var r=this._decks[e].cards,i=r.length?r[r.length-1]:null;this._moves.push({from:{deck:this._decks[t],card:a[n],count:a.length},to:{deck:this._decks[e],lastCard:i,count:r.length}})}}]),e}(),i=new r;t["default"]=function(e){return i.get(e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=(a(r),n(3)),o=a(i),u=n(5),s=a(u),l=n(7),d=a(l),f=n(10),c=a(f);t["default"]=function(e,t){var n=[],a=d["default"].getTips();for(var r in a)a[r].from.card.id==e[0].card.id&&n.push(a[r]);if(0==n.length)return!1;var i=0,u=0,l=-1,f=c["default"].homeGroups;if(f){var p=[];for(var v in f)for(var h in n)n[h].to.deck.parent==f[v]&&p.push(n[h]);p.length&&(n=p)}if(n.length>1){for(var y=0;y<n.length;y+=1){var m=[];n[y].to.deck.cardsCount()&&m.push(n[y]),m.length&&(n=m)}for(var g in n){var k={x:t.deckPosition.x+(o["default"].card.width/2|0),y:t.deckPosition.y+(o["default"].card.height/2|0)},_=n[g].to.deck.padding(n[g].to.deck.cards.length),b={x:_.x+(o["default"].card.width/2|0),y:_.y+(o["default"].card.height/2|0)};n[g].distance=Math.sqrt(s["default"].sqr(k.x-b.x)+s["default"].sqr(k.y-b.y)),n[g].inDirection=!1,(t.direction.x>0&&b.x>k.x||t.direction.x<0&&b.x<k.x)&&(n[g].inDirection=!0,u+=1)}for(var x in n)"-1"==l?0==u?l=n[x].distance:n[x].inDirection&&(l=n[x].distance,i=x):n[x].distance<l&&(0==u?(l=n[x].distance,i=x):n[x].inDirection&&(l=n[x].distance,i=x))}return n[i]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=a(o),s=n(2),l=a(s),d=n(3),f=a(d),c=n(5),p=(a(c),n(11)),v=a(p),h=n(12),y=a(h),m=n(7),g=a(m),k=n(51),_=a(k),b=n(54),x=a(b),w=function(){function e(){r(this,e),u["default"].set("elements",{}),this.tipsParams={},this.inputParams={}}return i(e,[{key:"create",value:function(e){if(this.homeGroups=e.homeGroups?e.homeGroups:[],"boolean"==typeof e.showTips&&e.showTips?g["default"].showTips({init:!0}):g["default"].hideTips({init:!0}),u["default"].set("stepType",f["default"].stepType),u["default"].set("showTipsDestination","boolean"==typeof e.showTipsDestination?e.showTipsDestination:f["default"].showTipsDestination),u["default"].set("showTipPriority","boolean"==typeof e.showTipPriority?e.showTipPriority:f["default"].showTipPriority),u["default"].set("moveDistance",e.moveDistance&&"number"==typeof e.moveDistance?e.moveDistance:f["default"].moveDistance),u["default"].set("winCheck",e.winCheck),u["default"].set("zoom",e.zoom&&"number"==typeof e.zoom?e.zoom:f["default"].zoom),e.preferences){var t=x["default"].get("pref"),n={},a={};for(var r in e.preferences)"string"==typeof r&&(n[r]=e.preferences[r],a[r]=t&&void 0!==t[r]?t[r]:e.preferences[r].value);u["default"].set("gamePreferences",n),u["default"].set("gamePreferencesData",a)}else u["default"].set("gamePreferences",{});u["default"].set({animationTime:"number"==typeof e.animationTime?e.animationTime:f["default"].animationTime});for(var i in f["default"].tipsParams)this.tipsParams[i]=e.tipsParams&&void 0!==e.tipsParams[i]?e.tipsParams[i]:f["default"].tipsParams[i];for(var o in f["default"].inputParams)this.inputParams[o]=e.inputParams&&void 0!==e.inputParams[o]?e.inputParams[o]:f["default"].inputParams[o];if(e.startZIndex&&"number"==typeof e.startZIndex&&u["default"].set("start_z_index",e.startZIndex),e.autoSteps&&(this.autoSteps=(0,_["default"])(e.autoSteps)),l["default"].dispatch("initField",e),e.groups)for(var s in e.groups)e.groups[s].name=s,v["default"].add(e.groups[s]);if(e.decks)for(var d in e.decks)y["default"].addDeck(e.decks[d]);if(e.fill){var c=y["default"].getDecks(),p=null;try{p=Object.assign([],e.fill)}catch(d){p=e.fill}for(;p.length;)for(var h in c)if(p.length){var m=p.shift();c[h].Fill([m])}}g["default"].checkTips(),l["default"].dispatch("newGame")}},{key:"Redraw",value:function(e){if(e){for(var t in e.groups){var n=v["default"].getGroup(t);n&&n.Redraw(e.groups[t])}for(var a in e.decks){var r=y["default"].getDeck(e.decks[a].name);r&&r.Redraw(e.decks[a])}}else{var i=y["default"].getDecks();for(var o in i)i[o].Redraw()}}},{key:"clear",value:function(){var e=u["default"].get("elements");for(var t in e)"deck"==e[t].type?(e[t].clear(),e[t]=null):"group"==e[t].type&&(e[t]=null);u["default"].set("elements",{})}}]),e}();t["default"]=new w},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),u=(a(o),n(1)),s=a(u),l=n(3),d=a(l),f=n(5),c=a(f),p=n(12),v=a(p),h=n(38),y=a(h),m=n(39),g=a(m),k=n(40),_=a(k),b={paddingType:{type:"any"},flip:{type:"any"},showSlot:{type:"any"},takeRules:{type:"any"},putRules:{type:"any"},fillRule:{type:"any"},autoHide:{type:"any"},paddingX:{type:"any"},paddingY:{type:"any"},flipPaddingX:{type:"any"},flipPaddingY:{type:"any"},actions:{type:"any"},save:{type:"boolean","default":!0}},x=function(){function e(t,n){r(this,e),this.type="group",this.id=n,this.name=t.name&&"string"==typeof t.name?t.name:"name_"+n,this.position={x:t.position&&t.position.x&&"number"==typeof t.position.x?t.position.x:0,y:t.position&&t.position.y&&"number"==typeof t.position.y?t.position.y:0},this.placement=t.placement?{x:t.placement.x?t.placement.x:0,y:t.placement.y?t.placement.y:0}:null,this.decks={},this.parameters={};for(var a in b)"any"==b[a].type?this.parameters[a]=t[a]?t[a]:d["default"][a]:"boolean"==b[a].type&&(this.parameters[a]="boolean"==typeof t[a]?t[a]:b[a]["default"]);this.deckIndex=[]}return i(e,[{key:"addDeck",value:function(e){if(e){e.position||(e.position={x:0,y:0}),e.parent||(e.parent=this.name),e.parentPosition={x:this.position.x,y:this.position.y};var t=0;if(e.groupIndex&&decks[this.deckIndex[e.groupIndex-1]]["this"].deckIndex==e["this"].deckIndex&&"number"==typeof e.groupIndex&&this.deckIndex[e.groupIndex-1]&&(e.groupIndex=null),e.groupIndex&&"number"==typeof e.groupIndex)if(this.deckIndex[e.groupIndex-1]){for(;void 0!==this.deckIndex[t];t+=1);if(placement){var n=this.deckIndex[e.groupIndex-1],a=s["default"].get("elements");placement.x&&a[n].x(this.position.x+(placement.x+d["default"].card.width)*n),placement.y&&a[n].y(this.position.y+(placement.y+d["default"].card.width)*n),s["default"].set("elements",a)}this.deckIndex[t]=this.deckIndex[e.groupIndex-1],this.deckIndex[e.groupIndex-1]=!0,t=e.groupIndex-1}else this.deckIndex[e.groupIndex-1]=!0,t=e.groupIndex-1;else{for(;void 0!==this.deckIndex[t];t+=1);this.deckIndex[t]=!0}this.placement&&(this.placement.x&&(e.position.x=(this.placement.x+d["default"].card.width)*t),this.placement.y&&(e.position.y=(this.placement.y+d["default"].card.height)*t));for(var r in b)"any"==b[r].type?this.parameters[r]&&void 0===e[r]&&(e[r]=this.parameters[r]):"boolean"==b[r].type&&(e[r]=this.parameters[r]);var i=v["default"].addDeck(e);this.deckIndex[t]=i.id,this.decks[i.id]=i}}},{key:"Fill",value:function(e){y["default"].call(this,e)}},{key:"getDeckById",value:function(e){return this.decks[e]}},{key:"getDecksByName",value:function(e){var t={};for(var n in this.decks)this.decks[n].name==e&&(t[n]=decks[n]);return t}},{key:"getDecks",value:function(e){var t=[];for(var n in this.decks)e&&e.visible?this.decks[n].visible&&t.push(this.decks[n]):t.push(this.decks[n]);return t}},{key:"Redraw",value:function(e){(0,g["default"])(this,e)}},{key:"hasDeck",value:function(e){var t=!1;for(var n in decks)decks[n].name==e&&(t=!0);return t}}]),e}(),w=function(e){if(!e)return!1;var t="group_"+c["default"].genId(),n=new x(e,t);if(e.decks){if("number"==typeof e.decks&&(e.decks={generator:{type:"count",count:e.decks}}),e.decks.generator){if(!e.decks.generator.type)return;if(!_["default"][e.decks.generator.type])return;e.decks=_["default"][e.decks.generator.type].call(n,e.decks.generator),e.placement=null}for(var a in e.decks)for(var r in e.decks[a].relations){var i=null;try{i=Object.assign({},e.decks[a].relations[r])}catch(o){i=e.decks[a].relations[r]}for(var u in e.decks)e.decks[u].name==i.to&&(i.to=null,i.from=e.decks[a].name,e.decks[u].relations.push(i))}for(var l in e.decks)n.addDeck(e.decks[l])}var d=s["default"].get("elements");if(d[t]=n,s["default"].set("elements",d),e&&e.fill){var f=e.fill.length;f&&n.Fill(e.fill)}return n},P=function(e){return c["default"].getElementsByName(e,"group")[0]};t["default"]={add:w,getGroup:P}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),u=a(o),s=n(1),l=a(s),d=n(3),f=a(d),c=n(5),p=a(c),v=n(13),h=a(v),y=n(14),m=a(y),g=n(16),k=(a(g),n(17)),_=a(k),b=n(18),x=a(b),w=n(19),P=a(w),O=n(30),T=a(O),D=n(31),C=a(D),j=n(32),M=a(j),E=n(11),S=a(E),I=n(33),R=a(I),N=n(34),A=a(N),B=n(35),X=a(B),Y=n(36),L=a(Y),F=n(37),z=a(F),G=function(){function e(t,n){var a=this;if(r(this,e),!t)return!1;this.cards=[],this.type="deck",this.fill=!1,this.id=n;var i=S["default"].getGroup(t.parent),o=i?i.name:"xname",s=i?i.getDecks().length:n;this.name=t.name&&"string"==typeof t.name?t.name:o+"_"+s,this.locked=!!t.locked,this.save=!!t.save,this.visible=!t.visible||"boolean"!=typeof t.visible||t.visible,this.groupIndex=t.groupIndex&&"number"==typeof t.groupIndex?t.groupIndex:null,this.parent=t.parent&&"string"==typeof t.parent?t.parent:"field",this.autoHide=t.autoHide&&"boolean"==typeof t.autoHide?t.autoHide:f["default"].autohide,void 0===t.showSlot&&(t.showSlot=f["default"].showSlot),this._params={padding_y:t.paddingY&&"number"==typeof t.paddingY?t.paddingY:f["default"].padding_y,flip_padding_y:t.flipPaddingY&&"number"==typeof t.flipPaddingY?t.flipPaddingY:f["default"].flip_padding_y,padding_x:t.paddingX&&"number"==typeof t.paddingX?t.paddingX:f["default"].padding_x,flip_padding_x:t.flipPaddingX&&"number"==typeof t.flipPaddingX?t.flipPaddingX:f["default"].flip_padding_x,startZIndex:t.startZIndex&&"number"==typeof t.startZIndex?t.startZIndex:f["default"].startZIndex,rotate:this.rotate=0,x:0,y:0};var l=t.flip&&"string"==typeof t.flip?t.flip:f["default"].flip_type;this.cardFlipCheck=h["default"][l],this.putRules=t.putRules?"function"==typeof t.putRules?t.putRules:"string"==typeof t.putRules?m["default"][t.putRules]?m["default"][t.putRules]:m["default"][f["default"].putRule]:t.putRules.constructor==Array?t.putRules:m["default"][f["default"].putRule]:m["default"][f["default"].putRule],this.takeRules=t.takeRules,this.fillRules=null,t.fillRule&&!t.fillRules&&(t.fillRules=[t.fillRule]),t.fillRules&&(this.fillRules=t.fillRules);var d=t.paddingX||t.paddingY?x["default"].special:t.paddingType?"string"==typeof t.paddingType&&x["default"][t.paddingType]?x["default"][t.paddingType]:x["default"].none:x["default"][f["default"].paddingType];this.padding=function(e){var t=d(this._params,this.cards[e],e,this.cards.length,this.cards);return t},this.actions=[],t.actions&&(this.actions=t.actions,P["default"].add(this)),t.relations?this.relations=t.relations:this.relations=[],this.tags=t.tags?t.tags:[],u["default"].dispatch("addDeckEl",{deckData:t,deck:this,params:this._params});var c=function(e){e.destination.name==a.name&&a.checkFill()};u["default"].listen("moveDragDeck",c)}return i(e,[{key:"Redraw",value:function(e){u["default"].dispatch("redrawDeck",{deck:this,data:e,params:this._params,cards:this.cards})}},{key:"getTopCard",value:function(){return 0!==this.cards.length&&this.cards[this.cards.length-1]}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"flipCheck",value:function(){for(var e in this.cards)this.cardFlipCheck(this.cards[e],0|e,this.cards.length);u["default"].dispatch("redrawDeckFlip",this)}},{key:"checkFill",value:function(){if(!this.fill){var e=!0;for(var t in this.fillRules)_["default"][t]&&(e=e&&!_["default"][t](this));this.fill=!e}}},{key:"Fill",value:function(e){for(var t in e)this.genCardByName(e[t])}},{key:"clear",value:function(){for(var e in this.cards)u["default"].dispatch("removeEl",this.cards[e]),this.cards[e]=null;this.cards=[],u["default"].dispatch("removeEl",this)}},{key:"Push",value:function(e){for(var t in e)e[t].parent=this.id,this.cards.push(e[t])}},{key:"Pop",value:function(e,t){if(this.cards.length<e)return!1;for(var n=[];e;e-=1){var a=this.cards.pop();t&&(a.parent=null),n.push(a),n[n.length-1].parent=null}return n.reverse(),this.autoHide&&0===this.cards.length&&this.hide(),this.Redraw(),n}},{key:"Take",value:function(e){return T["default"].call(this,e)}},{key:"Put",value:function(e){return C["default"].call(this,e)}},{key:"genCardByName",value:function(e){return M["default"].call(this,e)}},{key:"hide",value:function(){this.visible=!1,R["default"].add({hideDeck:this.name}),this.Redraw()}},{key:"show",value:function(){this.visible=!1,R["default"].add({showDeck:this.name}),this.Redraw()}},{key:"getCardsByName",value:function(e){var t=[];for(var n in this.cards)this.cards[n].name==e&&t.push(this.cards[n]);return t}},{key:"Card",value:function(e){return this.getCardsByName(e)[0]}},{key:"hideCards",value:function(){for(var e in this.cards)this.cards[e].visible=!1,u["default"].dispatch("hideCard",this.cards[e])}},{key:"showCards",value:function(){for(var e in this.cards)this.cards[e].visible=!0,u["default"].dispatch("showCard",this.cards[e])}},{key:"getCardsNames",value:function(){var e=[];for(var t in this.cards)e.push(this.cards[t].name);return e}},{key:"cardsCount",value:function(){return this.cards.length}},{key:"getRelationsByName",value:function(e,t){var n=[];for(var a in this.relations)if(this.relations[a].name==e)if(t){var r=0,i=0;for(var o in t)i+=1,this.relations[a][o]==t[o]&&(r+=1);r==i&&n.push(this.relations[a])}else n.push(this.relations[a]);return n}},{key:"hasTag",value:function(e){for(var t in this.tags)if(this.tags[t]==e)return!0;return!1}}]),e}(),H=function(e){if(!e)return!1;var t="deck_"+p["default"].genId(),n=null;try{n=Object.assign({},e)}catch(a){n=e}var r=new G(n,t);if(e.fill)for(var i in e.fill)"string"==typeof e.fill[i]&&r.genCardByName(e.fill[i]);var o=l["default"].get("elements");return o[t]=r,l["default"].set("elements",o),r};t["default"]={deckCardNames:L["default"],addDeck:H,getDeck:z["default"],getDecks:A["default"],getDeckById:X["default"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={none:function(e,t,n){e.flip=!1},all:function(e,t,n){e.flip=!0},notlast:function(e,t,n){e.flip=t<n-1},first_1:function(e,t,n){e.flip=t<1},first_2:function(e,t,n){e.flip=t<2},first_3:function(e,t,n){e.flip=t<3},bee:function(e,t,n){e.flip=t!=n-1&&t%2==0}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(3),u=a(o),s=n(12),l=a(s),d=n(15),f=a(d),c={linePrev:function(e){var t=(0,f["default"])(e.to).prev;return!!t&&(e.link=t.to,!0)},lineNext:function(e){var t=(0,f["default"])(e.to).next;return!!t&&(e.link=t.to,!0)},_downupcards:function(e){if(0==e.cards.length)return!1;var t=i["default"].validateCardName(e.cards[e.cards.length-1].name),n=i["default"].validateCardName(e.putDeck[0].card.name);
return!(!t||!n)&&{up:n,down:t}},_downupranknum:function(e){var t=c._downupcards(e);return!!t&&{down:u["default"].card.ranks.indexOf(t.down.rank),up:u["default"].card.ranks.indexOf(t.up.rank)}},_isFirst:function(e,t){if(0==e.cards.length){var n=null;return(n=i["default"].validateCardName(e.putDeck[0].card.name))&&n.rank==t}return!0},striped:function(e){if(0==e.cards.length)return!0;var t=i["default"].validateCardName(e.cards[e.cards.length-1].name).color,n=null,a=null;return(a=i["default"].validateCardName(e.putDeck[0].card.name))&&(n=a.color),t!=n},firstAce:function(e){return c._isFirst(e,u["default"].card.ranks[0])},firstKing:function(e){return c._isFirst(e,u["default"].card.ranks[u["default"].card.ranks.length-1])},notForEmpty:function(e){return e.cards.length},onlyEmpty:function(e){return 0===e.cards.length},oneRank:function(e){if(0==e.cards.length)return!0;var t=c._downupcards(e);return t&&t.up.rank==t.down.rank},oneSuit:function(e){if(0==e.cards.length)return!0;var t=c._downupcards(e);return t&&t.up.suit==t.down.suit},any:function(e){return!0},not:function(e){return!1},ascendDeck:function(e){if(1==e.putDeck.length)return!0;var t=!0;for(var n in e.putDeck)if(n>0){var a=u["default"].card.ranks.indexOf(i["default"].validateCardName(e.putDeck[n-1].card.name).rank),r=u["default"].card.ranks.indexOf(i["default"].validateCardName(e.putDeck[n].card.name).rank);t=t&&1+a==r}return t},descendDeck:function(e){if(1==e.putDeck.length)return!0;var t=!0;for(var n in e.putDeck)if(n>0){var a=u["default"].card.ranks.indexOf(i["default"].validateCardName(e.putDeck[n-1].card.name).rank),r=u["default"].card.ranks.indexOf(i["default"].validateCardName(e.putDeck[n].card.name).rank);t=t&&a==1+r}return t},oneRankDeck:function(e){if(1==e.putDeck.length)return!0;var t=!0;for(var n in e.putDeck)if(n>0){var a=i["default"].validateCardName(e.putDeck[n-1].card.name).suit,r=i["default"].validateCardName(e.putDeck[n].card.name).suit;t=t&&a==r}return t},ascend:function(e){if(0==e.cards.length)return!0;var t=c._downupranknum(e);return t&&t.down<t.up},descent:function(e){if(0==e.cards.length)return!0;var t=c._downupranknum(e);return t&&t.down>t.up},descentOne:function(e){if(0==e.cards.length)return!0;var t=c._downupranknum(e);return t&&t.down==1+t.up},ascendOne:function(e){if(0==e.cards.length)return!0;var t=c._downupranknum(e);return t&&1+t.down==t.up},ascdescOne:function(e){if(0==e.cards.length)return!0;var t=c._downupranknum(e);return t&&1==Math.abs(t.down-t.up)},sum14:function(e){if(0==e.cards.length)return!0;var t=c._downupcards(e),n=t.down.value+t.up.value;return 14==n},around:function(e){if(0==e.cards.length)return!0;var t=e.from.deck.getRelationsByName("around",{from:null}),n=l["default"].getDeckById(e.cards[0].parent);for(var a in t)if(t[a].to==n.name)return!0;return!1}};t["default"]=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=e.getRelationsByName("beside",{from:null,type:"prev"})[0],n=e.getRelationsByName("beside",{from:null,type:"next"})[0];return{prev:t,next:n}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={not:function(e){return!1},notFirst:function(e){return e.cardIndex>0},any:function(e){return!0},onlytop:function(e){return e.cardIndex==e.deckLength-1}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=r(i),u=n(5),s=r(u),l=n(12),d=r(l),f=n(7),c=r(f),p=n(15),v=r(p),h={_top:function(e){var t=e.getTopCard();return t&&s["default"].validateCardName(t).rank},_prev_next_desc_ask:function(e,t,n){for(var r=!0,i=(0,v["default"])(a.to)[t],o=e.getTopCard();i&&r;){var u=d["default"].getDeck(i);_card=u.getTopCard(),r=r&&_card&&n(s["default"].validateCardName(o).value,0|s["default"].validateCardName(_card).value),o=_card,i=(0,v["default"])(u)[t]}return r},deckLength:function(e){return o["default"].card.ranks.length<=e.cards.length},not:function(){return!1},noMoves:function(e){return!c["default"].checkFrom(e.name)},topAce:function(e){return h._top(e)==o["default"].card.ranks[0]},topKing:function(e){return h._top(e)==o["default"].card.ranks[o["default"].card.ranks.length-1]},prevDescOne:function(e){return h._prev_next_desc_ask(e,"prev",function(e,t){return e==(0|t)+1})},prevAscOne:function(e){return h._prev_next_desc_ask(e,"prev",function(e,t){return(0|e)+1==t})},nextDescOne:function(e){return h._prev_next_desc_ask(e,"next",function(e,t){return e==(0|t)+1})},nextAscOne:function(e){return h._prev_next_desc_ask(e,"next",function(e,t){return(0|e)+1==t})},prevDesc:function(e){return h._prev_next_desc_ask(e,"prev",function(e,t){return e>t})},prevAsc:function(e){return h._prev_next_desc_ask(e,"prev",function(e,t){return e<t})},nextDesc:function(e){return h._prev_next_desc_ask(e,"next",function(e,t){return e>t})},nextAsc:function(e){return h._prev_next_desc_ask(e,"next",function(e,t){return e<t})}};t["default"]=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={none:function(e,t,n,a,r){return{x:e.x,y:e.y}},last_three_min:function(e,t,n,a,r){return n>a-3?a>3?{x:e.x-2*(a-3-n),y:e.y-(a-3-n)}:{x:e.x+2*n,y:e.y+(0|n)}:{x:x,y:y}},twindeck_typeA:function(e,t,n,a,r){var i=24,o=3,u={x:2,y:1},s=a/i*o|0;s>=o&&(s=o-1);var l=n-(a-s-1);return l<0&&(l=0),{x:e.x+u.x*l,y:e.y+u.y*l}},radial:function(e,t,n,a,r){var i=1,o=n*i,u=e.rotate,s=Math.PI/180,l=Math.sin(u*s)*o,d=Math.cos(u*s)*o;return{x:e.x+l,y:e.y-d}},special:function(e,t,n,a,r){for(var i=e.y,o=e.x,u=0;u<n;u+=1)i+=r[u]&&r[u].flip?e.flip_padding_y:e.padding_y,o+=r[u]&&r[u].flip?e.flip_padding_x:e.padding_x;return{x:o,y:i}},vertical:function(e,t,n,a,r){for(var i=e.y,o=0;o<n;o+=1)i+=r[o]&&r[o].flip?e.flip_padding_y:e.padding_y;var u={x:e.x,y:i};return u},horizontal:function(e,t,n,a,r){for(var i=e.x,o=0;o<n;o+=1)i+=r[o]&&r[o].flip?e.flip_padding_x:e.padding_x;var u={x:i,y:e.y};return u}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),o=n(1),u=(a(o),n(3)),s=(a(u),n(5)),l=a(s),d=n(20),f=a(d),c=n(22),p=a(c),v=n(24),h=a(v),y=n(25),m=a(y),g=n(26),k=a(g),_=n(27),b=a(_),x=n(29),w=a(x),P={twindeck:f["default"],dealerdeck:p["default"],kick:h["default"],stepsAround:m["default"],changeStepType:k["default"],lock:b["default"],unlock:w["default"]},O=[],T=[];i["default"].listen("initField",function(){O=[],T=[]});var D=function(e){i["default"].listen(e,function(t){for(var n in O)if(O[n].event==e){var a=O[n].action,r="click"!=e||t.to.name==O[n].deck.name;r&&P[a].run(O[n].deck,{actionData:O[n].deck.actions[a],eventData:t,eventName:e})}},"addActionEvent:"+e)},C=function(e){for(var t in e.actions)e.actions[t].event||(e.actions[t].event="click"),P[t]&&(O.push({deck:e,event:e.actions[t].event,action:t}),T.indexOf(e.actions[t].event)<0&&(T.push(e.actions[t].event),D(e.actions[t].event)));j(e)},j=function(e){l["default"].animationDefault();for(var t in e.actions)e.actions[t].autorun&&P[t]&&P[t].run(e,{actionData:e.actions[t],eventData:null,eventName:e.actions[t].event})};t["default"]={add:C}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function c(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},l=n(21),d=a(l),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),u(t,[{key:"run",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this)}}]),t}(d["default"]);t["default"]=new f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),u=a(o),s=function(){function e(){r(this,e)}return i(e,[{key:"run",value:function(){}},{key:"end",value:function(){u["default"].dispatch("stopSession")}},{key:"break",value:function(){}}]),e}();t["default"]=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function w(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},l=n(2),d=a(l),f=n(1),c=a(f),p=n(3),v=a(p),h=n(5),y=a(h),m=n(23),g=a(m),k=n(21),_=a(k),b="dealerdeckStepType",x=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),u(t,[{key:"run",value:function(e,n){if("string"==typeof n.actionData.stepType&&n.actionData.stepType!=c["default"].get("stepType"))return void s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"break",this).call(this);c["default"].set("stepType",b);var a="string"==typeof n.actionData.from?Deck.getDeck(n.actionData.from):e;if(0==a.cards.length)return c["default"].set("stepType",v["default"].stepType),d["default"].dispatch("actionBreak"),d["default"].dispatch("dealEnd"),void s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this);var r=[];if(n.actionData.toGroup&&!n.actionData.to&&(n.actionData.to=n.actionData.toGroup),n.actionData.to)if("string"==typeof n.actionData.to){var i=y["default"].getElementsByName(n.actionData.to);for(var o in i){if("group"==i[o].type)for(var u in i[o].decks)r.push(i[o].decks[u]);"deck"==i[o].type&&r.push(_el)}}else for(var l in n.actionData.to){var f=y["default"].getElementsByName(n.actionData.to[l]);for(var p in f){if("group"==f[p].type)for(var h in f[p].decks)r.push(f[p].decks[h]);"deck"==f[p].type&&r.push(f[p])}}y["default"].animationDefault();var m=!1;for(var k in r){var _=a.getTopCard(),x=!n.actionData.onlyEmpty||0==r[k].cards.length;if(x&&_){m=!0;var w=_.name,P=function(){d["default"].dispatch("checkTips")};(0,g["default"])({from:a.name,to:r[k].name,deck:[w],flip:!0,callback:P},!0),r[k].flipCheck(),d["default"].dispatch("dealEnd"),d["default"].dispatch("addStep",{move:{from:a.name,to:r[k].name,deck:[w],flip:!0,stepType:{undo:c["default"].get("stepType"),redo:n.actionData.dispatch?c["default"].get("stepType"):v["default"].stepType},context:"dealerdeckAction"}})}}m&&d["default"].dispatch("saveSteps"),n.actionData.dispatch?d["default"].dispatch(n.actionData.dispatch,!m):(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this),c["default"].set("stepType",v["default"].stepType))}}]),t}(_["default"]);t["default"]=new x},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),o=n(1),u=(a(o),n(5)),s=(a(u),n(12)),l=a(s),d=n(7),f=(a(d),function(e){if(e.from&&e.to&&e.deck&&e.deck.length){var t="string"==typeof e.from?l["default"].getDeck(e.from):e.from,n="string"==typeof e.to?l["default"].getDeck(e.to):e.to;if(t&&"deck"==t.type&&n&&"deck"==n.type){var a=!0,r=t.cards;for(var o in r)if(o>=r.length-e.deck.length){var u=o-(0|r.length)+(0|e.deck.length);e.deck[u]&&r[o].name!=e.deck[u]&&(a=!1)}if(a){var s=t.Pop(e.deck.length);if(e.flip)for(var d in s)s[d].flip=!s[d].flip;n.Push(s);var f=[];for(var c in s)f.push({card:s[c]});var p={moveDeck:f,departure:t,destination:n};"function"==typeof e.callback?p.callback=function(){i["default"].dispatch("forceMoveEnd"),e.callback()}:p.callback=function(){i["default"].dispatch("forceMoveEnd")},i["default"].dispatch("moveDragDeck",p)}}}});i["default"].listen("forceMove",function(e){f(e)}),t["default"]=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function b(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:b(r,t,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},l=n(2),d=a(l),f=n(1),c=a(f),p=n(5),v=a(p),h=n(3),y=a(h),m=n(21),g=a(m),k="kickStepType",_=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),u(t,[{key:"run",value:function(e,n){var a=this;if(c["default"].get("stepType")!=y["default"].stepType)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"break",this).call(this),!1;if("string"==typeof n.eventData.stepType&&n.eventData.stepType!=y["default"].stepType)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"break",this).call(this),!1;if(n.eventData.to.name!=e.name)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"break",this).call(this),!1;c["default"].set("stepType",k),v["default"].animationDefault();var r=n.eventData.to,i=r.getCardsNames(),o=function(){var e=function(e){d["default"].dispatch("addStep",{move:{from:r.name,to:n.actionData.to,deck:i,flip:!0,stepType:{undo:e.undo,redo:e.redo},context:"kickAction"}})};c["default"].set("stepType",y["default"].stepType),n.actionData.dispatch?d["default"].dispatch(n.actionData.dispatch,{before:function(t){e({undo:k,redo:t.stepType}),d["default"].dispatch("saveSteps")}}):(e({undo:k,redo:n.actionData.dispatch?c["default"].get("stepType"):y["default"].stepType}),d["default"].dispatch("saveSteps"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",a).call(a))},u={from:r,to:n.actionData.to,deck:i,flip:!0,callback:o};d["default"].dispatch("forceMove",u)}}]),t}(g["default"]);t["default"]=new _},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function P(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:P(r,t,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},l=n(2),d=a(l),f=n(1),c=a(f),p=n(5),v=a(p),h=n(3),y=a(h),m=n(21),g=a(m),k=n(7),_=a(k),b=n(12),x=(a(b),"stepsAround"),w=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),u(t,[{key:"run",value:function(e,n){var a=this,r=c["default"].get("stepType");if(r!=y["default"].stepType)return void s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"break",this).call(this);c["default"].set("stepType",x),v["default"].curLock();var i=e.getRelationsByName("around",{from:null});_["default"].getTips();if("string"==typeof n.actionData.run)!function(){var t="boolean"!=typeof n.actionData.central||n.actionData.central,r=[];for(var o in i)_["default"].fromTo(e.name,i[o].to)&&r.push(i[o]);var u=r.length,s=function(){u-=1,0===u&&a.end()};0===u?a.end():t&&(u+=1,d["default"].dispatch(n.actionData.run,{to:e.name,callback:s}));for(var l in r){var f=null;try{f=Object.assign({},r[l])}catch(c){f=r[l]}f.callback=s,d["default"].dispatch(n.actionData.run,f)}}();else{var o=function(){c["default"].get("stepType")==x&&a.end()};d["default"].listen("makeStep",o)}}},{key:"end",value:function(){c["default"].set("stepType",y["default"].stepType),v["default"].curUnLock(),data.actionData.dispatch&&d["default"].dispatch(data.actionData.dispatch,data.eventData),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this)}}]),t}(g["default"]);t["default"]=new w},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function m(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},l=n(2),d=(a(l),n(1)),f=a(d),c=n(3),p=(a(c),n(5)),v=(a(p),n(21)),h=a(v),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),u(t,[{key:"run",value:function(e,n){return n.eventData.to.name==e.name&&("string"!=typeof n.actionData.to?void s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this):(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this),void f["default"].set("stepType",n.actionData.to)))}}]),t}(h["default"]);t["default"]=new y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},l=n(2),d=(a(l),n(1)),f=(a(d),n(3)),c=(a(f),n(5)),p=(a(c),n(21)),v=a(p),h=n(28),y=a(h),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),u(t,[{key:"run",value:function(e,n){return n.eventData.to.name==e.name&&((0,y["default"])(n.actionData,"lock",e.name),void s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this))}}]),t}(v["default"]);t["default"]=new m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),o=n(1),u=(a(o),n(3)),s=(a(u),n(5)),l=a(s);t["default"]=function(e,t,n){var a=[];if("string"!=typeof e.source)if(e.source&&e.source.constructor==Array)for(var r in e.source)a.push(e.source[r]);else a=[n];else a=[e.source];if(e.save){var o={};o[t]=a,i["default"].dispatch("addStep",o),i["default"].dispatch("saveSteps")}for(var u in a){var s=l["default"].getElementsByName(a[u])[0];if("group"==s.type){var d=s.getDecks();for(var f in d)d[f][t]()}"deck"==s.type&&s[t]()}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},l=n(2),d=(a(l),n(1)),f=(a(d),n(3)),c=(a(f),n(5)),p=(a(c),n(21)),v=a(p),h=n(28),y=a(h),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),u(t,[{key:"run",value:function(e,n){return n.eventData.to.name==e.name&&((0,y["default"])(n.actionData,"unlock",e.name),void s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this))}}]),t}(v["default"]);t["default"]=new m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=!0;//!common.isLock();
t=t&&!this.locked,"boolean"==typeof this.fill&&(t=t&&!this.fill);var n=-1,a=null,r=null,i=null,u=this.cards.length,l=[];for(var f in this.cards){if(this.cards[f].id==e){n=0|f,a=this.cards[f].name;var c=s["default"].validateCardName(a);t=t&&c,c&&(r=c.suit,i=c.rank),t=t&&!this.cards[f].flip&&this.cards[f].flip==o["default"].canMoveFlip}n>=0&&l.push({index:f,card:this.cards[f]})}var p={cardId:e,cardName:a,cardSuit:r,cardRank:i,cardIndex:n,deckLength:u};for(var v in this.takeRules){var h=this.takeRules[v];t=!!d["default"][h]&&(t&&d["default"][h](p))}return t=t&&n>=0,t=t&&l};var r=n(1),i=(a(r),n(3)),o=a(i),u=n(5),s=a(u),l=n(16),d=a(l)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=i["default"].get("stepType"),n=!0,a=e[0].card.parent,r=f["default"].getDeckById(a);if(n=n&&!this.locked,t!=u["default"].stepType)n=!!(n&&l["default"].autoSteps&&l["default"].autoSteps[t])&&l["default"].autoSteps[t].manual({putDeck:e,to:this});else{var o=null,s=this;for(var d in this.putRules)if(n){o&&(s=f["default"].getDeck(o));var c=this.putRules[d];if(p["default"][c]){var v={from:{deckId:a,deck:r},putDeck:e,cards:s.cards,to:s,link:o};n=n&&p["default"][c](v),o=v.link}else n=!1}}return n};var r=n(1),i=a(r),o=n(3),u=a(o),s=n(10),l=a(s),d=n(12),f=a(d),c=n(14),p=a(c)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=l["default"].validateCardName(e);if(t){var n="card_"+l["default"].genId(),a={id:n,name:e,type:"card",visible:!0,flip:!1};a.parent=this.id,i["default"].dispatch("addCardEl",a);var r=u["default"].get("elements");return r[n]=a,u["default"].set("elements",r),this.Push([a]),this.flipCheck(),this.Redraw(),a}return!1};var r=n(2),i=a(r),o=n(1),u=a(o),s=n(5),l=a(s)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),u=a(o),s=n(1),l=a(s),d=n(5),f=a(d),c=n(6),p=a(c),v=n(23),h=a(v),y=n(12),m=(a(y),n(7)),g=a(m),k=n(10),_=a(k),b=function(e){if(l["default"].get("sessionStarted")&&(p["default"].restore(),_["default"].Redraw()),void 0!==e.lock)for(var t in e.lock){var n=f["default"].getElementsByName(e.lock[t]);for(var a in n)n[a].unlock()}if(void 0!==e.unlock)for(var r in e.lock){var i=f["default"].getElementsByName(e.lock[r]);for(var o in i)i[o].lock()}void 0!==e.move&&void 0!==e.move.from&&void 0!==e.move.to&&void 0!==e.move.deck&&(e.move.stepType&&("string"==typeof e.move.stepType&&l["default"].set("stepType",e.move.stepType),"string"==typeof e.move.stepType.undo&&l["default"].set("stepType",e.move.stepType.undo)),(0,h["default"])({from:e.move.to,to:e.move.from,deck:e.move.deck,flip:e.move.flip}))};u["default"].listen("undo",function(e){if(u["default"].dispatch("stopAnimations"),e){if(e instanceof Array){e.reverse();for(var t in e){var n=e[t];b(n)}}else b(e);g["default"].checkTips()}});var x=function(e){if(void 0!==e.lock)for(var t in e.lock){var n=f["default"].getElementsByName(e.lock[t]);for(var a in n)n[a].lock()}if(void 0!==e.unlock)for(var r in e.unlock){var i=f["default"].getElementsByName(e.lock[r]);for(var o in i)i[o].unlock()}void 0!==e.move&&void 0!==e.move.from&&void 0!==e.move.to&&void 0!==e.move.deck&&(e.move.stepType&&("string"==typeof e.move.stepType&&l["default"].set("stepType",e.move.stepType),"string"==typeof e.move.stepType.redo&&l["default"].set("stepType",e.move.stepType.redo)),(0,h["default"])(e.move)),e.redo&&"string"==typeof e.redo.stepType&&l["default"].set("stepType",e.redo.stepType)};u["default"].listen("redo",function(e){if(u["default"].dispatch("stopAnimations"),e){if(e instanceof Array){e.reverse();for(var t in e){var n=e[t];x(n)}}else x(e);g["default"].checkTips()}});var w=function(){function e(){r(this,e),this.steps=[]}return i(e,[{key:"reset",value:function(){this.steps=[]}},{key:"add",value:function(e){this.steps.push(e)}},{key:"get",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=this.steps;return e&&this.reset(),t}},{key:"log",value:function(){}},{key:"count",value:function(){return this.steps.length}}]),e}(),P=new w;u["default"].listen("addStep",function(e){P.add(e)}),u["default"].listen("saveSteps",function(){u["default"].dispatch("makeStep",P.get())}),t["default"]=P},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r);t["default"]=function(e){var t={},n=i["default"].get("elements");if(!e||!e.visible)return n;for(var a in n)"deck"==n[a].type&&n[a].visible&&(t[a]=n[a]);return t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r);t["default"]=function(e){var t=i["default"].get("elements");return t[e]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=[];for(var n in e)e[n].card&&e[n].card.name?t.push(e[n].card.name):e[n].name&&t.push(e[n].name);return t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r);t["default"]=function(e,t){var n=i["default"].getElementsByName(e,"deck");if(t&&"string"==typeof t){for(var a in n){var r=i["default"].getElementById(n[a].parent());if(r&&r.name&&r.name==t)return n[a]}return!1}return n[0]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=[],n=0;for(var a in this.decks)n+=1,t.push(null);for(var r in this.decks)this.decks[r].groupIndex&&this.decks[r].groupIndex<=n&&(t[this.decks[r].groupIndex-1]=!0);for(var i in this.decks)if(!this.decks[i].groupIndex){for(var o=0;null!=t[o];o+=1);t[o]=this.decks[i].id}for(var u in this.decks)this.decks[u].groupIndex&&this.decks[u].groupIndex<=n&&(t[this.decks[u].groupIndex-1]=this.decks[u].id);var s={};for(var l in this.decks)this.decks[l].groupIndex&&this.decks[l].groupIndex>n&&(s[this.decks[l].groupIndex-1]=this.decks[l].id);for(var d in s){for(var f=0;null!=t[f];f+=1);t[f]=this.decks[s[d]].id}var c=!0;for(var p in e)c=c&&"string"==typeof e[p];if(c)for(var v in e){var h=t[v%t.length];this.decks[h].genCardByName(e[v])}else for(var y in e)y<t.length&&this.decks[t[y]].Fill(e[y])}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(e&&t){var n=e.getDecks();void 0!==t.decks&&"number"!=typeof t.decks||(t.decks=[]);for(var r in n){if(t.decks[r]||(t.decks[r]={}),t.position&&t.decks[r].parentPosition&&(t.decks[r].parentPosition={x:t.position.x,y:t.position.y}),t.rotate&&(t.decks[r].rotate=t.rotate),t.paddingX&&(t.decks[r].paddingX=t.paddingX),t.paddingY&&(t.decks[r].paddingY=t.paddingY),t.flipPaddingX&&(t.decks[r].flipPaddingX=t.flipPaddingX),t.flipPaddingY&&(t.decks[r].flipPaddingY=t.flipPaddingY),t.decks[r].position||(t.decks[r].position={}),t.decks[r].parentPosition||(t.decks[r].parentPosition={}),!t.decks[r].parentPosition.x&&a.position&&a.position.x&&"number"==typeof a.position.x&&(t.decks[r].parentPosition.x=t.position.x),!t.decks[r].parentPosition.y&&a.position&&a.position.y&&"number"==typeof a.position.y&&(t.decks[r].parentPosition.y=t.position.y),t.placement){var i=o["default"].card;t.placement.x&&(t.decks[r].position.x=(t.placement.x+i.width)*r),t.placement.y&&(t.decks[r].position.y=(t.placement.y+i.height)*r)}!t.decks[r].rotate&&t.rotate&&"number"==typeof t.rotate&&(t.decks[r].rotate=t.rotate),!t.decks[r].paddingX&&t.paddingX&&"number"==typeof t.paddingX&&(t.decks[r].paddingX=t.paddingX),!t.decks[r].paddingY&&t.paddingY&&"number"==typeof t.paddingY&&(t.decks[r].paddingY=t.paddingY),!t.decks[r].flipPaddingX&&t.flipPaddingX&&"number"==typeof t.flipPaddingX&&(t.decks[r].flipPaddingX=t.flipPaddingX),!t.decks[r].flipPaddingY&&t.flipPaddingY&&"number"==typeof t.flipPaddingY&&(t.decks[r].flipPaddingY=t.flipPaddingY),n[r].Redraw(t.decks[r])}}};var i=n(3),o=r(i)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=a(r),o=n(42),u=a(o),s=n(43),l=a(s),d=n(50),f=a(d);t["default"]={count:i["default"],fan:u["default"],map:l["default"],line:f["default"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=e.count,n=[],a=0;a<t;a+=1){var r=this.name+"_deck"+(a+1);n.push({name:r})}return n}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){this.placement={x:0,y:0};for(var t=[],n="number"==typeof e.count?e.count:3,a=180/n,r="number"==typeof e.radius?e.radius:100,o=void 0!==e.center&&void 0!==e.center.x&&void 0!==e.center.y?e.center:{x:0,y:0},u=a/2+270,s=Math.PI/180,l=0;l<n;l+=1){var d=Math.sin(u*s)*r,f=Math.cos(u*s)*r;u>360&&(u-=360),t.push({name:this.name+"_deck"+l,rotate:u,position:{x:o.x+d-i["default"].card.width/2,y:o.y-f-i["default"].card.height/2}}),u+=a}return t};var r=n(3),i=a(r)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=[],n={x:0,y:0},a=this.placement?{x:void 0!==this.placement.x?this.placement.x:n.x,y:void 0!==this.placement.y?this.placement.y:n.y}:n;this.placement={x:0,y:0};var r=1,o=l["default"].mapSize(e.map);for(var s in e.map)for(var d in e.map[s])("boolean"==typeof e.map[s][d]&&e.map[s][d]||"number"==typeof e.map[s][d]&&e.map[s][d]>0)&&(e.map[s][d]={}),"string"==typeof e.map[s][d]?e.map[s][d]={name:e.map[s][d]}:e.map[s][d]&&void 0!==e.map[s][d]&&"string"!=typeof e.map[s][d].name&&(e.map[s][d].name=this.name+"_deck_"+d+"_"+s);for(var f in e.map)for(var c in e.map[f]){var p=0|c,v=0|f,h=e.map[v][p];if(h){var y={name:e.map[v][p].name,position:{x:p*((0|i["default"].card.width)+(0|a.x)),y:v*((0|i["default"].card.height)+(0|a.y))}},m=[],g={around:"mapAroundRelations",beside:"mapBesideRelations",fall:"mapFallRelations"};if(e.relations)for(var k in g)e.relations[k]&&(m=m.concat(u["default"][g[k]]({x:p,y:v,map:e.map,mapSize:o,el:h,data:e.relations[k]})));y.relations=m,t.push(y),r+=1}}return t};var r=n(3),i=a(r),o=n(44),u=a(o),s=n(46),l=a(s)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(45),i=a(r),o=n(47),u=a(o),s=n(48),l=a(s),d=n(49),f=a(d);t["default"]={mapFallRelations:i["default"],mapAroundRelations:u["default"],mapBesideRelations:l["default"],lineBesideRelations:f["default"]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=a(r),o=[{left:"right"},{right:"left"},{up:"down"},{down:"up"}];t["default"]=function(e){var t=[],n=[];for(var a in e.data.directions)n.indexOf(e.data.directions[a])<0&&n.indexOf(o[e.data.directions[a]])<0&&n.push(e.data.directions[a]);for(var r in n){var u=null,s=null;switch(n[r]){case"left":u=(0|e.x)+i["default"].beSide.left.x,s=(0|e.y)+i["default"].beSide.left.y,i["default"].exist(u,s,e.mapSize,e.map)&&t.push({name:"fall",direction:"left",to:e.map[s][u].name});break;case"right":u=(0|e.x)+i["default"].beSide.right.x,s=(0|e.y)+i["default"].beSide.right.y,i["default"].exist(u,s,e.mapSize,e.map)&&t.push({name:"fall",direction:"right",to:e.map[s][u].name});break;case"up":u=(0|e.x)+i["default"].beSide.up.x,s=(0|e.y)+i["default"].beSide.up.y,i["default"].exist(u,s,e.mapSize,e.map)&&t.push({name:"fall",direction:"up",to:e.map[s][u].name});break;case"down":u=(0|e.x)+i["default"].beSide.down.x,s=(0|e.y)+i["default"].beSide.down.y,i["default"].exist(u,s,e.mapSize,e.map)&&t.push({name:"fall",direction:"down",to:e.map[s][u].name})}}return t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={left:{x:-1,y:0},right:{x:1,y:0},up:{x:0,y:-1},down:{x:0,y:1}},a=function(e,t,n){return e>=0&&t>=0&&e<n.width&&t<n.height},r=function(e,t,n,r){return a(e,t,n)&&r[t][e]},i=function(e){var t={width:e[0].length,height:e.length};return e.forEach(function(e){t.width=Math.max(t.width,e.length)}),t},o=[{x:-1,y:-1,type:"corn",id:"clt"},{x:0,y:-1,type:"side",id:"top"},{x:1,y:-1,type:"corn",id:"crt"},{x:-1,y:0,type:"side",id:"lft"},{x:1,y:0,type:"side",id:"rgt"},{x:-1,y:1,type:"corn",id:"clb"},{x:0,y:1,type:"side",id:"btm"},{x:1,y:1,type:"corn",id:"crb"}];t["default"]={beSide:n,mapSize:i,inMap:a,aroundRelations:o,exist:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=a(r);t["default"]=function(e){var t=[];for(var n in i["default"].aroundRelations)i["default"].inMap(e.x+i["default"].aroundRelations[n].x,e.y+i["default"].aroundRelations[n].y,e.mapSize)&&e.map[e.y+i["default"].aroundRelations[n].y][e.x+i["default"].aroundRelations[n].x]&&t.push({to:e.map[e.y+i["default"].aroundRelations[n].y][e.x+i["default"].aroundRelations[n].x].name,type:i["default"].aroundRelations[n].type,id:i["default"].aroundRelations[n].id,name:"around"});return t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(46);a(r);t["default"]=function(e){var t=[];return t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(46);a(r);t["default"]=function(e){var t=[],n=e.deckIndex>0?e.decks[(0|e.deckIndex)-1].name:null;n&&t.push({name:"beside",type:"prev",to:n});var a=e.deckIndex<e.count-1?e.decks[(0|e.deckIndex)+1].name:null;return a&&t.push({name:"beside",type:"next",to:a}),t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=e.count,n=[],a=0;a<t;a+=1){var r=this.name+"_deck"+(a+1),o={name:r};n.push(o)}if(e.first){var u=n[0];for(var s in e.first)u[s]=e.first[s]}if(n[0].tag="first",e.last){var l=n[n.length-1];for(var d in e.first)l[d]=e.first[d]}n[n.length-1].tag="last";for(var f in n){var c=[],p={beside:"lineBesideRelations"};if(e.relations)for(var v in p)e.relations[v]&&(c=c.concat(i["default"][p[v]]({deckIndex:f,count:t,decks:n,data:e.relations[v]})));n[f].relations=c}return n};var r=n(44),i=a(r)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),i=a(r),o={fallAutoStep:i["default"]};t["default"]=function(e){var t={};for(var n in e)if(o[n]){var a=new o[n](e[n]);a.init(n),t[n]=a}return t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),l=(a(s),n(3)),d=(a(l),n(2)),f=(a(d),n(53)),c=a(f),p=n(12),v=a(p),h=n(7),y=a(h),m=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),u(t,[{key:"check",value:function(){y["default"].checkTips();var e=y["default"].getTips();0===e.length&&this.end()}},{key:"auto",value:function(){}},{key:"manual",value:function(e){var t=v["default"].getDeckById(e.putDeck[0].card.parent),n=e.to,a=t.getRelationsByName("fall",{from:null});for(var r in a)if(a[r].to==n.name&&0===n.cardsCount())return!0;return!1}}]),t}(c["default"]);t["default"]=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),u=a(o),s=n(1),l=a(s),d=n(5),f=a(d),c=n(3),p=a(c),v=function(){function e(t){r(this,e),void 0!==t.groups&&(this.groups=t.groups),"string"==typeof t.event&&(this.event=t.event),"string"==typeof t.dispatch&&(this.dispatch=t.dispatch),"boolean"==typeof t.autoStep&&(this.autoStep=t.autoStep)}return i(e,[{key:"start",value:function(e){this.autoStep||u["default"].dispatch("stopSession"),l["default"].set("autoStep:stepType",this.stepType),e&&"function"==typeof e.before&&e.before({stepType:this.stepType}),l["default"].set("stepType",this.stepType),this.autoStep?(f["default"].curLock(),this.auto()):this.check()}},{key:"end",value:function(){this.dispatch?u["default"].dispatch(this.dispatch,{stepType:l["default"].get("stepType"),callback:function(){l["default"].set("stepType",p["default"].stepType)}}):u["default"].dispatch("stopSession"),l["default"]["delete"]("autoStep:stepType")}},{key:"init",value:function(e){var t=this;this.stepType=e,this.event&&u["default"].listen(this.event,function(e){t.start(e)}),this.autoStep||u["default"].listen("moveEnd",function(){l["default"].get("stepType")==t.stepType&&t.check()},"addAutoStepEvent:"+this.event)}}]),e}();t["default"]=v},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e);try{localStorage.hasOwnProperty("SolitaireEngine")||(localStorage.SolitaireEngine="{}")}catch(t){}}return a(e,[{key:"set",value:function(e,t){try{var n=JSON.parse(localStorage.SolitaireEngine);n[e]=t;var a=JSON.stringify(n);localStorage.SolitaireEngine=a}catch(r){}}},{key:"get",value:function(e){try{var t=JSON.parse(localStorage.SolitaireEngine);return t[e]}catch(n){return null}}},{key:"clear",value:function(){try{localStorage.SolitaireEngine="{}"}catch(e){}}}]),e}();t["default"]=new r},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);a(r);t["default"]=function(){var e=n(56);$("#gpCommit").parent().before(e)}},function(e,t){e.exports="<div id=solitaire-engine-style-preferences> <h4>Настройки оформления</h4> <div> <span class=solitaire-engine-style-preferences-label>Фон:</span> <label> <input type=radio name=pref_field value=default_field> Классический </label> <label> <input type=radio name=pref_field value=alternative_field> Альтернативный </label> </div> <div> <span class=solitaire-engine-style-preferences-label>Лицевая сторона:</span> <label> <input type=radio name=pref_face value=default_face> Классическая </label> <label> <input type=radio name=pref_face value=alternative_face> Англо-американская </label> </div> <div> <span class=solitaire-engine-style-preferences-label>Рубашка:</span> <label> <input type=radio name=pref_back value=default_back> Классическая </label> <label> <input type=radio name=pref_back value=alternative_back> Альтернативная </label> </div> <div id=gamePreferences></div> </div>"},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(2),u=a(o),s=n(3),l=a(s),d=n(54),f=a(d),c=n(58),p=a(c),v=function(){var e=f["default"].get("pref");!e&&(e=l["default"].pref);for(var t in l["default"].themes){var n=e[t]&&l["default"].themes[t].indexOf(e[t])>=0?e[t]:l["default"].pref[t];$("input[name='pref_"+t+"'][value='"+n+"']").prop({checked:!0})}p["default"].show(e)},h=function(){var e={};for(var t in l["default"].themes){var n=$("input[name='pref_"+t+"']:checked").val();n="true"==n||"false"!=n&&n,e[t]=n}u["default"].dispatch("fieldThemesSet",e),p["default"].get(e),y(e);var a=i["default"].get("changePreferencesCallback");if("function"==typeof a){var r=e;a(r)}},y=function(e){f["default"].set("pref",e)};t["default"]=function(){$("#bbParameters").click(v),$("#parametersPanel").on("change","input",h)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(1),u=a(o),s=function(){function e(){r(this,e),this.exist=!1}return i(e,[{key:"draw",value:function(){if(!this.exist){var e=u["default"].get("gamePreferences");for(var t in e){var n=$("<div>").append($("<span>").addClass("solitaire-engine-style-preferences-label").html(e[t].title));for(var a in e[t].options)$(n).append($("<label>").append($("<input>").prop({type:"radio",name:"gamePref_"+t,value:e[t].options[a].value})).append(e[t].options[a].title));$("#gamePreferences").append(n)}this.exist=!0}}},{key:"show",value:function(e){this.draw();var t=u["default"].get("gamePreferences");for(var n in t)e&&void 0!==e[n]?$("input[name='gamePref_"+n+"'][value='"+e[n]+"']").prop({checked:!0}):$("input[name='gamePref_"+n+"'][value='"+t[n].value+"']").prop({checked:!0})}},{key:"get",value:function(e){var t=u["default"].get("gamePreferences");for(var n in t){var a=$("input[name='gamePref_"+n+"']:checked").val();a="true"==a||"false"!=a&&a,e[n]=a}}}]),e}();t["default"]=new s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),o=n(3),u=a(o),s=n(54),l=a(s);t["default"]=function(){var e=l["default"].get("pref");!e&&(e=u["default"].pref);for(var t in e)u["default"].themes[t]&&u["default"].themes[t].indexOf(e[t])<0&&(e[t]=u["default"].pref[t]);i["default"].dispatch("fieldThemesSet",e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),i=a(r),o=n(1),u=a(o),s=n(3),l=a(s),d=n(5),f=a(d),c=n(12),p=a(c),v=n(7),h=a(v),y=n(9),m=a(y),g=n(61),k=a(g),_=n(10),b=a(_),x=function w(e,t,n){f["default"].animationDefault();var a=e[0].card.parent&&f["default"].getElementById(e[0].card.parent),r=null,o=!0,s=u["default"].get("stepType");if(!n.dbclick&&0===n.distance&&u["default"].get("moveDistance")>0&&s==l["default"].stepType)return!1;if(s!=l["default"].stepType&&(b["default"].autoSteps&&!b["default"].autoSteps[s]||!b["default"].autoSteps)){var d=e[0].card.parent&&f["default"].getElementById(e[0].card.parent);return void i["default"].dispatch("moveCardToHome",{moveDeck:e,departure:d,stepType:u["default"].get("stepType")})}i["default"].dispatch("startSession",{type:"move"}),o=o&&t;var c=null;if(o&&(c=f["default"].getElementById(t)),o=o&&c,o&&("card"==c.type?r=f["default"].getElementById(c.parent):"deck"==c.type&&(r=c)),o=o&&r,o=o&&a,o=o&&r.id!=a.id){var v=r.Put(e);if(o=o&&v,v){var y=a.Pop(e.length);if(o=o&&y,y){r.Push(y),f["default"].animationDefault();var g=u["default"].get("stepType"),_=!1;for(var x in r.actions)"moveEnd"==r.actions[x].event&&(_=!0);i["default"].dispatch("addStep",{move:{from:a.name,to:r.name,deck:p["default"].deckCardNames(e),stepType:{undo:g,redo:_?"specialStepType":g},context:"move"}}),r.save&&i["default"].dispatch("saveSteps"),i["default"].dispatch("moveDragDeck",{departure:a,destination:r,moveDeck:e,callback:function(){i["default"].has("moveEnd",{tag:i["default"].tags.inGame})&&u["default"].get("autoStep:stepType")!=u["default"].get("stepType")||i["default"].dispatch("stopSession"),i["default"].dispatch("moveEnd:"+u["default"].get("stepType")),i["default"].dispatch("moveEnd",{from:a,to:r,moveDeck:e,stepType:u["default"].get("stepType"),before:function(e){e&&"string"==typeof e.stepType&&i["default"].dispatch("addStep",{redo:{stepType:e.stepType}})}}),h["default"].checkTips(),k["default"].winCheck({show:!0})}})}}}if(!o&&a)if(b["default"].inputParams.doubleClick&&n.dbclick||n.distance>=u["default"].get("moveDistance")){var P=(0,m["default"])(e,n);if(P)return void w(e,P.to.deck.id,n);i["default"].dispatch("moveCardToHome",{moveDeck:e,departure:a}),i["default"].dispatch("stopSession")}else i["default"].dispatch("moveCardToHome",{moveDeck:e,departure:a}),i["default"].dispatch("stopSession")};i["default"].listen("Move",function(e){x(e.moveDeck,e.to,e.cursorMove)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(2),u=a(o),s=n(5),l=(a(s),n(62)),d=a(l),f=n(12),c=a(f),p=function(e){var t=!0,n=!1,a=i["default"].get("winCheck");for(var r in a.rules)if(n=!0,d["default"][r]){var o=d["default"][r]({decks:c["default"].getDecks({visible:!0}),rulesArgs:a.rules[r]});t=t&&o}else t=t&&d["default"].newerWin();return n||(t=t&&d["default"].newerWin()),!!t&&(!(!e||!e.noCallback)||(u["default"].dispatch("win",e),!0))},v=function(e){e||(e={}),void 0===e.show&&(e.show=!1),p(e)};t["default"]={winCheck:p,hwinCheck:v}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(3),u=a(o),s={group:function(e){if(!e.filter||!e.filterArgs)return!1;var t=[];for(var n in e.decks)("string"==typeof e.filterArgs&&e.decks[n].parent==e.filterArgs||e.filterArgs.length&&e.filterArgs.indexOf(e.decks[n].parent)>=0)&&t.push(e.decks[n]);return e.decks=t,t.length},groups:function(e){return s.group(e)},deck:function(e){if(!e.filter||!e.filterArgs)return!1;var t=[];for(var n in e.decks)("string"==typeof e.filterArgs&&e.decks[n].name==e.filterArgs||e.filterArgs.indexOf(e.decks[n].name)>=0)&&t.push(e.decks[n]);return e.decks=t,t.length},decks:function(e){return s.deck(e)},firstEmpty:function(e){var t=[];for(var n in e.decks)e.decks[n].tags.indexOf("last")>=0&&t.push(e.decks[n]);return e.decks=t,t.length},_asc_desk:function(e){if(!e||"number"!=typeof e.asc_desk)return!1;var t=!0;for(var n in e.decks){if(!t)return!1;var a=e.decks[n].cards;for(var r in a)if(r>0){var o=i["default"].validateCardName(a[(0|r)-1].name),s=i["default"].validateCardName(a[0|r].name),l=u["default"].card.ranks;t=t&&o&&s&&l.indexOf(o.rank)==l.indexOf(s.rank)+e.asc_desk}}return t},newerWin:function(){return!1},allEmpty:function(e){var t=!0;for(var n in e.decks)t=t&&0===e.decks[n].cards.length;return t},empty:function(e){s.allEmpty(e)},allInOne:function(e){var t=0,n=0,a=0;for(var r in e.decks)0===e.decks[r].cards.length?t+=1:a=r,n+=1;var i=t==n-1;return e.filter&&(e.decks=i?[e.decks[a]]:[]),i},allAscend:function(e){return e.asc_desk=-1,s._asc_desk(e)},allDescent:function(e){return e.asc_desk=1,s._asc_desk(e)},lego:function(e){if(!e||!e.rulesArgs)return!1;var t=!0;for(var n in e.rulesArgs){var a={};for(var r in e.decks)a[r]=e.decks[r];var i={decks:a};if(t&&e.rulesArgs[n].filters){i.filter=!0;for(var o in e.rulesArgs[n].filters)if("string"==typeof e.rulesArgs[n].filters[o]&&s[e.rulesArgs[n].filters[o]])i.filterArgs=null,t=t&&s[e.rulesArgs[n].filters[o]](i);else if(e.rulesArgs[n].filters[o]&&""+e.rulesArgs[n].filters[o]=="[object Object]")for(var u in e.rulesArgs[n].filters[o])s[u]?(i.filterArgs=e.rulesArgs[n].filters[o][u],t=t&&s[u](i)):t=t&&s.newerWin();else t=t&&s.newerWin();i.filter=!1}if(e.rulesArgs[n].rules)for(var l in e.rulesArgs[n].rules)t=s[e.rulesArgs[n].rules[l]]?t&&s[e.rulesArgs[n].rules[l]](i):t&&s.newerWin()}return t}};t["default"]=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),i=a(r),o=n(1),u=a(o),s=n(64),l=a(s),d=n(67),f=(a(d),n(68)),c=(a(f),n(69)),p=(a(c),n(70)),v=(a(p),n(71)),h=(a(v),n(72)),y=(a(h),n(73));a(y);i["default"].listen("removeEl",function(e){var t=u["default"].get("domElement:"+e.id);(0,l["default"])(t).remove()}),i["default"].listen("showCard",function(e){(0,l["default"])(e).show()}),i["default"].listen("hideCard",function(e){(0,l["default"])(e).hide()}),i["default"].listen("stopAnimations",function(){})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=(a(r),n(1)),o=a(i),u=n(65),s=a(u),l=n(66),d=a(l);o["default"].set("animatedElements",0),o["default"].set("animatedElementsStack",[]),o["default"].set("animatedCallback",function(){});var f=function(e){if(!e)throw Error("elRender:empty arguments");if("string"!=typeof e)return e.el||e.elements?e:new s["default"](e);try{if("#"==e[0]){var t=document.getElementById(e.slice(1,1/0));return new s["default"](t)}if("."==e[0]){var n=document.getElementsByClassName(e.slice(1,1/0));return new d["default"](n)}if("<"==e[0]){var a=document.createElement("temp");a.innerHTML=e;var r=a.children[0];return new s["default"](r)}}catch(e){}};f.stopAnimations=function(e){f(".animated").css({transition:"0s"}).removeClass("animated")},t["default"]=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),u=a(o),s=n(1),l=a(s),d=n(3),f=(a(d),function(){function e(t){r(this,e),this.el=t,t||(this.el=null)}return i(e,[{key:"attr",value:function(e){try{for(var t in e)this.el[t]=e[t];return this}catch(n){}}},{key:"hasClass",value:function(e){try{var t=this.el.className.split(" ");return t.indexOf(e)>=0}catch(n){}}},{key:"toggleClass",value:function(e){try{this.hasClass(e)?this.removeClass(e):this.addClass(e)}catch(t){}}},{key:"addClass",value:function(e){try{var t=this.el.className.split(" ");return this.hasClass(e)||(t.push(e),this.el.className=t.join(" ")),this}catch(n){}}},{key:"removeClass",value:function(e){if(!this.el||!this.el.className)return this;try{var t=this.el.className.split(" ");if(this.hasClass(e)){var n=[];for(var a in t)t[a]!=e&&n.push(t[a]);t=n,this.el.className=t.join(" ")}return this}catch(r){}}},{key:"css",value:function(e){if(!this.el)return this;try{for(var t in e)try{this.el.style[t]=e[t]}catch(n){}return this}catch(n){}}},{key:"hide",value:function(){try{return this.css({display:"none"})}catch(e){}}},{key:"show",value:function(){try{return this.css({display:"block"})}catch(e){}}},{key:"append",value:function(e){try{return e.el&&(e=e.el),this.el.appendChild(e),this}catch(t){}}},{key:"html",value:function(e){try{return void 0===e?this.el.innerHTML:(e.el&&(e=e.el),this.el.innerHTML=e,this)}catch(t){}}},{key:"animate",
value:function(e,t,n,a){var r=this;try{!function(){var i=l["default"].get("animation");void 0===t&&(t=l["default"].get("animationTime")),"function"==typeof t&&(n=t,t=l["default"].get("animationTime")),"string"==typeof n&&(a=n,n=null),setTimeout(function(){i&&r.css({transition:t/1e3+"s"});var o=0,s=function(e){var t=e+"",n=t.split("px");return 2==n.length?(0|n[0])+"px":e};for(var l in e)s(r.el.style[l])!=s(e[l])&&(o+=1),r.el.style[l]=e[l];i?(r.addClass("animated"),r.el.addEventListener("transitionend",function(){o-=1,o||(r.removeClass("animated"),r.css({transition:null}),"function"==typeof n&&n(),u["default"].dispatch("allAnimationsEnd",a))},!1)):("function"==typeof n&&n(),u["default"].dispatch("allAnimationsEnd",a))},0)}()}catch(i){}}},{key:"remove",value:function(){try{this.el.parentNode.removeChild(this.el)}catch(e){}}},{key:"parent",value:function(){return new e(this.el.parentNode)}},{key:"after",value:function(e){try{this.el.parentNode.insertBefore(e,this.el.nextElementSibling)}catch(t){}return this}},{key:"before",value:function(e){try{this.el.parentNode.insertBefore(e,this.el)}catch(t){}return this}},{key:"listen",value:function(e,t){this.el.addEventListener(e,t)}},{key:"trigger",value:function(e){"function"==typeof this.el[e]&&this.el[e]()}},{key:"click",value:function(e){this.listen("click",e)}}]),e}());t["default"]=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(3),u=(a(o),n(65)),s=a(u),l=function(){function e(t){r(this,e),this.elements=[];for(var n in t)this.elements.push(new s["default"](t[n]))}return i(e,[{key:"attr",value:function(e){for(var t in this.elements)this.elements[t].attr(e);return this}},{key:"toggleClass",value:function(e){for(var t in this.elements)this.elements[t].toggleClass(e);return this}},{key:"addClass",value:function(e){for(var t in this.elements)this.elements[t].addClass(e);return this}},{key:"removeClass",value:function(e){for(var t in this.elements)this.elements[t].removeClass(e);return this}},{key:"css",value:function(e){for(var t in this.elements)this.elements[t].css(e);return this}},{key:"hide",value:function(){for(var e in this.elements)this.elements[e].hide();return this}},{key:"show",value:function(){for(var e in this.elements)this.elements[e].show();return this}},{key:"animate",value:function(e,t,n,a){void 0===t&&(t=share.get("animationTime")),"function"==typeof t&&(n=t,t=share.get("animationTime")),"string"==typeof n&&(a=n,n=null);var r=0;for(var i in this.elements)r+=1,this.elements[i].animate(e,t,function(){r-=1,r||n()});return this}},{key:"remove",value:function(){for(var e in this.elements)this.elements[e].parentNode.removeChild(this.elements[e]);return this}}]),e}();t["default"]=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),i=a(r),o=n(2),u=a(o),s=n(3),l=a(s),d=n(10),f=(a(d),n(64)),c=a(f);u["default"].listen("initField",function(e){var t=e.field?e.field:"#map";"string"==typeof t&&(t=2==t.split(".").length?document.getElementsByClassName(t.split(".")[1])[0]:2==t.split("#").length?document.getElementById(t.split("#")[1]):document.getElementsByTagName(t),t||(t=document.getElementById("mat")));var n={};e.width&&"number"==typeof e.width&&(n.width=e.width+"px"),e.height&&"number"==typeof e.height&&(n.height=e.height+"px"),e.top&&"number"==typeof e.top&&(n.top=e.top+"px"),e.left&&"number"==typeof e.left&&(n.left=e.left+"px");var a=i["default"].get("zoom");a==l["default"].zoom&&1==a||(n.transform="scale("+a+")",n["transform-origin"]="0 0"),(0,c["default"])(t).css(n).addClass("solitaireField"),i["default"].set("domElement:field",t)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),i=a(r),o=n(1),u=a(o),s=n(3),l=a(s),d=n(10),f=(a(d),n(64)),c=a(f),p=function(e,t,n){e.x=t.position&&t.position.x&&"number"==typeof t.position.x?t.position.x:0,e.y=t.position&&t.position.y&&"number"==typeof t.position.y?t.position.y:0,e.x=t.parentPosition&&t.parentPosition.x?e.x+t.parentPosition.x:e.x,e.y=t.parentPosition&&t.parentPosition.y?e.y+t.parentPosition.y:e.y,n.rotate=e.rotate=t.rotate&&"number"==typeof t.rotate?t.rotate:0,e.padding_y=t.paddingY&&"number"==typeof t.paddingY?t.paddingY:t.paddingType?l["default"].padding_y:0,e.padding_x=t.paddingX&&"number"==typeof t.paddingX?t.paddingX:t.paddingType?l["default"].padding_x:0,e.flip_padding_y=t.flipPaddingY&&"number"==typeof t.flipPaddingY?t.flipPaddingY:t.paddingType?l["default"].flip_padding_y:0,e.flip_padding_x=t.flipPaddingX&&"number"==typeof t.flipPaddingX?t.flipPaddingX:t.paddingType?l["default"].flip_padding_x:0};i["default"].listen("addDeckEl",function(e){p(e.params,e.deckData,e.deck);var t=(0,c["default"])("<div>"),n={transform:"rotate("+(0|e.params.rotate)+"deg)",width:l["default"].card.width+"px",height:l["default"].card.height+"px",left:e.params.x+"px",top:e.params.y+"px"};n.display=e.deck.visible?"block":"none",(0,c["default"])(t).css(n).addClass("el").attr({id:e.deck.id}),e.deckData.showSlot&&(0,c["default"])(t).addClass("slot"),e.deckData["class"]&&(0,c["default"])(t).addClass(e.deckData["class"]);var a=u["default"].get("domElement:field");(0,c["default"])(a).append(t),u["default"].set("domElement:"+e.deck.id,t)}),i["default"].listen("redrawDeckFlip",function(e){if(e&&e.cards)for(var t in e.cards){var n={},a=u["default"].get("domElement:"+e.cards[t].id);e.cards[t].flip?(0,c["default"])(a).addClass("flip"):(0,c["default"])(a).removeClass("flip"),(0,c["default"])(e.cards[t]).css(n)}}),i["default"].listen("redrawDeckIndexes",function(e){if(e&&e.cards)for(var t in e.cards){var n=u["default"].get("domElement:"+e.cards[t].id);(0,c["default"])(n).css({"z-index":(0|l["default"].startZIndex)+(0|t)})}}),i["default"].listen("redrawDeck",function(e){if(u["default"].get("noRedraw"))return!1;e.deckData&&(p(e.params,e.deckData,e.deck),e.deckData.paddingX&&u["default"].get("padding_x",e.deckData.paddingX),e.deckData.flipPaddingX&&u["default"].get("flip_padding_x",e.deckData.flipPaddingX),e.deckData.paddingY&&u["default"].get("padding_y",e.deckData.paddingY),e.deckData.flipPaddingY&&u["default"].get("flip_padding_y",e.deckData.flipPaddingY));var t={transform:"rotate("+(0|e.params.rotate)+"deg)",left:e.params.x+"px",top:e.params.y+"px"};t.display=e.deck.visible?"block":"none";var n=u["default"].get("domElement:"+e.deck.id);(0,c["default"])(n).css(t);for(var a in e.cards){var r=e.deck.padding(a),i=(0|e.params.startZIndex)+(0|a),o={"-ms-transform":"rotate("+(0|e.params.rotate)+"deg)","-webkit-transform":"rotate("+(0|e.params.rotate)+"deg)","-moz-transform":"rotate("+(0|e.params.rotate)+"deg)",transform:"rotate("+(0|e.params.rotate)+"deg)",left:r.x+"px",top:r.y+"px","z-index":i};o.display=e.deck.visible?"block":"none";var s=u["default"].get("domElement:"+e.cards[a].id);e.cards[a].flip?(0,c["default"])(s).addClass("flip"):(0,c["default"])(s).removeClass("flip"),(0,c["default"])(s).css(o)}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),i=a(r),o=n(2),u=a(o),s=n(3),l=a(s),d=n(5),f=(a(d),n(10)),c=(a(f),n(64)),p=a(c);u["default"].listen("addCardEl",function(e){var t={width:1*l["default"].card.width.toFixed(3),height:1*l["default"].card.height.toFixed(3)},n={width:t.width+"px",height:t.height+"px"},a=(0,p["default"])("<div>");(0,p["default"])(a).addClass("el card draggable "+e.name).css(n).attr({id:e.id}),i["default"].set("domElement:"+e.id,a);var r=i["default"].get("domElement:field");(0,p["default"])(r).append(a)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),i=a(r),o=n(1),u=a(o),s=n(64),l=a(s),d=n(7),f=a(d);i["default"].listen("showTip",function(e){if(e&&e.el&&e.type){var t=u["default"].get("domElement:"+e.el.id);(0,l["default"])(t).addClass(e.type)}}),i["default"].listen("hideTips",function(e){if(e&&e.types)for(var t in e.types){var n=e.types[t];(0,l["default"])("."+n).removeClass(n)}else for(var a in f["default"].tipTypes){var r=f["default"].tipTypes[a];(0,l["default"])("."+r).removeClass(r)}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),i=a(r),o=n(1),u=a(o),s=n(5),l=a(s),d=n(3),f=a(d),c=n(64),p=a(c),v=function(e){return e<0&&(e+=360),e>360&&(e-=360),e};i["default"].listen("moveDragDeck",function(e){l["default"].curLock();var t=e.moveDeck.length-1;for(var n in e.moveDeck){var a=e.destination.padding(e.destination.cards.length-1+(0|n)),r=v(e.departure.rotate),o=v(e.destination.rotate),s=u["default"].get("domElement:"+e.moveDeck[n].card.id);(0,p["default"])(s).css({transform:"rotate("+r+"deg)"}),r-o>180&&(r-=360,(0,p["default"])(s).css({transform:"rotate("+r+"deg)"})),r-o<-180&&(o-=360);var d={transform:"rotate("+o+"deg)",left:a.x+"px",top:a.y+"px"},c=(0|f["default"].topZIndex)+(0|n),h=function(e,t){e.departure.Redraw(),e.destination.Redraw(),l["default"].curUnLock(),t&&"function"==typeof e.callback&&e.callback(),i["default"].dispatch("moveDragDeckDone",{deck:e.destination})}.bind(null,e,n==t);(0,p["default"])(s).css({"z-index":c}).animate(d,h)}}),i["default"].listen("moveDragDeckDone",function(e){if(e.deck.fill){var t=e.deck.cards;for(var n in t){var a=u["default"].get("domElement:"+t[n].id);(0,p["default"])(a).addClass("fill")}}}),i["default"].listen("dragDeck",function(e){for(var t in e._dragDeck){var n=e._deck.padding(e._dragDeck[t].index),a={left:n.x+(e.x-e._startCursor.x)+"px",top:n.y+(e.y-e._startCursor.y)+"px","z-index":f["default"].topZIndex+(0|t)},r=u["default"].get("domElement:"+e._dragDeck[t].card.id);(0,p["default"])(r).css(a)}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),i=a(r),o=n(1),u=a(o),s=n(5),l=a(s),d=n(64),f=a(d);i["default"].listen("moveCardToHome",function(e){u["default"].get("lastCursorMove").distance>0&&l["default"].curLock();for(var t in e.moveDeck){var n=e.departure.padding(e.moveDeck[t].index),a={left:n.x+"px",top:n.y+"px"},r=u["default"].get("domElement:"+e.moveDeck[t].card.id);(0,f["default"])(r).animate(a,function(){l["default"].curUnLock(),e.departure&&e.departure.Redraw(),"function"==typeof e.callback&&e.callback()},"moveCardToHomeAnimation")}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),i=a(r),o=n(1),u=a(o),s=n(3),l=a(s),d=n(10),f=(a(d),n(64)),c=a(f);i["default"].listen("fieldThemesSet",function(e){var t=u["default"].get("domElement:field");for(var n in l["default"].themes){for(var a in l["default"].themes[n]){var r=l["default"].themes[n][a];(0,c["default"])(t).removeClass(r)}var i=e[n];(0,c["default"])(t).addClass(i)}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=a(r),u=function(e){for(var t,n,a=e.length;a;t=Math.floor(Math.random()*a),n=e[--a],e[a]=e[t],e[t]=n);};t["default"]=function(e){var t="all",n=!1,a=10,r=e&&e.type&&"string"==typeof e.type?e.type:t,s=e&&e.deckCount&&"number"==typeof e.deckCount?e.deckCount:52,l=e&&e.iterations&&"number"==typeof e.iterations&&e.iterations<a?e.iterations:1,d=e&&e.shuffle&&"undefuned"!=typeof e.shuffle?e.shuffle:n,f=function(e,t){var n=[];for(var a in e)for(var r in t)n.push(e[a]+t[r]);return n},c=36==s?o["default"].card.ranks36:o["default"].card.ranks;if(e&&e.ranks){c=[];for(i in e.ranks)o["default"].card.rank.indexOf(""+e.ranks[i])>=0&&c.push(""+e.ranks[i])}var p={all:function(){return f(o["default"].card.suits,c)},black:function(){var e=o["default"].card.colors.black;return f(e,c)},red:function(){var e=o["default"].card.colors.red;return f(e,c)},black_and_red:function(){var e=[o["default"].card.colors.red[Math.random()*o["default"].card.colors.red.length|0],o["default"].card.colors.black[Math.random()*o["default"].card.colors.black.length|0]];return f(e,c)},h_only:function(){var e=["h"];return f(e,c)},d_only:function(){var e=["d"];return f(e,c)},c_only:function(){var e=["c"];return f(e,c)},s_only:function(){var e=["s"];return f(e,c)},one_rank_only:function(){var e=[o["default"].card.solors[Math.random()*o["default"].card.solors.length|0]];return f(e,c)}};p.hearts=p.h_only,p.diamonds=p.d_only,p.clubs=p.c_only,p.spades=p.s_only;for(var v=[];l>0;l-=1)v=v.concat(p[r]());return d&&u(v),v}},function(e,t){},function(e,t){},function(e,t){}]);